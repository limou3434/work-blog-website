<template><div><p>有了之前的基础，就可以使用语言来使用数据库了，实际上原生命令行操作数据库的场景比较少，语言级别的库和包才更加常用，接下我来带您学习如何使用 <code v-pre>C/C++</code> 访问 <code v-pre>MySQL</code> 客户端。</p>
<p>然后创建一个可以远程登录的用户，并且拥有对一个 <code v-pre>coon</code> 数据库的所有权限。</p>
<p>然后去 <a href="https://dev.mysql.com/downloads/" target="_blank" rel="noopener noreferrer">官网</a> 安装对应的库。</p>
<figure><img src="@source/4.业务服务/2.存储服务/assets/image-20240307153754663.png" alt="image-20240307153754663" tabindex="0" loading="lazy"><figcaption>image-20240307153754663</figcaption></figure>
<p>我们这里只演示 <code v-pre>C</code> 语言的调用。</p>
<figure><img src="@source/4.业务服务/2.存储服务/assets/image-20240307153854749.png" alt="image-20240307153854749" tabindex="0" loading="lazy"><figcaption>image-20240307153854749</figcaption></figure>
<figure><img src="@source/4.业务服务/2.存储服务/assets/image-20240307154200091.png" alt="image-20240307154200091" tabindex="0" loading="lazy"><figcaption>image-20240307154200091</figcaption></figure>
<figure><img src="@source/4.业务服务/2.存储服务/assets/image-20240307155631440.png" alt="image-20240307155631440" tabindex="0" loading="lazy"><figcaption>image-20240307155631440</figcaption></figure>
<p>但是这个方法比较麻烦，并且易错，因此这里只是简单讲一下流程，我还是推荐您直接使用 <code v-pre>yum</code> 来安装。</p>
<p>但是其实我们之前就安装过了，在使用 <code v-pre>yum install -y mysql -community-server</code> 时候，就已经安装过了。</p>
<p>可以使用 <code v-pre>ls /usr/include/mysql</code> 查看内部有关 <code v-pre>MySQL</code> 的头文件。</p>
<p>若没有找到就使用 <code v-pre>yum install -y mysql-devel</code> 下载对应的开发工具。</p>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 查看对应的头文件</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># ls /usr/include/mysql</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">big_endian.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">              my_getopt.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">         my_xml.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">binary_log_types.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">        my_global.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">         plugin_audit.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">byte_order_generic.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">      my_list.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">           plugin_ftparser.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">byte_order_generic_x86.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">  mysql</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">               plugin_group_replication.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">decimal.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">                 mysql_com.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">         plugin.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">errmsg.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">                  mysql_com_server.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">  plugin_keyring.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">keycache.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">                mysqld_ername.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">     plugin_validate_password.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">little_endian.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">           mysqld_error.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">      sql_common.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">m_ctype.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">                 mysql_embed.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">       sql_state.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">m_string.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">                mysql.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">             sslopt-case.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">my_alloc.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">                mysql_time.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">        sslopt-longopts.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">my_byteorder.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">            mysql_version.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">     sslopt-vars.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">my_command.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">              mysqlx_ername.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">     thr_cond.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">my_compiler.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">             mysqlx_error.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">      thr_mutex.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">my_config.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">               mysqlx_version.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">    thr_rwlock.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">my_config_x86_64.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">        my_sys.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">            typelib.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">my_dbug.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">                 my_thread.h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">my_dir.h</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">                  my_thread_local.h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># ls /lib64/mysql</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">libmysqlclient.a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">   libmysqlclient.so.20</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">       libmysqlservices.a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">  plugin</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">libmysqlclient.so</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">  libmysqlclient.so.20.3.31</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">  mecab</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>尝试在 <code v-pre>C</code> 中使用 <code v-pre>MySQL</code> 的接口。</p>
<div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-cpp"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">//main.cc 内部</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> &#x3C;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">stdio.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">></span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> &#x3C;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">mysql/mysql.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">></span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666">()</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">{</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">    printf</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">mysql client Version: </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076">%s\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">,</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> mysql_get_client_info</span><span style="--shiki-light:#999999;--shiki-dark:#666666">());</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //获取客户端版本信息</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">    return</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后使用 <code v-pre>g++ main.cc -L/lib64/mysql -lmysqlclient</code>，在我这边回显的结果为 <code v-pre>mysql client Version: 5.7.44</code>。</p>
<h1 id="_2-使用-api" tabindex="-1"><a class="header-anchor" href="#_2-使用-api"><span>2.使用 API</span></a></h1>
<blockquote>
<p>补充：<a href="https://dev.mysql.com/doc/c-api/5.7/en/c-api-function-reference.html" target="_blank" rel="noopener noreferrer">接口地址</a>。</p>
</blockquote>
<p>接下来我们直接通过一个程序来学习接口的使用。</p>
<p>首先先创建一个表，并且设置对应用户的权限，开发云服务器的端口号。</p>
<div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-sql"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"># 创建表结构</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">mysql</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">></span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> create</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> table</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> test_table( id </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">bigint</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> primary key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> auto_increment, </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> va</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">rchar(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">32</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">not null</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">, age </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">int</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> not null</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">, telphone </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">32</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">) </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">unique</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> );</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">Query OK, </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">0</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> rows</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> affected (</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">.</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">06</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">mysql</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">></span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> desc</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> test_table;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">+</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">----------+-------------+------+-----+---------+----------------+</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">| Field    | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">Type</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">        | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">Null</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">Key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> | </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">Default</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> | Extra          |</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">+</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">----------+-------------+------+-----+---------+----------------+</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">| id       | </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">bigint</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">20</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">)  | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">NO</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">   | PRI | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">NULL</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    | auto_increment |</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">| </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">     | </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">32</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">) | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">NO</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">   |     | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">NULL</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    |                |</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">| age      | </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">11</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">)     | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">NO</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">   |     | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">NULL</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    |                |</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">| telphone | </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">varchar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">32</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">) | YES  | UNI | </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">NULL</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    |                |</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">+</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">----------+-------------+------+-----+---------+----------------+</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">4</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> rows</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> in</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> set</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> (</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">0</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">.</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">00</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> sec)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后编写代码如下：</p>
<div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-cpp"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">//main.cc 内部</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> &#x3C;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">iostream</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">></span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> &#x3C;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">string</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">></span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> &#x3C;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">unistd.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">></span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">#</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">include</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> &#x3C;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">mysql/mysql.h</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">string host </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">127.0.0.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //也可以使用 localhost</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">string user </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">jimou</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">string passwd </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">**********</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //这里我隐去了我的密码</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">string db </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">conn</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">const</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> unsigned</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> port </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 8080</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">int</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> main</span><span style="--shiki-light:#999999;--shiki-dark:#666666">()</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">{</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">    //1.获取客户端版本信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">    std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cout </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">mysql client Version </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> mysql_get_client_info</span><span style="--shiki-light:#999999;--shiki-dark:#666666">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">endl</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">    //2.初始化，获得一个句柄</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    MYSQL</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> mySql </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> mysql_init</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">nullptr</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">    if</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">mySql </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> nullptr</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">        std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cerr </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">mysql_init() error</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">endl</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">        exit</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">    //3.修改本客户端的对应字符集，避免传输过程中出现乱码</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">    mysql_set_character_set</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">mySql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">utf8</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">    //4.连接数据库</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">    if</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">mysql_real_connect</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">        mySql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //内部包含套接字信息   </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A">        host</span><span style="--shiki-light:#999999;--shiki-dark:#666666">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">c_str</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(),</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //连接主机 IP</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A">        user</span><span style="--shiki-light:#999999;--shiki-dark:#666666">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">c_str</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(),</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //用户</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A">        passwd</span><span style="--shiki-light:#999999;--shiki-dark:#666666">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">c_str</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(),</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //密码</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A">        db</span><span style="--shiki-light:#999999;--shiki-dark:#666666">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">c_str</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(),</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //对应的数据库</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">        port</span><span style="--shiki-light:#999999;--shiki-dark:#666666">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //端口号</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">        nullptr</span><span style="--shiki-light:#999999;--shiki-dark:#666666">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //域间套接字</span></span>
<span class="line"><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">    	0</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //客户端标志</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">    )</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> ==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> nullptr</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">        std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cerr </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">mysql_real_connrct() error</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">endl</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">        exit</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">2</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">    //5.操作数据库</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">    while</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">        std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">string sql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">        </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">        std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cout </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">insert sql >>> </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> </span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">!</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">getline</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cin</span><span style="--shiki-light:#999999;--shiki-dark:#666666">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> sql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">))</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">        {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">            break</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">        }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">sql </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">==</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">quit</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> ||</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> sql </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">==</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">exit</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">        {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">            std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cout </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">bye~</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">endl</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">            break</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">        }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">        </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">mysql_query</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">mySql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A"> sql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">c_str</span><span style="--shiki-light:#999999;--shiki-dark:#666666">())</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> !=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">        {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">            std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cerr </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">mysql_query() error</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">endl</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">            exit</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">        }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">         </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">        //6.读取</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A">sql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">find</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">select</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> !=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">string</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">npos</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //有读取的命令</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">        {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">            MYSQL_RES</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> res </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> mysql_store_result</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">mySql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //MYSQL_RES 是一个类型，指向的对象可以保存查询的数据，把数据全部当作字符串存储起来，可以看作一个 char** arr[]，每个元素都是一个 char* arr[]，实际上这些空间也是 new/malloc() 出来的，因此最后一定要记得释放</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">            if</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">res </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">==</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375"> nullptr</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">            {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">                std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cerr </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">mysql_store_result() error</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">endl</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">                exit</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91">4</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">            }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">            else</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">            {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">                //读取行数和列数</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">                my_ulonglong rows </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> mysql_num_rows</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">                my_ulonglong fields </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> mysql_num_fields</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">                std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cout </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">rows: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> rows </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> and fields: </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> fields </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">endl</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">                //读取具体的列的属性</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">                MYSQL_FIELD</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> field_arry </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> mysql_fetch_fields</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //该函数行为类似 C++ 的迭代器，每次遍历自动移动行</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">                for</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> i </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> fields</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">                {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">                    std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cout </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A"> field_arry</span><span style="--shiki-light:#999999;--shiki-dark:#666666">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666">].</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A">name</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076">\t</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">                }</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">                std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cout </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076">\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">                //读取具体的行内内容</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">                for</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> i </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> rows</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> i</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">                {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">                    MYSQL_ROW row </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> mysql_fetch_row</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> //该函数行为类似 C++ 的迭代器，每次遍历自动移动行</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">                    for</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">int</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> j </span><span style="--shiki-light:#999999;--shiki-dark:#666666">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> j </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> fields</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> j</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">++</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">                    {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">                        std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cout </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A"> row</span><span style="--shiki-light:#999999;--shiki-dark:#666666">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">j</span><span style="--shiki-light:#999999;--shiki-dark:#666666">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> &#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076">\t</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">                    }</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">                    std</span><span style="--shiki-light:#999999;--shiki-dark:#666666">::</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">cout </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">&#x3C;&#x3C;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076">\n</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">                }</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">                //实际上还可以通过 field_arry[index].属性 的方式获取值</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">                //若为 NULL 值则打印的结果为空</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">            mysql_free_result</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD">    //7.释放句柄</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">    mysql_close</span><span style="--shiki-light:#999999;--shiki-dark:#666666">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">mySql</span><span style="--shiki-light:#999999;--shiki-dark:#666666">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375">    return</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-makefile line-numbers-mode" data-highlighter="shiki" data-ext="makefile" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-makefile"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># makefile 内部</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">mytest</span><span style="--shiki-light:#999999;--shiki-dark:#666666">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">main.cc</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    g++ main.cc -o mytest -std=c++11 -L/lib64/mysql -lmysqlclient</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965">.PHONY</span><span style="--shiki-light:#999999;--shiki-dark:#666666">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">clean</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">clean</span><span style="--shiki-light:#999999;--shiki-dark:#666666">:</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">    rm -f mytest</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>补充：可以使用命令 <code v-pre>show processlist;</code> 来查看当前连接数据库的服务端及其用户信息。</p>
</blockquote>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># shell 的运行结果</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># (1)插入数据</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> ./mytest</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">mysql</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> client</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 5.7.44</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> sql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> >>> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> into</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> test_table</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> (name, </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">age,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> telphone</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">) values (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">'imou'</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> 12,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> '</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">10000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">'</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> sql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> >>> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">bye~</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># (2)检查结果</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> mysql</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076"> -uroot</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076"> -p</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> conn</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">Reading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> table</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> information</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> completion</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> table</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> column</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> names</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">You</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> can</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> turn</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> off</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> feature</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> quicker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> startup</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> with</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076"> -A</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">Database</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> changed</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> tables</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">+----------------+</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> Tables_in_conn</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">+----------------+</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> test_table</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">     |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">+----------------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> row</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> set</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> (0.00 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">mysql</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">> </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">select</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> test_table</span><span style="--shiki-light:#999999;--shiki-dark:#666666">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">+----+-------+-----+----------+</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> id</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> name</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">  |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> age</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> telphone</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">+----+-------+-----+----------+</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">  1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> limou</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">  12</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> 10000</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676">    |</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">+----+-------+-----+----------+</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> row</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> set</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE"> (0.00 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D">sec</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE">)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>增删改都不难，但是如果查的结果？实际上就是存储在链接数据库时返回的指针变量中的成员。</p>
<p>另外，还有一些关于事务的接口，这里不再细谈。</p>
<h1 id="_3-图形化界面" tabindex="-1"><a class="header-anchor" href="#_3-图形化界面"><span>3.图形化界面</span></a></h1>
<p>还推荐使用一些图形化界面来操作数据库...</p>
<ul>
<li><strong>phpMyAdmin</strong>：好用，但是安装有点麻烦</li>
<li><strong>Navicat</strong>：客户端体验不错，推荐，但是收费</li>
<li><strong>SQLyong</strong>：体验也不错，推荐，但是收费</li>
<li><strong>MySQL Workbench</strong>：官方推荐，但是体验可能一般，但是免费，可以先下载用一用，<a href="https://dev.mysql.com/downloads/" target="_blank" rel="noopener noreferrer">下载地址</a></li>
</ul>
<figure><img src="@source/4.业务服务/2.存储服务/assets/image-20240308084612016.png" alt="image-20240308084612016" tabindex="0" loading="lazy"><figcaption>image-20240308084612016</figcaption></figure>
<p>图形界面实际上也是客户端。</p>
<p>一般云服务器的 <code v-pre>MySQL</code> 端口号不会暴露出来，基本都是在内网中开发，一般数据库会和其他服务器单独隔离开，单独购买一个机器。</p>
<p>但是由于条件受限，您可以在不重要的云服务器中暴露端口号，方便测试使用。</p>
<figure><img src="@source/4.业务服务/2.存储服务/assets/image-20240308091028523.png" alt="image-20240308091028523" tabindex="0" loading="lazy"><figcaption>image-20240308091028523</figcaption></figure>
</div></template>


