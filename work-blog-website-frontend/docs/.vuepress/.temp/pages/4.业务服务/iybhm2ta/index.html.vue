<template><div><h2 id="_1-初始操作" tabindex="-1"><a class="header-anchor" href="#_1-初始操作"><span>1.初始操作</span></a></h2>
<p>购买标准的 <code v-pre>Ubuntu22.04</code> 轻量级云服务器，并且规定只使用 <code v-pre>root</code>，这里我们直接在控制台中执行，一般来说一个 <code v-pre>4核8G</code> 的服务器足够一个项目持续运行了，如果没有人访问就可以作为多个项目的测试环境。</p>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 检查磁盘大小</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">df</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076"> -h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 开机自动启动 ssh 服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> ssh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 手动启动一次 ssh 服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> ssh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 永久修改主机名（重启不失效）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> hostnamectl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> set-hostname</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> edtechhub</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 更新软件源</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 更新软件（无弹窗）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> DEBIAN_FRONTEND=noninteractive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> upgrade</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076"> -y</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-基础软件" tabindex="-1"><a class="header-anchor" href="#_2-基础软件"><span>2.基础软件</span></a></h2>
<p>首先安装一些基础软件，然后再推荐安装 <a href="https://www.x-cmd.com/" target="_blank" rel="noopener noreferrer">x-cmd</a> 系列工具包（包含各种工具）。</p>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 安装常用软件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> curl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> ufw</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 安装 x-cmd 请查阅 https://cn.x-cmd.com/start/#%E4%BD%BF%E7%94%A8-posix-shell-%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965">eval</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#999999;--shiki-dark:#666666">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">curl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> https://get.x-cmd.com</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-配置主机" tabindex="-1"><a class="header-anchor" href="#_3-配置主机"><span>3.配置主机</span></a></h2>
<h3 id="_3-1-配置端口" tabindex="-1"><a class="header-anchor" href="#_3-1-配置端口"><span>3.1.配置端口</span></a></h3>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 28804</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 运维服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 443</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 网关服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 40031</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 编码服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 8848</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 9848</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 配置服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 3306</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 5432</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 33060</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 存储服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 6379</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 缓存服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 8082</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 23333</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 调度服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 8080</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 9876</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 10909</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 10911</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 10912</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 队列服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 7091</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 8091</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 事务服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91"> 9200</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 搜索服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> 8001:8010/tcp</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> 8001:8010/udp</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 后端服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> 3001:3010/tcp</span><span style="--shiki-light:#999999;--shiki-dark:#666666"> &#x26;&#x26;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665"> ufw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> allow</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> 3001:3010/udp</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"> # 前端服务</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important">
<p class="hint-container-title">重要</p>
<p>补充：同时需要同步设置服务器控制台和运维服务的端口。</p>
</div>
<h3 id="_3-2-配置域名" tabindex="-1"><a class="header-anchor" href="#_3-2-配置域名"><span>3.2.配置域名</span></a></h3>
<p>购买一个专属的域名（本人的域名是 <code v-pre>edtechhub.com.cn</code>），可以使用这个域名来进行远程登陆和项目部署。</p>
<h2 id="_4-服务部署" tabindex="-1"><a class="header-anchor" href="#_4-服务部署"><span>4.服务部署</span></a></h2>
<h3 id="_4-1-基础服务" tabindex="-1"><a class="header-anchor" href="#_4-1-基础服务"><span>4.1.基础服务</span></a></h3>
<p>先安装 <a href="https://1panel.cn/" target="_blank" rel="noopener noreferrer">1panel</a>，这个安装脚本会安装一个运维面板（端口选择 <code v-pre>28804</code>），同时自动安装 <code v-pre>Docker</code> 且配置加速。</p>
<div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code" v-pre=""><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD"># 安装 1panel 请查阅 https://1panel.cn/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665">bash</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076"> -c</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77"> "</span><span style="--shiki-light:#999999;--shiki-dark:#666666">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665">curl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076"> -sSL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D"> https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh</span><span style="--shiki-light:#999999;--shiki-dark:#666666">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77">"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后通过访问面板来完成我们的所有基础服务的部署操作...</p>
<h3 id="_4-2-业务服务" tabindex="-1"><a class="header-anchor" href="#_4-2-业务服务"><span>4.2.业务服务</span></a></h3>
</div></template>


