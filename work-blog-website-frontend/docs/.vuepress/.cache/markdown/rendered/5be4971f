{"content":"<h1 id=\"_1-nginx\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-nginx\"><span>1.Nginx</span></a></h1>\n<p><code v-pre>Nginx</code> 是一款自由、开源、高性能的 <code v-pre>HTTP</code> 服务器和反向代理服务器（正向代理代理客户端，反向代理代理服务端）。同时也是 一个 <code v-pre>IMAP, POP3, SMTP</code> 代理服务器。<code v-pre>Nginx</code> 可以作为一个 <code v-pre>HTTP</code> 服务器进行网站 的发布处理，也可以作为反向代理进行负载均衡的实现，这里展示关于 <code v-pre>Ubuntu</code> 下 <code v-pre>Nginx</code> 的使用。</p>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>注意：下列部分指令可能需要使用 <code v-pre>sudo</code> 权限，建议您全程带上 <code v-pre>sudo</code> 提升权限。</p>\n</div>\n<h2 id=\"_1-1-nginx-的安装启动\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-nginx-的安装启动\"><span>1.1.Nginx 的安装启动</span></a></h2>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装和启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 修改配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        listen</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 80</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default_server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 修改为自己服务器上开放的端口号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        listen</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [::]:80 default_server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        server_name</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 填您自己服务器的</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ip</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 地址</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 修改自己服务器的 ip 地址</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        root</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/share/nginx/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 填写需要交给 nginx 托管的文件根目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        index</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.htm</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.nginx-debian.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        location</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">                try_files</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $uri</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $uri</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">404</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">root@alyubuntu cpu: 6.5% mem: 21.45% - </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">~</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> $ sudo systemctl status nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">●</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx.service</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Loaded:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> loaded</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (/lib/systemd/system/nginx.service</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> enabled</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> vendor</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> preset:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> enabled</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Active:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> active</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (running) since Thu 2024-09-05 12:25:46 CST</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> 6s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ago</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">       Docs:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> man:nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    Process:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476705</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ExecStartPre=/usr/sbin/nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -q</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -g</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> daemon</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> master_process</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">code</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">exited,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> status</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    Process:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476706</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ExecStart=/usr/sbin/nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -g</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> daemon</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> master_process</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">code</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">exited,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> status</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0/SUCCESS</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">   Main</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PID:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476707</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      Tasks:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (limit: </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">4202</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Memory:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3.3M</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        CPU:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 22ms</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     CGroup:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /system.slice/nginx.service</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             ├─476707</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: master process /usr/sbin/nginx -g daemon on; master_process on;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             ├─476708</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: worker process</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             └─476709</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: worker process</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 05</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 12:25:46</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> alyubuntu</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemd[1]:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Starting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 05</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 12:25:46</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> alyubuntu</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemd[1]:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后就可以在浏览器中直接访问您的服务器。</p>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905134123295.png\" alt=\"image-20240905134123295.png\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905134123295.png</figcaption></figure>\n<h2 id=\"_1-2-nginx-的相关查看\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-nginx-的相关查看\"><span>1.2.Nginx 的相关查看</span></a></h2>\n<h3 id=\"_1-2-1-配置目录\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-配置目录\"><span>1.2.1.配置目录</span></a></h3>\n<p>上面我们简单配置了一个 <code v-pre>Nginx</code> 的配置文件，这里我们来深入学习这些配置语法，<a href=\"https://nginx.org/en/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">相关的资料可以在 Nginx 官方文档中寻找</a>，这里我们 <a href=\"https://nginx.org/en/docs/beginners_guide.html\" target=\"_blank\" rel=\"noopener noreferrer\">跟着 Nginx 的新手教程来学习语法</a> 即可。</p>\n<p><code v-pre>Nginx</code> 文档里写的非常清楚，<code v-pre>Nginx</code> 由一个主进程和多个工作进程构成，内部采用事件驱动模型，什么叫事件驱动？这里其实就是指使用了多路转接的 <code v-pre>IO</code> 处理机制，也就是 <code v-pre>epoll()</code> 等接口。</p>\n<p>知道大致的原理后，我们要添加配置或修改配置，应该知道配置文件的地址在哪里叭？</p>\n<p><code v-pre>Nginx</code> 及其模块的工作方式在配置文件中确定。默认情况下，配置文件名为 <code v-pre>nginx.conf</code> ，并放置在目录 <code v-pre>/usr/local/nginx/conf/</code> 或 <code v-pre>/etc/nginx/</code> 或 <code v-pre>/usr/local/etc/nginx/</code> 中。在我的 <code v-pre>Ubuntu20</code> 服务器中，这个目录就在 <code v-pre>/etc/nginx/</code> 下，我们就在这个目录下进行展开。</p>\n<ul>\n<li><code v-pre>/etc/nginx/sites-available/ (可用的服务)</code> 存放各个服务的配置文件</li>\n<li><code v-pre>/etc/nginx/sites-enabled/ (启用的服务)</code> 存放上一个目录中文件对应的符号链接</li>\n</ul>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 查看两个目录的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p><code v-pre>/etc/nginx/sites-available/default</code> 是 <code v-pre>Nginx</code> 服务器的配置文件目录中的一个默认配置文件，这个文件提供一个默认的服务器配置，当您第一次安装 <code v-pre>Nginx</code> 时，它通常会自动生成并作为示例或模板，我们刚刚配置的就是这个文件。</p>\n<p>为什么需要做一层链接隔离？主要是方便一些项目的快速启停部署，并且 <code v-pre>Nginx</code> 配置文件中有一个 <code v-pre>include</code> 指令，这个指令允许 <code v-pre>Nginx</code> 的配置文件进行模块化配置，将不同的虚拟主机放入同一个主 <code v-pre>Nging</code> 配置文件中进行统一管理（比如统一管理日志文件输出目录，除非个别主机做了个性化处理，因此 <code v-pre>Nginx</code> 其实也是有局部配置有限的概念的），在主配置文件中有以下这段代码。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 查看主配置文件中的 include 行的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">$ </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cat</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> nginx.conf | grep include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/modules-enabled/*.conf</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/mime.types</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里都是一些 MIME 类型的映射</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/conf.d/*.conf</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里是一些 Nginx 的其他一些被拆分的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/sites-enabled/*</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重点看这里, 包含了我们需要启动的软链接</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这样主配置就可以加载软连接对应的配置文件模块，部署多个服务。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：不过比较新版本的 <code v-pre>Nginx</code> 可以直接把配置文件放到 <code v-pre>/etc/nginx/conf.d/</code> 中，这样配置更加简单并且也方便，另外，这也是最通用方法，有的操作系统在不同版本下可能只有这一种设置方式。至于为什么会有两种配置，我找到 <a href=\"https://www.baeldung.com/linux/sites-available-sites-enabled-conf-d#header-318\" target=\"_blank\" rel=\"noopener noreferrer\">一篇不算特别官方的文章</a>，还有 <a href=\"https://www.sunzhongwei.com/nginx-configuration-file-to-put-more-good-which-directories-sites-availableenabled-and-conf-d?from=random\" target=\"_blank\" rel=\"noopener noreferrer\">另外一篇个人博文</a>，以及 <a href=\"https://serverfault.com/questions/527630/difference-in-sites-available-vs-sites-enabled-vs-conf-d-directories-nginx\" target=\"_blank\" rel=\"noopener noreferrer\">serverfault 上的讨论</a>，但是我觉得确实是有点道理的，有时间我看看文档验证一下。不过貌似最佳实践是使用 <code v-pre>/etc/nginx/conf.d/</code>，不过我觉得您两者都能理解是最好的。</p>\n</div>\n<h3 id=\"_1-2-2-日志目录\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-日志目录\"><span>1.2.2.日志目录</span></a></h3>\n<p>访问日志通常位于 <code v-pre>/var/log/nginx/access.log</code>，而错误日志通常位于 <code v-pre>/var/log/nginx/error.log</code>。</p>\n<h2 id=\"_1-3-nginx-的具体操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-3-nginx-的具体操作\"><span>1.3.Nginx 的具体操作</span></a></h2>\n<p>要启动 <code v-pre>Nginx</code>，请运行 <code v-pre>nginx</code> 可执行文件，也就是 <code v-pre>nginx</code> 这个指令（不过上面我们使用的是 <code v-pre>systemd</code> 来进行托管的）。一旦 <code v-pre>nginx</code> 启动，可以通过调用带有 <code v-pre>-s</code> 参数的可执行文件来控制它。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Nginx 的内部指令</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">signa</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 信号可以是以下之一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 直接使用 nginx 什么都不带就按默认配置进行启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># stop — 快速关闭</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># quit — 优雅关闭</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># reload — 重新加载配置文件, 这个过程中主进程会启动新的工作进程, 并向旧的工作进程发送消息, 请求它们关闭。否则主进程会回滚更改, 并继续使用旧的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># reopen — 重新打开日志文件</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：还有一个常用指令就是 <code v-pre>sudo nginx -t</code> 可以检查配置文件是否存在语法问题，这个后面会用到。</p>\n</div>\n<h2 id=\"_1-4-nginx-的配置结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-nginx-的配置结构\"><span>1.4.Nginx 的配置结构</span></a></h2>\n<p><code v-pre>Nginx</code> 配置文件由模块组成，这些模块由配置文件中指定的指令来控制。指令又分为简单指令和块指令。</p>\n<ul>\n<li>简单指令由名称和用空格分隔的参数组成，并以分号 <code v-pre>;</code> 作为结束</li>\n<li>块指令的结构则以一组大括号 <code v-pre>{</code> 和 <code v-pre>}</code> 包围作为结束。如果块指令可以在大括号内包含其他指令，则可以被称为上下文</li>\n</ul>\n<p>而在 <code v-pre>Nginx</code> 中，在 <code v-pre>#</code> 符号之后的其余部分被视为注释。</p>\n<h2 id=\"_1-5-nginx-的主要用途\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-nginx-的主要用途\"><span>1.5.Nginx 的主要用途</span></a></h2>\n<h3 id=\"_1-5-1-nginx-的静态网站部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-1-nginx-的静态网站部署\"><span>1.5.1.Nginx 的静态网站部署</span></a></h3>\n<p>一个重要的 <code v-pre>web</code> 服务器任务是提供文件（例如图像或静态 <code v-pre>HTML</code> 页面）。您将实现一个示例，根据请求，从不同的本地目录提供文件 <code v-pre>/data/www</code> （<code v-pre>HTML</code> 文件）和 <code v-pre>/data/images</code> （包含图像）。这将需要编辑配置文件，并在 <code v-pre>http</code> 块内设置一个服务器块，包含两个目录地址。</p>\n<p>首先，创建 <code v-pre>~/data/www</code> 目录并将一个 <code v-pre>index.html</code> 文件放入其中，文件内容可以是任意文本，然后创建 <code v-pre>~/data/images</code> 目录并在其中放置一些图片。</p>\n<div class=\"language-html line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"html\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-html\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">&#x3C;!-- index.html --></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;!</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">DOCTYPE</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">html</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> lang</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">en</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">head</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">meta</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">UTF-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">meta</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> name</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">viewport</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> content</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">width=device-width, initial-scale=1.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">title</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Test Page</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">title</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">style</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            font-family</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> Arial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> sans-serif</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            background-color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">f4f4f4</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            text-align</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> center</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            padding</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 50</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">333</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">666</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        .</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">container</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            background-color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> white</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            padding</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 20</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            border-radius</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            box-shadow</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> rgba</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0.1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            display</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> inline-block</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">style</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">head</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> class</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">container</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Welcome to Nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">This is a simple test page to verify that Nginx is working correctly.</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">If you are seeing this page, your server is configured correctly!</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>图片就放两张图片，分别命名为 <code v-pre>image1.jpg</code> 和 <code v-pre>image2.jpg</code> 再上传到服务器中。</p>\n<p>接下来，打开配置文件，默认配置文件已经包含了几个 <code v-pre>server</code> 块的示例，大多数是被注释掉的。现在将所有这些块注释掉，并开始一个新的 <code v-pre>server</code> 块。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>通常配置文件可能包含几个由监听端口和服务器名称区分的 <code v-pre>server</code> 块（<code v-pre>server</code> 块可以看作是一台虚拟服务器主机），将以下 <code v-pre>location</code> 块添加到 <code v-pre>server</code> 块中。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 html 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 / 开头的请求都被映射到 ~/data/www/ 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 image 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /images/ </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 /images 开头的请求都被映射到 ~/data/images 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>官网是这么直接进行配置，但是这个配置太过于简单，我们加一点料：</p>\n<ul>\n<li>修改默认绑定的 <code v-pre>ip</code> 和默认指定的 <code v-pre>port</code></li>\n<li>修改不同错误码对应的响应网页</li>\n<li>指定日志输出位置</li>\n</ul>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 绑定的 ip 和 port</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    listen </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您的开放port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    server_name </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您的公网ip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里甚至可以配置域名(但是必须经过 DNS 解析)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 html 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 / 开头的请求都被映射到 ~/data/www/ 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 image 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /images/ </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 /images 开头的请求都被映射到 ~/data/images 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 错误页面的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_page </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">404</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> /home/用户名/data/www/404.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_page </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">500</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 502</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 503</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 504</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> /home/用户名/data/www/50x.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 这里的 location = 表示精准匹配    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"--shiki-light:#AB5E3F;--shiki-dark:#C4704F\"> /404.html </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        internal</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 设置 internal 可以确保上述路由只供 nginx 内部使用, 不会被用户直接访问(内部发生错误时才允许这些页面被用户看到)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 这里的 location = 表示精准匹配    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"--shiki-light:#AB5E3F;--shiki-dark:#C4704F\"> /50x.html </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        internal</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 设置 internal 可以确保上述路由只供 nginx 内部使用, 不会被用户直接访问(内部发生错误时才允许这些页面被用户看到)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置访问日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    access_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www/access.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置错误日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www/error.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后我们根据上述的文件模板，生成两份实际的配置文件，注意是两份，我希望教您配置一个 <code v-pre>Nginx</code> 部署多个服务（注意两个文件内的路径都需要填写具体的用户名，并且设置不同的端口，<code v-pre>ip</code> 可以填写为 <code v-pre>_</code> 表示允许任意人访问）。这两个文件 <code v-pre>test1.conf</code> 和 <code v-pre>test2.conf</code> 就配置到我们之前说的配置目录 <code v-pre>sites-available</code> 下吧，并且在 <code v-pre>sites-enabled</code> 中做个软连接。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始部署多个虚拟主机</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 根据上述模板配置两个配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建符号链接</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查上述的创建结果</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查服务器上是否有对应的实际资源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/您的用户名/data/www</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">image1.jpg</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  image2.jpg</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  index.html</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保 Nginx 有权限访问该目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> chmod</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 744</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/data/www/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 修改启动用户, Nginx 默认的启动用户是 www-data, 这里修改配置为 root 比较简单点(理论上也可以直接使用该用户来启动 Nginx 的配置, 我没有试过, 您可以尝试一下, 毕竟这是一个 Nginx 下载的时候自动配置的账号)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> head</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -n</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># user www-data; # 注释掉这个用户</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 更换启动用户为 root</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查配置文件是否存在语法错误</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> syntax</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ok</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> successful</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件中定义的日志文件无需创建, Nginx 会自动帮您创建好</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 重新启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> restart</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后再使用浏览器进行查看，看看我们简单部署的 <code v-pre>index.html</code> 以及两张图片是否可以被访问。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果您是 <code v-pre>Centos</code> 一类的系统，并且查看错误日志出现权限问题，有可能是关于 <code v-pre>SELinux </code> 的问题，您可以 <a href=\"https://stackoverflow.com/questions/31729212/nginx-root-index-html-forbidden-13-permission-denied\" target=\"_blank\" rel=\"noopener noreferrer\">前往 stackoverflow 查看大家的讨论解决这个问题</a>。若以上的解法均不可，则可以 <a href=\"https://blog.csdn.net/onlysunnyboy/article/details/75270533\" target=\"_blank\" rel=\"noopener noreferrer\">考虑看这一篇 csdn 博客的四种解法来解决</a>（我这里使用的就是里面的第一种解法）。</p>\n</div>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905204226096.png\" alt=\"image-20240905204226096\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905204226096</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905204258689.png\" alt=\"image-20240905204258689\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905204258689</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905205206492.png\" alt=\"image-20240905205206492\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905205206492</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905205251586.png\" alt=\"image-20240905205251586\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905205251586</figcaption></figure>\n<div class=\"hint-container note\">\n<p class=\"hint-container-title\">注</p>\n<p>吐槽：另外，如果您传递的 <code v-pre>.jpg</code> 文件比较大，并且再仔细一点，就可以很明显看到一个现象，先请求的照片要优先被渲染，另外一张照片需要等待另外一张照片彻底渲染完毕后才可以进行渲染，我不太清楚这个是不是 <code v-pre>Nginx</code> 的多路转接造成的，以后再研究叭...</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果您用过某些镜像网站，则会遇到下面这种资源页面，我写了一个类似的配置文件供您参考。下面的配置文件，配置了一个叫做 <code v-pre>taidiyun</code> 的项目网站，是我给 <code v-pre>10.41.1.3</code> 服务器中的 <code v-pre>lpx</code> 用户进行配置的。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置资源静态网站, 并且配置一些 ip 屏蔽的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> listen </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">8010</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> server_name </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10.41.1.3</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> autoindex on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 启用目录列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> allow </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10.41.128.57</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 添加允许的 IP 10.41.128.57</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> deny </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">10.0.0.0/8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 屏蔽 10 开头的 IP 段(deny all 则可以屏蔽所有其他访问)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> charset </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">utf-8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 保持终端字符集和这里一样即可(避免浏览器放回乱码)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 配置 html 静态目录, 使用 \"/\" 或者 \"/taidiyun\" 都可以访问静态资源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">     root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/taidiyun</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /taidiyun </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">     root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重定向日志文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> access_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/access.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> error_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/error.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这是一个最小示例，很多资源网站都是这么做的。</p>\n</div>\n<h3 id=\"_1-5-2-nginx-的代理服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-2-nginx-的代理服务部署\"><span>1.5.2.Nginx 的代理服务部署</span></a></h3>\n<p>只是配置静态网站的话，那么 <code v-pre>Nginx</code> 就会显得比较普通，实际上成为反向代理服务器才是 <code v-pre>Nginx</code> 最为出名的地方。这意味着客户端程序将请求先传递给被代理的服务器程序 <code v-pre>Nginx</code>，然后由代理服务器程序 <code v-pre>Nginx</code> 转交给真正的服务器程序，<code v-pre>Nginx</code> 从中获取响应后转发给客户端程序。</p>\n<p>直接另起一个配置文件，把 <code v-pre>Nginx</code> 代理服务器的配置放入其中，我还特意准备了两台实际的服务器来做测试，一台是 <code v-pre>Ubuntu20(代理服务器)</code>，另外一台是 <code v-pre>Centos7(实际服务器)</code>。</p>\n<p>从之前的经验来看，我们使用类似方式编写配置文件，并且将配置文件和对应软连接放到之前提到德两个目录中即可。不过由于我们是做代理服务器，因此还会添加一些还没怎么提及过的指令，这些指令会在注释中提及。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># proxy_server.conf(代理服务器)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    listen </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">8086</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    server_name </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您代理服务器自己的公网ip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://实际服务器ip:8087/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # proxy_pass 其实就是把请求转发给别的服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /test1 </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://127.0.0.1:8088/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 代理之前配置的静态项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /test2 </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://127.0.0.1:8089/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 代理之前配置的静态项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">} </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 整个配置文件相对于代理了三台服务器, 不过实际只是代理了一个远端服务器, 另外两个都是本地的</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>而我们的实际服务器采用 <code v-pre>Node.js</code> 来进行编写，这样编写的成本比较低，为了减少您的安装环境，您只需要使用 <code v-pre>sudo yum install node</code> 即可，然后使用 <code v-pre>node server.js</code> 即可运行实际服务器代码。</p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-js\"><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> http</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> require</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">http</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> proxyIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">填写您的代理服务器ip</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 允许的代理服务器 IP 地址</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> host</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0.0.0.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 监听所有网络接口</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8087</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> http</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">createServer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">req</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> clientIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> req</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">connection</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">remoteAddress</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">clientIp</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> !==</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> proxyIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 如果请求的 ip 不是代理服务器就拒绝请求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">        res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">writeHead</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">403</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/plain</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">        res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">end</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Forbidden</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">writeHead</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">200</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/plain</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">end</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">listen</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> host</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">`</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server running at http://</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">host</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">port</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">`</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">error</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server error:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>好了，该有的都有了，打开两个服务器开始进行配置，先配置代理服务器叭~</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 代理服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/proxy_server.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/etc/nginx/sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy_server.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/etc/nginx/sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy_server.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保 Nginx 有权限访问该目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> chmod</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 744</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/data/www/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确认启动用户为 root 而不是 Nginx 默认的启动用户 www-data</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> head</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -n</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># user www-data; # 注释掉这个用户</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 更换启动用户为 root</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查配置文件是否存在语法错误</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> syntax</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ok</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> successful</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件中定义的日志文件无需创建, Nginx 会自动帮您创建好</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 重新启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> restart</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 实际服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Centos7 的防火墙不是使用 ufw, 这里我给您留一个快速指引, 避免您去查阅某些文档的时间 hhhh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> status</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewalld</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 检查防火墙状态</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewalld</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 如果防火墙没有运行就启动起来</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --permanent</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --add-port=8087/tcp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 允许开放端口 8087</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --reload</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重新加载防火墙规则</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --list-ports</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 验证端口是否开放</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 启动服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.js</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> node</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.js</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> running</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> at</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> http://0.0.0.0:8087/</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>可以看到，之前我们配置的项目也可以被正确访问（因为地址和之前不一样了），而且通过访问代理服务器得到了实际服务器的响应，并且其他机器是无法直接访问实际服务器的，我们的设置使得这种行为会返回 <code v-pre>403</code>，也就是 <code v-pre>禁止访问(Forbidden)</code> 的意思。</p>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240906231529750.png\" alt=\"image-20240906231529750\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240906231529750</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240906231727500.png\" alt=\"image-20240906231727500\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240906231727500</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240907001859922.png\" alt=\"image-20240907001859922\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240907001859922</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240907004533046.png\" alt=\"image-20240907004533046\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240907004533046</figcaption></figure>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：<code v-pre>CGI(Common Gateway Interface, 通用网关接口)</code> 属于是一种比较老旧的技术设计了，<code v-pre>Fast-CGI</code> 是前者的改进，不过我暂时还没有体会到这种架构的好处，您可以简单看下下面文章临时了解以下，或者看看 <code v-pre>Nginx</code> 的官方文档，详细请看 <a href=\"https://blog.csdn.net/bigfaceCatzzZ/article/details/104660718\" target=\"_blank\" rel=\"noopener noreferrer\">新手教程中最后一节</a>。</p>\n</div>\n<h2 id=\"_1-6-nginx-的深入内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-nginx-的深入内容\"><span>1.6.Nginx 的深入内容</span></a></h2>\n<p>好了，您一定大概了解到了 <code v-pre>Nginx</code> 的基本使用了，如果您希望再精进一步，可以 <a href=\"https://docs.nginx.com/nginx/admin-guide/\" target=\"_blank\" rel=\"noopener noreferrer\">尝试阅读 Nginx 的管理员指南文档</a> 获取更多的知识，待补充...</p>\n<h3 id=\"_1-6-1-配置访问密码\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-1-配置访问密码\"><span>1.6.1.配置访问密码</span></a></h3>\n<p>https://blog.csdn.net/i12344/article/details/138459705</p>\n<h1 id=\"_2-caddy\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-caddy\"><span>2.Caddy</span></a></h1>\n<p><code v-pre>Caddy</code> 采用 <code v-pre>Go</code> 语言编写，简洁高效的配置过程让其具备和 <code v-pre>Nginx</code> 竞争的能力。</p>\n<h2 id=\"_1-1-caddy-的安装启动\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-caddy-的安装启动\"><span>1.1.Caddy 的安装启动</span></a></h2>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装和启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> debian-keyring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> debian-archive-keyring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt-transport-https</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -1sLf</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">https://dl.cloudsmith.io/public/caddy/stable/gpg.key</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> gpg</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --dearmor</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/share/keyrings/caddy-stable-archive-keyring.gpg</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -1sLf</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tee</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/apt/sources.list.d/caddy-stable.list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> update</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>可以快速使用一下，然后我们快速使用 <code v-pre>caddy start</code> 启动一下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.480</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    maxprocs:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Leaving</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GOMAXPROCS=16:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CPU</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> quota</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> undefined</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.480</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    GOMEMLIMIT</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> updated</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">package</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">github.com/KimMachineGun/automemlimit/memlimit</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">GOMEMLIMIT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 45312521011,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">previous</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9223372036854775807</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.481</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> endpoint</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">enforce_origin</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">origins</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//[::1]:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//127.0.0.1:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.481</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    serving</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> initial</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Successfully</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddy</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (pid=1299405) - Caddy is running in the background</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这里给出了一个可以和 <code v-pre>caddy</code> 服务通信的地址 <code v-pre>http://127.0.0.1:2019</code>，利用这个地址就可以传递 <code v-pre>json</code> 配置，配置一个服务。下面的两种配置方式是等价的，您可以尝试一下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> localhost:2019/load</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">    -H</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type: application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">    -d</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> @-</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> EOF</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        \"apps\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">            \"http\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                \"servers\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                    \"hello\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        \"listen\": [\":2015\"],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        \"routes\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                            {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                \"handle\": [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                    \"handler\": \"static_response\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                    \"body\": \"Hello, world!\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">EOF</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>等价于下面的配置方式。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> localhost:2019/load</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">  -H</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type: application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">  -d</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> @caddy.json</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-json line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"json\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-json\"><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">apps</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">        \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">http</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">servers</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">hello</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>执行后响应结果如下：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.154</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin.api</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       received</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> request</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">method</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">POST</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">host</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">uri</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/load</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">remote_ip</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">127.0.0.1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">remote_port</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">53892</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">headers</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">*/*</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">530</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">User-Agent</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">curl/8.5.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> endpoint</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">enforce_origin</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">origins</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//[::1]:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//127.0.0.1:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls.cache.maintenance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> background</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> certificate</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> maintenance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">      {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cache</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0xc000695900</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    HTTP/2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> because</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> it</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> requires</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TLS</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">network</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">tcp</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">addr</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    HTTP/3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> because</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> it</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> requires</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TLS</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">network</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">tcp</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">addr</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http.log</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> running</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">name</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">hello</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">protocols</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h2</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    autosaved</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> config</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (load </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">with</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --resume</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> flag</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)      </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"file\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/home/ljp/.config/caddy/autosave.json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin.api</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       load</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.156</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   stopped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> previous</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.163</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">     cleaning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> storage</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> unit</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">storage</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">FileStorage:/home/ljp/.local/share/caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.164</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">     finished</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cleaning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> storage</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> units</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后命令行终端就可以使用 <code v-pre>curl localhost:2015</code> 获取到 <code v-pre>Hello, world!</code> 的响应文本。使用 <code v-pre>caddy stop</code> 就可以把 <code v-pre>caddy</code> 服务和 <code v-pre>json</code> 中部署的服务停掉。</p>\n<p>另外还支持使用 <code v-pre>Caddyfile</code> 再结合 <code v-pre>CLI</code> 指令来进行部署，在当前目录下写入下面的文件后再使用 <code v-pre>caddy start</code> 就会自动找到这歌服务进行部署。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">:2015</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果想要取消服务就需要删除这个文件并且使用 <code v-pre>caddy stop</code>。</p>\n<p>这两种方式我们后面还会详细介绍，不过您最好选择其中一种方式来进行学习，我个人更加推荐使用 <code v-pre>Caddyfile</code> 文件，因为简单易学。</p>\n<h2 id=\"_1-2-caddy-的相关查看\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-caddy-的相关查看\"><span>1.2.Caddy 的相关查看</span></a></h2>\n<h3 id=\"_1-2-1-配置内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-配置内容\"><span>1.2.1.配置内容</span></a></h3>\n<p>实际上我们不再需要精确知道配置文件在何处，我们想要查看目前的配置，可以使用 <code v-pre>curl localhost:2019/config/</code> 来查看，不仅可以看到我们的 <code v-pre>Caddy</code> 配置，还可以看到其他的 <code v-pre>json</code> 服务配置。</p>\n<h3 id=\"_1-2-2-日志内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-日志内容\"><span>1.2.2.日志内容</span></a></h3>\n<p>如果是使用 <code v-pre>caddy run</code> 的方式就可以实时在终端界面上查看配访问记录，当然我们的要求不止如此，在使用 <code v-pre>caddy start</code> 的时候是以守护进程的方式来运行服务的，这种情况下需要阅读日志可以修改配置文件，这个后面提及。</p>\n<h2 id=\"_1-3-caddy-的具体操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-3-caddy-的具体操作\"><span>1.3.Caddy 的具体操作</span></a></h2>\n<p>您可以按照以下文档顺序进行阅读：</p>\n<ul>\n<li><a href=\"https://caddyserver.com/docs/quick-starts\" target=\"_blank\" rel=\"noopener noreferrer\">快速入门</a></li>\n<li><a href=\"https://caddyserver.com/docs/getting-started\" target=\"_blank\" rel=\"noopener noreferrer\">基础知识</a></li>\n<li><a href=\"https://caddyserver.com/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">全部文档</a></li>\n</ul>\n<p>不过最核心的就是 <code v-pre>cli</code> 和 <code v-pre>api</code> 的文档：</p>\n<ul>\n<li>\n<p><code v-pre>Caddy</code> 提供了命令行工具 <a href=\"https://caddyserver.com/docs/caddyfile-tutorial\" target=\"_blank\" rel=\"noopener noreferrer\">caddy cli</a>：</p>\n<ul>\n<li><code v-pre>caddy start</code>：启动 <code v-pre>Caddy</code> 服务，以守护进程来启动</li>\n<li><code v-pre>caddy adapt</code>：检测当前目录下的 <code v-pre>Caddyfile</code> 文件且转化为 <code v-pre>json</code> 后输出，可以搭配 <code v-pre>jq</code> 进行使用（但不自动部署），同时还会检查配置文件是否有语法错误</li>\n<li><code v-pre>caddy run</code>：临时 <code v-pre>Caddy</code> 服务（在测试过程使用可以使用 <code v-pre>--watch</code> 监测 <code v-pre>Caddyfile</code> 配置文件的改动）</li>\n<li><code v-pre>caddy stop</code>：停止 <code v-pre>Caddy</code> 服务（同时去除之前配置的服务）</li>\n<li><code v-pre>caddy reload</code>：重载 <code v-pre>Caddy</code> 服务（因此可以使用 <code v-pre>Caddyfile</code> 持久化多个服务）</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>Caddy</code> 提供了管理接口 <a href=\"https://caddyserver.com/docs/api-tutorial\" target=\"_blank\" rel=\"noopener noreferrer\">caddy api</a>：</p>\n<ul>\n<li><code v-pre>localhost:2019/config</code>：以 <code v-pre>json</code> 形式输出 <code v-pre>Caddy</code> 服务当前的状态</li>\n<li><code v-pre>localhost:2019/load</code>：加载/更新 <code v-pre>json</code> 中配置的多个服务</li>\n<li><code v-pre>localhost:2019/config/apps/http/servers/&lt;服务名称&gt;/routes/&lt;数组下标&gt;/handle/&lt;数组下标&gt;/需要修改的字段</code>：修改部分的 <code v-pre>json</code> 配置，避免多个服务被修改（利用 <code v-pre>&quot;@id&quot;</code> 的 <code v-pre>json</code> 字段可以使用更短的路径来进行高效的修改）</li>\n</ul>\n</li>\n</ul>\n<div class=\"hint-container caution\">\n<p class=\"hint-container-title\">警告</p>\n<p>警告：使用 <code v-pre>caddy start</code> 的本质和使用 <code v-pre>systemctl start caddy.service</code> 是一样的，因此不能两者一起使用。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果加载新配置时出现任何错误，<code v-pre>Caddy</code> 将回滚到上一个正常工作的配置。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：使用 <code v-pre>jq</code> 指令可以优化对 <code v-pre>json</code> 的美观输出。</p>\n</div>\n<h2 id=\"_1-4-caddy-的配置结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-caddy-的配置结构\"><span>1.4.Caddy 的配置结构</span></a></h2>\n<h4 id=\"_1-4-1-json-文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-1-json-文件\"><span>1.4.1.JSON 文件</span></a></h4>\n<p><code v-pre>Caddy</code> 支持使用 <code v-pre>JSON</code> 文件来搭建服务。</p>\n<div class=\"language-json line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"json\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-json\"><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">apps</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">        \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">http</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">servers</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">&#x3C;服务名1></span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">&#x3C;域名1>:&#x3C;端口号1></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">&#x3C;服务名2></span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">&#x3C;域名2>:&#x3C;端口号2></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Goodbye, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-4-2-caddyfile-文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-2-caddyfile-文件\"><span>1.4.2.Caddyfile 文件</span></a></h4>\n<p><code v-pre>Caddy</code> 支持使用 <code v-pre>Caddyfile</code> 文件来搭建服务（我们最主要还是使用这种方式）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">域名</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">1></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">端口号</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">1></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">域名</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">2></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">端口号</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">2></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Goodbye, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果提示您的格式不规范，可以使用 <code v-pre>caddy fmt --overwrite</code> 自动规范文件。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：允许您使用 <code v-pre>#</code> 开头的文本行作为 <code v-pre>Caddyfile</code> 中的注释。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果使用了域名部署并且需要使用 <code v-pre>443</code> 这种敏感端口，就需要使用 <code v-pre>sudo</code> 来提高权限。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：<code v-pre>Caddyfile</code> 支持在解析之前读取外部的环境变量。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> export</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> SITE_ADDRESS=localhost:9055</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><p>而下面的 <code v-pre>Caddyfile</code> 就会从：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{$SITE_ADDRESS}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>被解析为：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost:9055</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></div>\n<h2 id=\"_1-5-caddy-的主要用途\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-caddy-的主要用途\"><span>1.5.Caddy 的主要用途</span></a></h2>\n<h3 id=\"_1-5-1-caddy-的静态网站部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-1-caddy-的静态网站部署\"><span>1.5.1.Caddy 的静态网站部署</span></a></h3>\n<p>使用 <code v-pre>Caddy</code> 来部署一个可以查阅服务器文件的服务简直不要太容易，只需要做以下的配置（域名和端口您自己换）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> touch</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> README.md</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy.html</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tutorial</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">                Page</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> loaded</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> at:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {{now | date \"Mon Jan 2 15:04:05 MST 2006\"}}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    encode</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持压缩传输</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    templates</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持模板语法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> browse</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持文件阅览</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --watch</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 注意一定要加上 sudo, 因为我们直接使用 localhost 相当于使用域名, 因此需要使用 443 这种端口, 需要提高权限才可以使用</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>访问 <code v-pre>https://localhost</code> 即可得到下面界面，点击文件就可以切换带有模板语法的 <code v-pre>html</code> 文件。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果不希望启用 <code v-pre>https</code>，可以使用 <code v-pre>tls off</code> 来关闭。</p>\n</div>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g.jpg\" alt=\"img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g\" tabindex=\"0\" loading=\"lazy\"><figcaption>img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg.jpg\" alt=\"img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg\" tabindex=\"0\" loading=\"lazy\"><figcaption>img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg</figcaption></figure>\n<p>不过我们还不止是需要这种效果，我们更加希望用户访问服务器根目录后能直接看到部署好的前端服务，此时就可以修改根目录。我们新增加一个 <code v-pre>dist</code> 文件，然后使用约定的 <code v-pre>index.html</code> 文件写入一些简单的内容（如果不是使用 <code v-pre>index.html</code> 需要您在使用 <code v-pre>curl</code> 时指定文件名称）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">root</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/index.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/index.html</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Caddyfile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  caddy.html</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  dist</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  README.md</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reload</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://localhost/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>前面我们说过日志文件的问题，这里也可以自己定义日志文件的去处，而不仅仅在命令行上查看。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  root</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  log</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      output</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/access.log</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      format</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> json</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 日志格式包含</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reload</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.434</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    using</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> adjacent</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.435</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    adapted</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> config</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> JSON</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">adapter</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.435</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    Caddyfile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> input</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> not</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> formatted</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> run</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddy fmt --overwrite</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> fix</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> inconsistencies</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">adapter</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">file</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">line</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://localhost/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/access.log</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 注意需要提高权限</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"level\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"info\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"ts\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">:1746200328.3812969,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"logger\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"http.log.access.log0\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"msg\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"handled request\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"request\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">{</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_port</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">39740</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">client_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">HTTP/2.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">method</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">GET</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">host</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">uri</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">User-Agent</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl/8.5.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"],\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Accept</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">*/*</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"]},\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">tls</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resumed</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":false,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">version</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":772,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cipher_suite</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":4865,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">h2</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"}},\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bytes_read</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":0,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user_id</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">duration</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":0.000096963,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">size</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":123,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">status</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":200,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resp_headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Last-Modified</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Fri,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> May</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2025</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:31:34</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GMT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Ranges</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">bytes</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">123</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Alt-Svc</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:443</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> ma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">2592000</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Vary</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Encoding</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Etag</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">d9ls796hiq8d3f</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$ sudo cat dist/access.log | jq # 或者用更加可见的方式</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">level</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">info</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">ts</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: 1746200328.3812969,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">logger</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">http.log.access.log0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">msg</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">handled</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> request</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">request</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_port</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">39740</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">client_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">HTTP/2.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">method</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">GET</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">host</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">uri</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">User-Agent</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl/8.5.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Accept</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">*/*</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">tls</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resumed</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": false,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">version</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 772,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cipher_suite</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 4865,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">h2</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bytes_read</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user_id</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">duration</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 0.000096963,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">size</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 123,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">status</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 200,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resp_headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Last-Modified</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Fri,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> May</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2025</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:31:34</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GMT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Ranges</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">bytes</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">123</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Alt-Svc</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:443</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> ma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">2592000</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Vary</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Encoding</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Etag</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">d9ls796hiq8d3f</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h3 id=\"_1-5-2-caddy-的代理服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-2-caddy-的代理服务部署\"><span>1.5.2.Caddy 的代理服务部署</span></a></h3>\n<p>做反向代理也是很快的，下面展示的两个例子就是基于匹配器的代理语法。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    reverse_proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 127.0.0.1:9005</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    reverse_proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /api/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 127.0.0.1:9005</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_1-6-caddy-的深入内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-caddy-的深入内容\"><span>1.6.Caddy 的深入内容</span></a></h2>\n<p>可以看出 <code v-pre>Caddy</code> 非常简洁，下面提供一些资料供您参考：</p>\n<ul>\n<li><a href=\"https://caddyserver.com/docs/command-line\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的命令操作</a></li>\n<li><a href=\"https://caddyserver.com/docs/api\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的管理接口</a></li>\n<li><a href=\"https://caddyserver.com/docs/architecture\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的原理解读</a></li>\n<li><a href=\"https://caddyserver.com/docs/extending-caddy\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的拓展开发</a></li>\n</ul>\n<p>官方文档非常易读，请仔细查阅...</p>\n","env":{"base":"/","filePath":"/home/ljp/git/work/work-blog-website/work-blog-website-frontend/docs/3.系统网络/1.基本操作/036_ljp_2024_09_05_伺服程序软件.md","filePathRelative":"3.系统网络/1.基本操作/036_ljp_2024_09_05_伺服程序软件.md","frontmatter":{"createTime":"2025/04/09 23:31:30","permalink":"/3.系统网络/n6jvjmt5/","title":"伺服程序软件"},"sfcBlocks":{"template":{"type":"template","content":"<template><h1 id=\"_1-nginx\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-nginx\"><span>1.Nginx</span></a></h1>\n<p><code v-pre>Nginx</code> 是一款自由、开源、高性能的 <code v-pre>HTTP</code> 服务器和反向代理服务器（正向代理代理客户端，反向代理代理服务端）。同时也是 一个 <code v-pre>IMAP, POP3, SMTP</code> 代理服务器。<code v-pre>Nginx</code> 可以作为一个 <code v-pre>HTTP</code> 服务器进行网站 的发布处理，也可以作为反向代理进行负载均衡的实现，这里展示关于 <code v-pre>Ubuntu</code> 下 <code v-pre>Nginx</code> 的使用。</p>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>注意：下列部分指令可能需要使用 <code v-pre>sudo</code> 权限，建议您全程带上 <code v-pre>sudo</code> 提升权限。</p>\n</div>\n<h2 id=\"_1-1-nginx-的安装启动\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-nginx-的安装启动\"><span>1.1.Nginx 的安装启动</span></a></h2>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装和启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 修改配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        listen</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 80</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default_server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 修改为自己服务器上开放的端口号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        listen</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [::]:80 default_server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        server_name</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 填您自己服务器的</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ip</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 地址</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 修改自己服务器的 ip 地址</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        root</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/share/nginx/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 填写需要交给 nginx 托管的文件根目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        index</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.htm</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.nginx-debian.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        location</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">                try_files</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $uri</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $uri</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">404</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">root@alyubuntu cpu: 6.5% mem: 21.45% - </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">~</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> $ sudo systemctl status nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">●</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx.service</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Loaded:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> loaded</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (/lib/systemd/system/nginx.service</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> enabled</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> vendor</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> preset:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> enabled</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Active:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> active</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (running) since Thu 2024-09-05 12:25:46 CST</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> 6s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ago</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">       Docs:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> man:nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    Process:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476705</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ExecStartPre=/usr/sbin/nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -q</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -g</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> daemon</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> master_process</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">code</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">exited,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> status</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    Process:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476706</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ExecStart=/usr/sbin/nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -g</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> daemon</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> master_process</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">code</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">exited,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> status</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0/SUCCESS</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">   Main</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PID:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476707</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      Tasks:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (limit: </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">4202</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Memory:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3.3M</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        CPU:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 22ms</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     CGroup:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /system.slice/nginx.service</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             ├─476707</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: master process /usr/sbin/nginx -g daemon on; master_process on;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             ├─476708</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: worker process</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             └─476709</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: worker process</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 05</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 12:25:46</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> alyubuntu</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemd[1]:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Starting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 05</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 12:25:46</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> alyubuntu</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemd[1]:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后就可以在浏览器中直接访问您的服务器。</p>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905134123295.png\" alt=\"image-20240905134123295.png\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905134123295.png</figcaption></figure>\n<h2 id=\"_1-2-nginx-的相关查看\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-nginx-的相关查看\"><span>1.2.Nginx 的相关查看</span></a></h2>\n<h3 id=\"_1-2-1-配置目录\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-配置目录\"><span>1.2.1.配置目录</span></a></h3>\n<p>上面我们简单配置了一个 <code v-pre>Nginx</code> 的配置文件，这里我们来深入学习这些配置语法，<a href=\"https://nginx.org/en/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">相关的资料可以在 Nginx 官方文档中寻找</a>，这里我们 <a href=\"https://nginx.org/en/docs/beginners_guide.html\" target=\"_blank\" rel=\"noopener noreferrer\">跟着 Nginx 的新手教程来学习语法</a> 即可。</p>\n<p><code v-pre>Nginx</code> 文档里写的非常清楚，<code v-pre>Nginx</code> 由一个主进程和多个工作进程构成，内部采用事件驱动模型，什么叫事件驱动？这里其实就是指使用了多路转接的 <code v-pre>IO</code> 处理机制，也就是 <code v-pre>epoll()</code> 等接口。</p>\n<p>知道大致的原理后，我们要添加配置或修改配置，应该知道配置文件的地址在哪里叭？</p>\n<p><code v-pre>Nginx</code> 及其模块的工作方式在配置文件中确定。默认情况下，配置文件名为 <code v-pre>nginx.conf</code> ，并放置在目录 <code v-pre>/usr/local/nginx/conf/</code> 或 <code v-pre>/etc/nginx/</code> 或 <code v-pre>/usr/local/etc/nginx/</code> 中。在我的 <code v-pre>Ubuntu20</code> 服务器中，这个目录就在 <code v-pre>/etc/nginx/</code> 下，我们就在这个目录下进行展开。</p>\n<ul>\n<li><code v-pre>/etc/nginx/sites-available/ (可用的服务)</code> 存放各个服务的配置文件</li>\n<li><code v-pre>/etc/nginx/sites-enabled/ (启用的服务)</code> 存放上一个目录中文件对应的符号链接</li>\n</ul>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 查看两个目录的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p><code v-pre>/etc/nginx/sites-available/default</code> 是 <code v-pre>Nginx</code> 服务器的配置文件目录中的一个默认配置文件，这个文件提供一个默认的服务器配置，当您第一次安装 <code v-pre>Nginx</code> 时，它通常会自动生成并作为示例或模板，我们刚刚配置的就是这个文件。</p>\n<p>为什么需要做一层链接隔离？主要是方便一些项目的快速启停部署，并且 <code v-pre>Nginx</code> 配置文件中有一个 <code v-pre>include</code> 指令，这个指令允许 <code v-pre>Nginx</code> 的配置文件进行模块化配置，将不同的虚拟主机放入同一个主 <code v-pre>Nging</code> 配置文件中进行统一管理（比如统一管理日志文件输出目录，除非个别主机做了个性化处理，因此 <code v-pre>Nginx</code> 其实也是有局部配置有限的概念的），在主配置文件中有以下这段代码。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 查看主配置文件中的 include 行的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">$ </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cat</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> nginx.conf | grep include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/modules-enabled/*.conf</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/mime.types</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里都是一些 MIME 类型的映射</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/conf.d/*.conf</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里是一些 Nginx 的其他一些被拆分的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/sites-enabled/*</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重点看这里, 包含了我们需要启动的软链接</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这样主配置就可以加载软连接对应的配置文件模块，部署多个服务。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：不过比较新版本的 <code v-pre>Nginx</code> 可以直接把配置文件放到 <code v-pre>/etc/nginx/conf.d/</code> 中，这样配置更加简单并且也方便，另外，这也是最通用方法，有的操作系统在不同版本下可能只有这一种设置方式。至于为什么会有两种配置，我找到 <a href=\"https://www.baeldung.com/linux/sites-available-sites-enabled-conf-d#header-318\" target=\"_blank\" rel=\"noopener noreferrer\">一篇不算特别官方的文章</a>，还有 <a href=\"https://www.sunzhongwei.com/nginx-configuration-file-to-put-more-good-which-directories-sites-availableenabled-and-conf-d?from=random\" target=\"_blank\" rel=\"noopener noreferrer\">另外一篇个人博文</a>，以及 <a href=\"https://serverfault.com/questions/527630/difference-in-sites-available-vs-sites-enabled-vs-conf-d-directories-nginx\" target=\"_blank\" rel=\"noopener noreferrer\">serverfault 上的讨论</a>，但是我觉得确实是有点道理的，有时间我看看文档验证一下。不过貌似最佳实践是使用 <code v-pre>/etc/nginx/conf.d/</code>，不过我觉得您两者都能理解是最好的。</p>\n</div>\n<h3 id=\"_1-2-2-日志目录\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-日志目录\"><span>1.2.2.日志目录</span></a></h3>\n<p>访问日志通常位于 <code v-pre>/var/log/nginx/access.log</code>，而错误日志通常位于 <code v-pre>/var/log/nginx/error.log</code>。</p>\n<h2 id=\"_1-3-nginx-的具体操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-3-nginx-的具体操作\"><span>1.3.Nginx 的具体操作</span></a></h2>\n<p>要启动 <code v-pre>Nginx</code>，请运行 <code v-pre>nginx</code> 可执行文件，也就是 <code v-pre>nginx</code> 这个指令（不过上面我们使用的是 <code v-pre>systemd</code> 来进行托管的）。一旦 <code v-pre>nginx</code> 启动，可以通过调用带有 <code v-pre>-s</code> 参数的可执行文件来控制它。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Nginx 的内部指令</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">signa</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 信号可以是以下之一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 直接使用 nginx 什么都不带就按默认配置进行启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># stop — 快速关闭</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># quit — 优雅关闭</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># reload — 重新加载配置文件, 这个过程中主进程会启动新的工作进程, 并向旧的工作进程发送消息, 请求它们关闭。否则主进程会回滚更改, 并继续使用旧的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># reopen — 重新打开日志文件</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：还有一个常用指令就是 <code v-pre>sudo nginx -t</code> 可以检查配置文件是否存在语法问题，这个后面会用到。</p>\n</div>\n<h2 id=\"_1-4-nginx-的配置结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-nginx-的配置结构\"><span>1.4.Nginx 的配置结构</span></a></h2>\n<p><code v-pre>Nginx</code> 配置文件由模块组成，这些模块由配置文件中指定的指令来控制。指令又分为简单指令和块指令。</p>\n<ul>\n<li>简单指令由名称和用空格分隔的参数组成，并以分号 <code v-pre>;</code> 作为结束</li>\n<li>块指令的结构则以一组大括号 <code v-pre>{</code> 和 <code v-pre>}</code> 包围作为结束。如果块指令可以在大括号内包含其他指令，则可以被称为上下文</li>\n</ul>\n<p>而在 <code v-pre>Nginx</code> 中，在 <code v-pre>#</code> 符号之后的其余部分被视为注释。</p>\n<h2 id=\"_1-5-nginx-的主要用途\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-nginx-的主要用途\"><span>1.5.Nginx 的主要用途</span></a></h2>\n<h3 id=\"_1-5-1-nginx-的静态网站部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-1-nginx-的静态网站部署\"><span>1.5.1.Nginx 的静态网站部署</span></a></h3>\n<p>一个重要的 <code v-pre>web</code> 服务器任务是提供文件（例如图像或静态 <code v-pre>HTML</code> 页面）。您将实现一个示例，根据请求，从不同的本地目录提供文件 <code v-pre>/data/www</code> （<code v-pre>HTML</code> 文件）和 <code v-pre>/data/images</code> （包含图像）。这将需要编辑配置文件，并在 <code v-pre>http</code> 块内设置一个服务器块，包含两个目录地址。</p>\n<p>首先，创建 <code v-pre>~/data/www</code> 目录并将一个 <code v-pre>index.html</code> 文件放入其中，文件内容可以是任意文本，然后创建 <code v-pre>~/data/images</code> 目录并在其中放置一些图片。</p>\n<div class=\"language-html line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"html\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-html\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">&#x3C;!-- index.html --></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;!</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">DOCTYPE</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">html</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> lang</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">en</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">head</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">meta</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">UTF-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">meta</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> name</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">viewport</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> content</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">width=device-width, initial-scale=1.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">title</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Test Page</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">title</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">style</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            font-family</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> Arial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> sans-serif</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            background-color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">f4f4f4</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            text-align</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> center</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            padding</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 50</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">333</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">666</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        .</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">container</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            background-color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> white</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            padding</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 20</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            border-radius</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            box-shadow</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> rgba</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0.1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            display</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> inline-block</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">style</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">head</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> class</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">container</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Welcome to Nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">This is a simple test page to verify that Nginx is working correctly.</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">If you are seeing this page, your server is configured correctly!</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>图片就放两张图片，分别命名为 <code v-pre>image1.jpg</code> 和 <code v-pre>image2.jpg</code> 再上传到服务器中。</p>\n<p>接下来，打开配置文件，默认配置文件已经包含了几个 <code v-pre>server</code> 块的示例，大多数是被注释掉的。现在将所有这些块注释掉，并开始一个新的 <code v-pre>server</code> 块。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>通常配置文件可能包含几个由监听端口和服务器名称区分的 <code v-pre>server</code> 块（<code v-pre>server</code> 块可以看作是一台虚拟服务器主机），将以下 <code v-pre>location</code> 块添加到 <code v-pre>server</code> 块中。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 html 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 / 开头的请求都被映射到 ~/data/www/ 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 image 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /images/ </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 /images 开头的请求都被映射到 ~/data/images 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>官网是这么直接进行配置，但是这个配置太过于简单，我们加一点料：</p>\n<ul>\n<li>修改默认绑定的 <code v-pre>ip</code> 和默认指定的 <code v-pre>port</code></li>\n<li>修改不同错误码对应的响应网页</li>\n<li>指定日志输出位置</li>\n</ul>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 绑定的 ip 和 port</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    listen </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您的开放port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    server_name </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您的公网ip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里甚至可以配置域名(但是必须经过 DNS 解析)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 html 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 / 开头的请求都被映射到 ~/data/www/ 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 image 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /images/ </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 /images 开头的请求都被映射到 ~/data/images 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 错误页面的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_page </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">404</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> /home/用户名/data/www/404.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_page </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">500</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 502</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 503</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 504</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> /home/用户名/data/www/50x.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 这里的 location = 表示精准匹配    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"--shiki-light:#AB5E3F;--shiki-dark:#C4704F\"> /404.html </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        internal</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 设置 internal 可以确保上述路由只供 nginx 内部使用, 不会被用户直接访问(内部发生错误时才允许这些页面被用户看到)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 这里的 location = 表示精准匹配    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"--shiki-light:#AB5E3F;--shiki-dark:#C4704F\"> /50x.html </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        internal</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 设置 internal 可以确保上述路由只供 nginx 内部使用, 不会被用户直接访问(内部发生错误时才允许这些页面被用户看到)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置访问日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    access_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www/access.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置错误日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www/error.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后我们根据上述的文件模板，生成两份实际的配置文件，注意是两份，我希望教您配置一个 <code v-pre>Nginx</code> 部署多个服务（注意两个文件内的路径都需要填写具体的用户名，并且设置不同的端口，<code v-pre>ip</code> 可以填写为 <code v-pre>_</code> 表示允许任意人访问）。这两个文件 <code v-pre>test1.conf</code> 和 <code v-pre>test2.conf</code> 就配置到我们之前说的配置目录 <code v-pre>sites-available</code> 下吧，并且在 <code v-pre>sites-enabled</code> 中做个软连接。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始部署多个虚拟主机</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 根据上述模板配置两个配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建符号链接</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查上述的创建结果</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查服务器上是否有对应的实际资源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/您的用户名/data/www</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">image1.jpg</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  image2.jpg</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  index.html</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保 Nginx 有权限访问该目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> chmod</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 744</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/data/www/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 修改启动用户, Nginx 默认的启动用户是 www-data, 这里修改配置为 root 比较简单点(理论上也可以直接使用该用户来启动 Nginx 的配置, 我没有试过, 您可以尝试一下, 毕竟这是一个 Nginx 下载的时候自动配置的账号)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> head</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -n</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># user www-data; # 注释掉这个用户</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 更换启动用户为 root</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查配置文件是否存在语法错误</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> syntax</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ok</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> successful</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件中定义的日志文件无需创建, Nginx 会自动帮您创建好</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 重新启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> restart</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后再使用浏览器进行查看，看看我们简单部署的 <code v-pre>index.html</code> 以及两张图片是否可以被访问。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果您是 <code v-pre>Centos</code> 一类的系统，并且查看错误日志出现权限问题，有可能是关于 <code v-pre>SELinux </code> 的问题，您可以 <a href=\"https://stackoverflow.com/questions/31729212/nginx-root-index-html-forbidden-13-permission-denied\" target=\"_blank\" rel=\"noopener noreferrer\">前往 stackoverflow 查看大家的讨论解决这个问题</a>。若以上的解法均不可，则可以 <a href=\"https://blog.csdn.net/onlysunnyboy/article/details/75270533\" target=\"_blank\" rel=\"noopener noreferrer\">考虑看这一篇 csdn 博客的四种解法来解决</a>（我这里使用的就是里面的第一种解法）。</p>\n</div>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905204226096.png\" alt=\"image-20240905204226096\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905204226096</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905204258689.png\" alt=\"image-20240905204258689\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905204258689</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905205206492.png\" alt=\"image-20240905205206492\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905205206492</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905205251586.png\" alt=\"image-20240905205251586\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905205251586</figcaption></figure>\n<div class=\"hint-container note\">\n<p class=\"hint-container-title\">注</p>\n<p>吐槽：另外，如果您传递的 <code v-pre>.jpg</code> 文件比较大，并且再仔细一点，就可以很明显看到一个现象，先请求的照片要优先被渲染，另外一张照片需要等待另外一张照片彻底渲染完毕后才可以进行渲染，我不太清楚这个是不是 <code v-pre>Nginx</code> 的多路转接造成的，以后再研究叭...</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果您用过某些镜像网站，则会遇到下面这种资源页面，我写了一个类似的配置文件供您参考。下面的配置文件，配置了一个叫做 <code v-pre>taidiyun</code> 的项目网站，是我给 <code v-pre>10.41.1.3</code> 服务器中的 <code v-pre>lpx</code> 用户进行配置的。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置资源静态网站, 并且配置一些 ip 屏蔽的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> listen </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">8010</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> server_name </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10.41.1.3</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> autoindex on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 启用目录列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> allow </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10.41.128.57</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 添加允许的 IP 10.41.128.57</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> deny </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">10.0.0.0/8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 屏蔽 10 开头的 IP 段(deny all 则可以屏蔽所有其他访问)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> charset </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">utf-8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 保持终端字符集和这里一样即可(避免浏览器放回乱码)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 配置 html 静态目录, 使用 \"/\" 或者 \"/taidiyun\" 都可以访问静态资源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">     root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/taidiyun</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /taidiyun </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">     root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重定向日志文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> access_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/access.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> error_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/error.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这是一个最小示例，很多资源网站都是这么做的。</p>\n</div>\n<h3 id=\"_1-5-2-nginx-的代理服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-2-nginx-的代理服务部署\"><span>1.5.2.Nginx 的代理服务部署</span></a></h3>\n<p>只是配置静态网站的话，那么 <code v-pre>Nginx</code> 就会显得比较普通，实际上成为反向代理服务器才是 <code v-pre>Nginx</code> 最为出名的地方。这意味着客户端程序将请求先传递给被代理的服务器程序 <code v-pre>Nginx</code>，然后由代理服务器程序 <code v-pre>Nginx</code> 转交给真正的服务器程序，<code v-pre>Nginx</code> 从中获取响应后转发给客户端程序。</p>\n<p>直接另起一个配置文件，把 <code v-pre>Nginx</code> 代理服务器的配置放入其中，我还特意准备了两台实际的服务器来做测试，一台是 <code v-pre>Ubuntu20(代理服务器)</code>，另外一台是 <code v-pre>Centos7(实际服务器)</code>。</p>\n<p>从之前的经验来看，我们使用类似方式编写配置文件，并且将配置文件和对应软连接放到之前提到德两个目录中即可。不过由于我们是做代理服务器，因此还会添加一些还没怎么提及过的指令，这些指令会在注释中提及。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># proxy_server.conf(代理服务器)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    listen </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">8086</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    server_name </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您代理服务器自己的公网ip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://实际服务器ip:8087/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # proxy_pass 其实就是把请求转发给别的服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /test1 </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://127.0.0.1:8088/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 代理之前配置的静态项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /test2 </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://127.0.0.1:8089/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 代理之前配置的静态项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">} </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 整个配置文件相对于代理了三台服务器, 不过实际只是代理了一个远端服务器, 另外两个都是本地的</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>而我们的实际服务器采用 <code v-pre>Node.js</code> 来进行编写，这样编写的成本比较低，为了减少您的安装环境，您只需要使用 <code v-pre>sudo yum install node</code> 即可，然后使用 <code v-pre>node server.js</code> 即可运行实际服务器代码。</p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-js\"><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> http</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> require</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">http</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> proxyIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">填写您的代理服务器ip</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 允许的代理服务器 IP 地址</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> host</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0.0.0.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 监听所有网络接口</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8087</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> http</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">createServer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">req</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> clientIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> req</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">connection</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">remoteAddress</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">clientIp</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> !==</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> proxyIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 如果请求的 ip 不是代理服务器就拒绝请求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">        res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">writeHead</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">403</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/plain</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">        res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">end</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Forbidden</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">writeHead</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">200</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/plain</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">end</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">listen</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> host</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">`</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server running at http://</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">host</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">port</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">`</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">error</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server error:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>好了，该有的都有了，打开两个服务器开始进行配置，先配置代理服务器叭~</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 代理服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/proxy_server.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/etc/nginx/sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy_server.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/etc/nginx/sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy_server.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保 Nginx 有权限访问该目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> chmod</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 744</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/data/www/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确认启动用户为 root 而不是 Nginx 默认的启动用户 www-data</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> head</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -n</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># user www-data; # 注释掉这个用户</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 更换启动用户为 root</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查配置文件是否存在语法错误</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> syntax</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ok</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> successful</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件中定义的日志文件无需创建, Nginx 会自动帮您创建好</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 重新启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> restart</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 实际服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Centos7 的防火墙不是使用 ufw, 这里我给您留一个快速指引, 避免您去查阅某些文档的时间 hhhh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> status</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewalld</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 检查防火墙状态</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewalld</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 如果防火墙没有运行就启动起来</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --permanent</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --add-port=8087/tcp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 允许开放端口 8087</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --reload</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重新加载防火墙规则</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --list-ports</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 验证端口是否开放</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 启动服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.js</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> node</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.js</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> running</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> at</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> http://0.0.0.0:8087/</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>可以看到，之前我们配置的项目也可以被正确访问（因为地址和之前不一样了），而且通过访问代理服务器得到了实际服务器的响应，并且其他机器是无法直接访问实际服务器的，我们的设置使得这种行为会返回 <code v-pre>403</code>，也就是 <code v-pre>禁止访问(Forbidden)</code> 的意思。</p>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240906231529750.png\" alt=\"image-20240906231529750\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240906231529750</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240906231727500.png\" alt=\"image-20240906231727500\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240906231727500</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240907001859922.png\" alt=\"image-20240907001859922\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240907001859922</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240907004533046.png\" alt=\"image-20240907004533046\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240907004533046</figcaption></figure>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：<code v-pre>CGI(Common Gateway Interface, 通用网关接口)</code> 属于是一种比较老旧的技术设计了，<code v-pre>Fast-CGI</code> 是前者的改进，不过我暂时还没有体会到这种架构的好处，您可以简单看下下面文章临时了解以下，或者看看 <code v-pre>Nginx</code> 的官方文档，详细请看 <a href=\"https://blog.csdn.net/bigfaceCatzzZ/article/details/104660718\" target=\"_blank\" rel=\"noopener noreferrer\">新手教程中最后一节</a>。</p>\n</div>\n<h2 id=\"_1-6-nginx-的深入内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-nginx-的深入内容\"><span>1.6.Nginx 的深入内容</span></a></h2>\n<p>好了，您一定大概了解到了 <code v-pre>Nginx</code> 的基本使用了，如果您希望再精进一步，可以 <a href=\"https://docs.nginx.com/nginx/admin-guide/\" target=\"_blank\" rel=\"noopener noreferrer\">尝试阅读 Nginx 的管理员指南文档</a> 获取更多的知识，待补充...</p>\n<h3 id=\"_1-6-1-配置访问密码\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-1-配置访问密码\"><span>1.6.1.配置访问密码</span></a></h3>\n<p>https://blog.csdn.net/i12344/article/details/138459705</p>\n<h1 id=\"_2-caddy\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-caddy\"><span>2.Caddy</span></a></h1>\n<p><code v-pre>Caddy</code> 采用 <code v-pre>Go</code> 语言编写，简洁高效的配置过程让其具备和 <code v-pre>Nginx</code> 竞争的能力。</p>\n<h2 id=\"_1-1-caddy-的安装启动\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-caddy-的安装启动\"><span>1.1.Caddy 的安装启动</span></a></h2>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装和启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> debian-keyring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> debian-archive-keyring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt-transport-https</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -1sLf</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">https://dl.cloudsmith.io/public/caddy/stable/gpg.key</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> gpg</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --dearmor</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/share/keyrings/caddy-stable-archive-keyring.gpg</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -1sLf</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tee</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/apt/sources.list.d/caddy-stable.list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> update</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>可以快速使用一下，然后我们快速使用 <code v-pre>caddy start</code> 启动一下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.480</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    maxprocs:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Leaving</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GOMAXPROCS=16:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CPU</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> quota</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> undefined</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.480</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    GOMEMLIMIT</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> updated</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">package</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">github.com/KimMachineGun/automemlimit/memlimit</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">GOMEMLIMIT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 45312521011,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">previous</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9223372036854775807</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.481</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> endpoint</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">enforce_origin</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">origins</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//[::1]:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//127.0.0.1:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.481</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    serving</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> initial</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Successfully</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddy</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (pid=1299405) - Caddy is running in the background</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这里给出了一个可以和 <code v-pre>caddy</code> 服务通信的地址 <code v-pre>http://127.0.0.1:2019</code>，利用这个地址就可以传递 <code v-pre>json</code> 配置，配置一个服务。下面的两种配置方式是等价的，您可以尝试一下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> localhost:2019/load</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">    -H</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type: application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">    -d</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> @-</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> EOF</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        \"apps\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">            \"http\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                \"servers\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                    \"hello\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        \"listen\": [\":2015\"],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        \"routes\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                            {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                \"handle\": [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                    \"handler\": \"static_response\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                    \"body\": \"Hello, world!\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">EOF</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>等价于下面的配置方式。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> localhost:2019/load</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">  -H</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type: application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">  -d</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> @caddy.json</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-json line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"json\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-json\"><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">apps</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">        \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">http</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">servers</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">hello</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>执行后响应结果如下：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.154</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin.api</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       received</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> request</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">method</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">POST</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">host</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">uri</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/load</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">remote_ip</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">127.0.0.1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">remote_port</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">53892</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">headers</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">*/*</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">530</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">User-Agent</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">curl/8.5.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> endpoint</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">enforce_origin</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">origins</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//[::1]:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//127.0.0.1:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls.cache.maintenance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> background</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> certificate</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> maintenance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">      {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cache</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0xc000695900</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    HTTP/2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> because</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> it</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> requires</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TLS</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">network</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">tcp</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">addr</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    HTTP/3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> because</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> it</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> requires</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TLS</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">network</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">tcp</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">addr</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http.log</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> running</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">name</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">hello</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">protocols</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h2</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    autosaved</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> config</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (load </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">with</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --resume</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> flag</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)      </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"file\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/home/ljp/.config/caddy/autosave.json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin.api</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       load</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.156</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   stopped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> previous</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.163</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">     cleaning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> storage</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> unit</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">storage</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">FileStorage:/home/ljp/.local/share/caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.164</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">     finished</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cleaning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> storage</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> units</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后命令行终端就可以使用 <code v-pre>curl localhost:2015</code> 获取到 <code v-pre>Hello, world!</code> 的响应文本。使用 <code v-pre>caddy stop</code> 就可以把 <code v-pre>caddy</code> 服务和 <code v-pre>json</code> 中部署的服务停掉。</p>\n<p>另外还支持使用 <code v-pre>Caddyfile</code> 再结合 <code v-pre>CLI</code> 指令来进行部署，在当前目录下写入下面的文件后再使用 <code v-pre>caddy start</code> 就会自动找到这歌服务进行部署。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">:2015</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果想要取消服务就需要删除这个文件并且使用 <code v-pre>caddy stop</code>。</p>\n<p>这两种方式我们后面还会详细介绍，不过您最好选择其中一种方式来进行学习，我个人更加推荐使用 <code v-pre>Caddyfile</code> 文件，因为简单易学。</p>\n<h2 id=\"_1-2-caddy-的相关查看\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-caddy-的相关查看\"><span>1.2.Caddy 的相关查看</span></a></h2>\n<h3 id=\"_1-2-1-配置内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-配置内容\"><span>1.2.1.配置内容</span></a></h3>\n<p>实际上我们不再需要精确知道配置文件在何处，我们想要查看目前的配置，可以使用 <code v-pre>curl localhost:2019/config/</code> 来查看，不仅可以看到我们的 <code v-pre>Caddy</code> 配置，还可以看到其他的 <code v-pre>json</code> 服务配置。</p>\n<h3 id=\"_1-2-2-日志内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-日志内容\"><span>1.2.2.日志内容</span></a></h3>\n<p>如果是使用 <code v-pre>caddy run</code> 的方式就可以实时在终端界面上查看配访问记录，当然我们的要求不止如此，在使用 <code v-pre>caddy start</code> 的时候是以守护进程的方式来运行服务的，这种情况下需要阅读日志可以修改配置文件，这个后面提及。</p>\n<h2 id=\"_1-3-caddy-的具体操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-3-caddy-的具体操作\"><span>1.3.Caddy 的具体操作</span></a></h2>\n<p>您可以按照以下文档顺序进行阅读：</p>\n<ul>\n<li><a href=\"https://caddyserver.com/docs/quick-starts\" target=\"_blank\" rel=\"noopener noreferrer\">快速入门</a></li>\n<li><a href=\"https://caddyserver.com/docs/getting-started\" target=\"_blank\" rel=\"noopener noreferrer\">基础知识</a></li>\n<li><a href=\"https://caddyserver.com/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">全部文档</a></li>\n</ul>\n<p>不过最核心的就是 <code v-pre>cli</code> 和 <code v-pre>api</code> 的文档：</p>\n<ul>\n<li>\n<p><code v-pre>Caddy</code> 提供了命令行工具 <a href=\"https://caddyserver.com/docs/caddyfile-tutorial\" target=\"_blank\" rel=\"noopener noreferrer\">caddy cli</a>：</p>\n<ul>\n<li><code v-pre>caddy start</code>：启动 <code v-pre>Caddy</code> 服务，以守护进程来启动</li>\n<li><code v-pre>caddy adapt</code>：检测当前目录下的 <code v-pre>Caddyfile</code> 文件且转化为 <code v-pre>json</code> 后输出，可以搭配 <code v-pre>jq</code> 进行使用（但不自动部署），同时还会检查配置文件是否有语法错误</li>\n<li><code v-pre>caddy run</code>：临时 <code v-pre>Caddy</code> 服务（在测试过程使用可以使用 <code v-pre>--watch</code> 监测 <code v-pre>Caddyfile</code> 配置文件的改动）</li>\n<li><code v-pre>caddy stop</code>：停止 <code v-pre>Caddy</code> 服务（同时去除之前配置的服务）</li>\n<li><code v-pre>caddy reload</code>：重载 <code v-pre>Caddy</code> 服务（因此可以使用 <code v-pre>Caddyfile</code> 持久化多个服务）</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>Caddy</code> 提供了管理接口 <a href=\"https://caddyserver.com/docs/api-tutorial\" target=\"_blank\" rel=\"noopener noreferrer\">caddy api</a>：</p>\n<ul>\n<li><code v-pre>localhost:2019/config</code>：以 <code v-pre>json</code> 形式输出 <code v-pre>Caddy</code> 服务当前的状态</li>\n<li><code v-pre>localhost:2019/load</code>：加载/更新 <code v-pre>json</code> 中配置的多个服务</li>\n<li><code v-pre>localhost:2019/config/apps/http/servers/&lt;服务名称&gt;/routes/&lt;数组下标&gt;/handle/&lt;数组下标&gt;/需要修改的字段</code>：修改部分的 <code v-pre>json</code> 配置，避免多个服务被修改（利用 <code v-pre>&quot;@id&quot;</code> 的 <code v-pre>json</code> 字段可以使用更短的路径来进行高效的修改）</li>\n</ul>\n</li>\n</ul>\n<div class=\"hint-container caution\">\n<p class=\"hint-container-title\">警告</p>\n<p>警告：使用 <code v-pre>caddy start</code> 的本质和使用 <code v-pre>systemctl start caddy.service</code> 是一样的，因此不能两者一起使用。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果加载新配置时出现任何错误，<code v-pre>Caddy</code> 将回滚到上一个正常工作的配置。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：使用 <code v-pre>jq</code> 指令可以优化对 <code v-pre>json</code> 的美观输出。</p>\n</div>\n<h2 id=\"_1-4-caddy-的配置结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-caddy-的配置结构\"><span>1.4.Caddy 的配置结构</span></a></h2>\n<h4 id=\"_1-4-1-json-文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-1-json-文件\"><span>1.4.1.JSON 文件</span></a></h4>\n<p><code v-pre>Caddy</code> 支持使用 <code v-pre>JSON</code> 文件来搭建服务。</p>\n<div class=\"language-json line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"json\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-json\"><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">apps</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">        \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">http</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">servers</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">&#x3C;服务名1></span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">&#x3C;域名1>:&#x3C;端口号1></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">&#x3C;服务名2></span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">&#x3C;域名2>:&#x3C;端口号2></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Goodbye, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-4-2-caddyfile-文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-2-caddyfile-文件\"><span>1.4.2.Caddyfile 文件</span></a></h4>\n<p><code v-pre>Caddy</code> 支持使用 <code v-pre>Caddyfile</code> 文件来搭建服务（我们最主要还是使用这种方式）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">域名</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">1></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">端口号</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">1></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">域名</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">2></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">端口号</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">2></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Goodbye, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果提示您的格式不规范，可以使用 <code v-pre>caddy fmt --overwrite</code> 自动规范文件。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：允许您使用 <code v-pre>#</code> 开头的文本行作为 <code v-pre>Caddyfile</code> 中的注释。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果使用了域名部署并且需要使用 <code v-pre>443</code> 这种敏感端口，就需要使用 <code v-pre>sudo</code> 来提高权限。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：<code v-pre>Caddyfile</code> 支持在解析之前读取外部的环境变量。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> export</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> SITE_ADDRESS=localhost:9055</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><p>而下面的 <code v-pre>Caddyfile</code> 就会从：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{$SITE_ADDRESS}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>被解析为：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost:9055</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></div>\n<h2 id=\"_1-5-caddy-的主要用途\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-caddy-的主要用途\"><span>1.5.Caddy 的主要用途</span></a></h2>\n<h3 id=\"_1-5-1-caddy-的静态网站部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-1-caddy-的静态网站部署\"><span>1.5.1.Caddy 的静态网站部署</span></a></h3>\n<p>使用 <code v-pre>Caddy</code> 来部署一个可以查阅服务器文件的服务简直不要太容易，只需要做以下的配置（域名和端口您自己换）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> touch</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> README.md</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy.html</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tutorial</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">                Page</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> loaded</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> at:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {{now | date \"Mon Jan 2 15:04:05 MST 2006\"}}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    encode</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持压缩传输</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    templates</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持模板语法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> browse</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持文件阅览</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --watch</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 注意一定要加上 sudo, 因为我们直接使用 localhost 相当于使用域名, 因此需要使用 443 这种端口, 需要提高权限才可以使用</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>访问 <code v-pre>https://localhost</code> 即可得到下面界面，点击文件就可以切换带有模板语法的 <code v-pre>html</code> 文件。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果不希望启用 <code v-pre>https</code>，可以使用 <code v-pre>tls off</code> 来关闭。</p>\n</div>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g.jpg\" alt=\"img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g\" tabindex=\"0\" loading=\"lazy\"><figcaption>img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg.jpg\" alt=\"img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg\" tabindex=\"0\" loading=\"lazy\"><figcaption>img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg</figcaption></figure>\n<p>不过我们还不止是需要这种效果，我们更加希望用户访问服务器根目录后能直接看到部署好的前端服务，此时就可以修改根目录。我们新增加一个 <code v-pre>dist</code> 文件，然后使用约定的 <code v-pre>index.html</code> 文件写入一些简单的内容（如果不是使用 <code v-pre>index.html</code> 需要您在使用 <code v-pre>curl</code> 时指定文件名称）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">root</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/index.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/index.html</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Caddyfile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  caddy.html</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  dist</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  README.md</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reload</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://localhost/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>前面我们说过日志文件的问题，这里也可以自己定义日志文件的去处，而不仅仅在命令行上查看。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  root</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  log</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      output</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/access.log</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      format</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> json</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 日志格式包含</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reload</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.434</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    using</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> adjacent</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.435</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    adapted</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> config</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> JSON</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">adapter</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.435</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    Caddyfile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> input</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> not</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> formatted</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> run</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddy fmt --overwrite</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> fix</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> inconsistencies</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">adapter</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">file</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">line</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://localhost/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/access.log</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 注意需要提高权限</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"level\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"info\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"ts\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">:1746200328.3812969,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"logger\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"http.log.access.log0\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"msg\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"handled request\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"request\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">{</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_port</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">39740</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">client_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">HTTP/2.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">method</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">GET</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">host</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">uri</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">User-Agent</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl/8.5.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"],\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Accept</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">*/*</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"]},\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">tls</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resumed</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":false,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">version</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":772,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cipher_suite</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":4865,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">h2</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"}},\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bytes_read</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":0,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user_id</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">duration</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":0.000096963,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">size</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":123,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">status</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":200,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resp_headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Last-Modified</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Fri,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> May</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2025</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:31:34</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GMT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Ranges</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">bytes</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">123</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Alt-Svc</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:443</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> ma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">2592000</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Vary</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Encoding</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Etag</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">d9ls796hiq8d3f</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$ sudo cat dist/access.log | jq # 或者用更加可见的方式</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">level</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">info</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">ts</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: 1746200328.3812969,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">logger</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">http.log.access.log0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">msg</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">handled</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> request</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">request</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_port</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">39740</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">client_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">HTTP/2.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">method</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">GET</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">host</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">uri</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">User-Agent</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl/8.5.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Accept</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">*/*</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">tls</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resumed</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": false,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">version</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 772,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cipher_suite</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 4865,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">h2</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bytes_read</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user_id</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">duration</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 0.000096963,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">size</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 123,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">status</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 200,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resp_headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Last-Modified</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Fri,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> May</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2025</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:31:34</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GMT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Ranges</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">bytes</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">123</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Alt-Svc</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:443</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> ma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">2592000</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Vary</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Encoding</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Etag</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">d9ls796hiq8d3f</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h3 id=\"_1-5-2-caddy-的代理服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-2-caddy-的代理服务部署\"><span>1.5.2.Caddy 的代理服务部署</span></a></h3>\n<p>做反向代理也是很快的，下面展示的两个例子就是基于匹配器的代理语法。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    reverse_proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 127.0.0.1:9005</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    reverse_proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /api/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 127.0.0.1:9005</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_1-6-caddy-的深入内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-caddy-的深入内容\"><span>1.6.Caddy 的深入内容</span></a></h2>\n<p>可以看出 <code v-pre>Caddy</code> 非常简洁，下面提供一些资料供您参考：</p>\n<ul>\n<li><a href=\"https://caddyserver.com/docs/command-line\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的命令操作</a></li>\n<li><a href=\"https://caddyserver.com/docs/api\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的管理接口</a></li>\n<li><a href=\"https://caddyserver.com/docs/architecture\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的原理解读</a></li>\n<li><a href=\"https://caddyserver.com/docs/extending-caddy\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的拓展开发</a></li>\n</ul>\n<p>官方文档非常易读，请仔细查阅...</p>\n</template>","contentStripped":"<h1 id=\"_1-nginx\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-nginx\"><span>1.Nginx</span></a></h1>\n<p><code v-pre>Nginx</code> 是一款自由、开源、高性能的 <code v-pre>HTTP</code> 服务器和反向代理服务器（正向代理代理客户端，反向代理代理服务端）。同时也是 一个 <code v-pre>IMAP, POP3, SMTP</code> 代理服务器。<code v-pre>Nginx</code> 可以作为一个 <code v-pre>HTTP</code> 服务器进行网站 的发布处理，也可以作为反向代理进行负载均衡的实现，这里展示关于 <code v-pre>Ubuntu</code> 下 <code v-pre>Nginx</code> 的使用。</p>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>注意：下列部分指令可能需要使用 <code v-pre>sudo</code> 权限，建议您全程带上 <code v-pre>sudo</code> 提升权限。</p>\n</div>\n<h2 id=\"_1-1-nginx-的安装启动\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-nginx-的安装启动\"><span>1.1.Nginx 的安装启动</span></a></h2>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装和启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 修改配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        listen</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 80</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default_server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 修改为自己服务器上开放的端口号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        listen</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [::]:80 default_server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        server_name</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 填您自己服务器的</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ip</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 地址</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 修改自己服务器的 ip 地址</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        root</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/share/nginx/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 填写需要交给 nginx 托管的文件根目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        index</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.htm</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.nginx-debian.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        location</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">                try_files</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $uri</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $uri</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">404</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">root@alyubuntu cpu: 6.5% mem: 21.45% - </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">~</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> $ sudo systemctl status nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">●</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx.service</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Loaded:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> loaded</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (/lib/systemd/system/nginx.service</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> enabled</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> vendor</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> preset:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> enabled</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Active:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> active</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (running) since Thu 2024-09-05 12:25:46 CST</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> 6s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ago</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">       Docs:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> man:nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    Process:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476705</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ExecStartPre=/usr/sbin/nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -q</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -g</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> daemon</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> master_process</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">code</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">exited,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> status</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    Process:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476706</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ExecStart=/usr/sbin/nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -g</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> daemon</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> master_process</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">code</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">exited,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> status</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0/SUCCESS</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">   Main</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PID:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 476707</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      Tasks:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (limit: </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">4202</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     Memory:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3.3M</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        CPU:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 22ms</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">     CGroup:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /system.slice/nginx.service</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             ├─476707</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: master process /usr/sbin/nginx -g daemon on; master_process on;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             ├─476708</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: worker process</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">             └─476709</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">nginx: worker process</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> ></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 05</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 12:25:46</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> alyubuntu</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemd[1]:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Starting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 05</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 12:25:46</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> alyubuntu</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemd[1]:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> A</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> high</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> performance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> web</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> and</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reverse</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后就可以在浏览器中直接访问您的服务器。</p>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905134123295.png\" alt=\"image-20240905134123295.png\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905134123295.png</figcaption></figure>\n<h2 id=\"_1-2-nginx-的相关查看\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-nginx-的相关查看\"><span>1.2.Nginx 的相关查看</span></a></h2>\n<h3 id=\"_1-2-1-配置目录\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-配置目录\"><span>1.2.1.配置目录</span></a></h3>\n<p>上面我们简单配置了一个 <code v-pre>Nginx</code> 的配置文件，这里我们来深入学习这些配置语法，<a href=\"https://nginx.org/en/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">相关的资料可以在 Nginx 官方文档中寻找</a>，这里我们 <a href=\"https://nginx.org/en/docs/beginners_guide.html\" target=\"_blank\" rel=\"noopener noreferrer\">跟着 Nginx 的新手教程来学习语法</a> 即可。</p>\n<p><code v-pre>Nginx</code> 文档里写的非常清楚，<code v-pre>Nginx</code> 由一个主进程和多个工作进程构成，内部采用事件驱动模型，什么叫事件驱动？这里其实就是指使用了多路转接的 <code v-pre>IO</code> 处理机制，也就是 <code v-pre>epoll()</code> 等接口。</p>\n<p>知道大致的原理后，我们要添加配置或修改配置，应该知道配置文件的地址在哪里叭？</p>\n<p><code v-pre>Nginx</code> 及其模块的工作方式在配置文件中确定。默认情况下，配置文件名为 <code v-pre>nginx.conf</code> ，并放置在目录 <code v-pre>/usr/local/nginx/conf/</code> 或 <code v-pre>/etc/nginx/</code> 或 <code v-pre>/usr/local/etc/nginx/</code> 中。在我的 <code v-pre>Ubuntu20</code> 服务器中，这个目录就在 <code v-pre>/etc/nginx/</code> 下，我们就在这个目录下进行展开。</p>\n<ul>\n<li><code v-pre>/etc/nginx/sites-available/ (可用的服务)</code> 存放各个服务的配置文件</li>\n<li><code v-pre>/etc/nginx/sites-enabled/ (启用的服务)</code> 存放上一个目录中文件对应的符号链接</li>\n</ul>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 查看两个目录的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p><code v-pre>/etc/nginx/sites-available/default</code> 是 <code v-pre>Nginx</code> 服务器的配置文件目录中的一个默认配置文件，这个文件提供一个默认的服务器配置，当您第一次安装 <code v-pre>Nginx</code> 时，它通常会自动生成并作为示例或模板，我们刚刚配置的就是这个文件。</p>\n<p>为什么需要做一层链接隔离？主要是方便一些项目的快速启停部署，并且 <code v-pre>Nginx</code> 配置文件中有一个 <code v-pre>include</code> 指令，这个指令允许 <code v-pre>Nginx</code> 的配置文件进行模块化配置，将不同的虚拟主机放入同一个主 <code v-pre>Nging</code> 配置文件中进行统一管理（比如统一管理日志文件输出目录，除非个别主机做了个性化处理，因此 <code v-pre>Nginx</code> 其实也是有局部配置有限的概念的），在主配置文件中有以下这段代码。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 查看主配置文件中的 include 行的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">$ </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cat</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> nginx.conf | grep include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/modules-enabled/*.conf</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/mime.types</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里都是一些 MIME 类型的映射</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/conf.d/*.conf</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里是一些 Nginx 的其他一些被拆分的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        include </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/etc/nginx/sites-enabled/*</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重点看这里, 包含了我们需要启动的软链接</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这样主配置就可以加载软连接对应的配置文件模块，部署多个服务。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：不过比较新版本的 <code v-pre>Nginx</code> 可以直接把配置文件放到 <code v-pre>/etc/nginx/conf.d/</code> 中，这样配置更加简单并且也方便，另外，这也是最通用方法，有的操作系统在不同版本下可能只有这一种设置方式。至于为什么会有两种配置，我找到 <a href=\"https://www.baeldung.com/linux/sites-available-sites-enabled-conf-d#header-318\" target=\"_blank\" rel=\"noopener noreferrer\">一篇不算特别官方的文章</a>，还有 <a href=\"https://www.sunzhongwei.com/nginx-configuration-file-to-put-more-good-which-directories-sites-availableenabled-and-conf-d?from=random\" target=\"_blank\" rel=\"noopener noreferrer\">另外一篇个人博文</a>，以及 <a href=\"https://serverfault.com/questions/527630/difference-in-sites-available-vs-sites-enabled-vs-conf-d-directories-nginx\" target=\"_blank\" rel=\"noopener noreferrer\">serverfault 上的讨论</a>，但是我觉得确实是有点道理的，有时间我看看文档验证一下。不过貌似最佳实践是使用 <code v-pre>/etc/nginx/conf.d/</code>，不过我觉得您两者都能理解是最好的。</p>\n</div>\n<h3 id=\"_1-2-2-日志目录\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-日志目录\"><span>1.2.2.日志目录</span></a></h3>\n<p>访问日志通常位于 <code v-pre>/var/log/nginx/access.log</code>，而错误日志通常位于 <code v-pre>/var/log/nginx/error.log</code>。</p>\n<h2 id=\"_1-3-nginx-的具体操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-3-nginx-的具体操作\"><span>1.3.Nginx 的具体操作</span></a></h2>\n<p>要启动 <code v-pre>Nginx</code>，请运行 <code v-pre>nginx</code> 可执行文件，也就是 <code v-pre>nginx</code> 这个指令（不过上面我们使用的是 <code v-pre>systemd</code> 来进行托管的）。一旦 <code v-pre>nginx</code> 启动，可以通过调用带有 <code v-pre>-s</code> 参数的可执行文件来控制它。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Nginx 的内部指令</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">signa</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 信号可以是以下之一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 直接使用 nginx 什么都不带就按默认配置进行启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># stop — 快速关闭</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># quit — 优雅关闭</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># reload — 重新加载配置文件, 这个过程中主进程会启动新的工作进程, 并向旧的工作进程发送消息, 请求它们关闭。否则主进程会回滚更改, 并继续使用旧的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># reopen — 重新打开日志文件</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：还有一个常用指令就是 <code v-pre>sudo nginx -t</code> 可以检查配置文件是否存在语法问题，这个后面会用到。</p>\n</div>\n<h2 id=\"_1-4-nginx-的配置结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-nginx-的配置结构\"><span>1.4.Nginx 的配置结构</span></a></h2>\n<p><code v-pre>Nginx</code> 配置文件由模块组成，这些模块由配置文件中指定的指令来控制。指令又分为简单指令和块指令。</p>\n<ul>\n<li>简单指令由名称和用空格分隔的参数组成，并以分号 <code v-pre>;</code> 作为结束</li>\n<li>块指令的结构则以一组大括号 <code v-pre>{</code> 和 <code v-pre>}</code> 包围作为结束。如果块指令可以在大括号内包含其他指令，则可以被称为上下文</li>\n</ul>\n<p>而在 <code v-pre>Nginx</code> 中，在 <code v-pre>#</code> 符号之后的其余部分被视为注释。</p>\n<h2 id=\"_1-5-nginx-的主要用途\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-nginx-的主要用途\"><span>1.5.Nginx 的主要用途</span></a></h2>\n<h3 id=\"_1-5-1-nginx-的静态网站部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-1-nginx-的静态网站部署\"><span>1.5.1.Nginx 的静态网站部署</span></a></h3>\n<p>一个重要的 <code v-pre>web</code> 服务器任务是提供文件（例如图像或静态 <code v-pre>HTML</code> 页面）。您将实现一个示例，根据请求，从不同的本地目录提供文件 <code v-pre>/data/www</code> （<code v-pre>HTML</code> 文件）和 <code v-pre>/data/images</code> （包含图像）。这将需要编辑配置文件，并在 <code v-pre>http</code> 块内设置一个服务器块，包含两个目录地址。</p>\n<p>首先，创建 <code v-pre>~/data/www</code> 目录并将一个 <code v-pre>index.html</code> 文件放入其中，文件内容可以是任意文本，然后创建 <code v-pre>~/data/images</code> 目录并在其中放置一些图片。</p>\n<div class=\"language-html line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"html\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-html\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">&#x3C;!-- index.html --></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;!</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">DOCTYPE</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">html</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> lang</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">en</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">head</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">meta</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">UTF-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">meta</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> name</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">viewport</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> content</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">width=device-width, initial-scale=1.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">title</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Test Page</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">title</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">style</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            font-family</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> Arial</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> sans-serif</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            background-color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">f4f4f4</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            text-align</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> center</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            padding</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 50</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">333</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> #</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">666</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        .</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">container</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            background-color</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> white</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            padding</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 20</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            border-radius</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            box-shadow</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">px</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> rgba</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0.1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">            display</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> inline-block</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">style</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">head</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> class</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">container</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">Welcome to Nginx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">h1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">This is a simple test page to verify that Nginx is working correctly.</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        &#x3C;</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">If you are seeing this page, your server is configured correctly!</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">p</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    &#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">div</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">body</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">&#x3C;/</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">></span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>图片就放两张图片，分别命名为 <code v-pre>image1.jpg</code> 和 <code v-pre>image2.jpg</code> 再上传到服务器中。</p>\n<p>接下来，打开配置文件，默认配置文件已经包含了几个 <code v-pre>server</code> 块的示例，大多数是被注释掉的。现在将所有这些块注释掉，并开始一个新的 <code v-pre>server</code> 块。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>通常配置文件可能包含几个由监听端口和服务器名称区分的 <code v-pre>server</code> 块（<code v-pre>server</code> 块可以看作是一台虚拟服务器主机），将以下 <code v-pre>location</code> 块添加到 <code v-pre>server</code> 块中。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 html 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 / 开头的请求都被映射到 ~/data/www/ 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 image 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /images/ </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 /images 开头的请求都被映射到 ~/data/images 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>官网是这么直接进行配置，但是这个配置太过于简单，我们加一点料：</p>\n<ul>\n<li>修改默认绑定的 <code v-pre>ip</code> 和默认指定的 <code v-pre>port</code></li>\n<li>修改不同错误码对应的响应网页</li>\n<li>指定日志输出位置</li>\n</ul>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 编写配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 绑定的 ip 和 port</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    listen </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您的开放port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    server_name </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您的公网ip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 这里甚至可以配置域名(但是必须经过 DNS 解析)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 html 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 / 开头的请求都被映射到 ~/data/www/ 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置 image 静态目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /images/ </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{ </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 所有以 /images 开头的请求都被映射到 ~/data/images 目录中</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 错误页面的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_page </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">404</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> /home/用户名/data/www/404.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_page </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">500</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 502</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 503</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 504</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> /home/用户名/data/www/50x.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 这里的 location = 表示精准匹配    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"--shiki-light:#AB5E3F;--shiki-dark:#C4704F\"> /404.html </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        internal</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 设置 internal 可以确保上述路由只供 nginx 内部使用, 不会被用户直接访问(内部发生错误时才允许这些页面被用户看到)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 这里的 location = 表示精准匹配    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"--shiki-light:#AB5E3F;--shiki-dark:#C4704F\"> /50x.html </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        internal</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 设置 internal 可以确保上述路由只供 nginx 内部使用, 不会被用户直接访问(内部发生错误时才允许这些页面被用户看到)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置访问日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    access_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www/access.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    # 配置错误日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    error_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/用户名/data/www/error.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后我们根据上述的文件模板，生成两份实际的配置文件，注意是两份，我希望教您配置一个 <code v-pre>Nginx</code> 部署多个服务（注意两个文件内的路径都需要填写具体的用户名，并且设置不同的端口，<code v-pre>ip</code> 可以填写为 <code v-pre>_</code> 表示允许任意人访问）。这两个文件 <code v-pre>test1.conf</code> 和 <code v-pre>test2.conf</code> 就配置到我们之前说的配置目录 <code v-pre>sites-available</code> 下吧，并且在 <code v-pre>sites-enabled</code> 中做个软连接。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始部署多个虚拟主机</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 根据上述模板配置两个配置文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建符号链接</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查上述的创建结果</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查服务器上是否有对应的实际资源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/您的用户名/data/www</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">image1.jpg</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  image2.jpg</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  index.html</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保 Nginx 有权限访问该目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> chmod</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 744</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/data/www/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 修改启动用户, Nginx 默认的启动用户是 www-data, 这里修改配置为 root 比较简单点(理论上也可以直接使用该用户来启动 Nginx 的配置, 我没有试过, 您可以尝试一下, 毕竟这是一个 Nginx 下载的时候自动配置的账号)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> head</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -n</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># user www-data; # 注释掉这个用户</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 更换启动用户为 root</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查配置文件是否存在语法错误</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> syntax</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ok</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> successful</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件中定义的日志文件无需创建, Nginx 会自动帮您创建好</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 重新启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> restart</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后再使用浏览器进行查看，看看我们简单部署的 <code v-pre>index.html</code> 以及两张图片是否可以被访问。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果您是 <code v-pre>Centos</code> 一类的系统，并且查看错误日志出现权限问题，有可能是关于 <code v-pre>SELinux </code> 的问题，您可以 <a href=\"https://stackoverflow.com/questions/31729212/nginx-root-index-html-forbidden-13-permission-denied\" target=\"_blank\" rel=\"noopener noreferrer\">前往 stackoverflow 查看大家的讨论解决这个问题</a>。若以上的解法均不可，则可以 <a href=\"https://blog.csdn.net/onlysunnyboy/article/details/75270533\" target=\"_blank\" rel=\"noopener noreferrer\">考虑看这一篇 csdn 博客的四种解法来解决</a>（我这里使用的就是里面的第一种解法）。</p>\n</div>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905204226096.png\" alt=\"image-20240905204226096\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905204226096</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905204258689.png\" alt=\"image-20240905204258689\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905204258689</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905205206492.png\" alt=\"image-20240905205206492\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905205206492</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240905205251586.png\" alt=\"image-20240905205251586\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240905205251586</figcaption></figure>\n<div class=\"hint-container note\">\n<p class=\"hint-container-title\">注</p>\n<p>吐槽：另外，如果您传递的 <code v-pre>.jpg</code> 文件比较大，并且再仔细一点，就可以很明显看到一个现象，先请求的照片要优先被渲染，另外一张照片需要等待另外一张照片彻底渲染完毕后才可以进行渲染，我不太清楚这个是不是 <code v-pre>Nginx</code> 的多路转接造成的，以后再研究叭...</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果您用过某些镜像网站，则会遇到下面这种资源页面，我写了一个类似的配置文件供您参考。下面的配置文件，配置了一个叫做 <code v-pre>taidiyun</code> 的项目网站，是我给 <code v-pre>10.41.1.3</code> 服务器中的 <code v-pre>lpx</code> 用户进行配置的。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置资源静态网站, 并且配置一些 ip 屏蔽的配置</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> listen </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">8010</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> server_name </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10.41.1.3</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> autoindex on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 启用目录列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> allow </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">10.41.128.57</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 添加允许的 IP 10.41.128.57</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> deny </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">10.0.0.0/8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 屏蔽 10 开头的 IP 段(deny all 则可以屏蔽所有其他访问)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> charset </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">utf-8</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 保持终端字符集和这里一样即可(避免浏览器放回乱码)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 配置 html 静态目录, 使用 \"/\" 或者 \"/taidiyun\" 都可以访问静态资源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">     root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/taidiyun</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /taidiyun </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">     root </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重定向日志文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> access_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/access.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> error_log </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/home/lpx/error.log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这是一个最小示例，很多资源网站都是这么做的。</p>\n</div>\n<h3 id=\"_1-5-2-nginx-的代理服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-2-nginx-的代理服务部署\"><span>1.5.2.Nginx 的代理服务部署</span></a></h3>\n<p>只是配置静态网站的话，那么 <code v-pre>Nginx</code> 就会显得比较普通，实际上成为反向代理服务器才是 <code v-pre>Nginx</code> 最为出名的地方。这意味着客户端程序将请求先传递给被代理的服务器程序 <code v-pre>Nginx</code>，然后由代理服务器程序 <code v-pre>Nginx</code> 转交给真正的服务器程序，<code v-pre>Nginx</code> 从中获取响应后转发给客户端程序。</p>\n<p>直接另起一个配置文件，把 <code v-pre>Nginx</code> 代理服务器的配置放入其中，我还特意准备了两台实际的服务器来做测试，一台是 <code v-pre>Ubuntu20(代理服务器)</code>，另外一台是 <code v-pre>Centos7(实际服务器)</code>。</p>\n<p>从之前的经验来看，我们使用类似方式编写配置文件，并且将配置文件和对应软连接放到之前提到德两个目录中即可。不过由于我们是做代理服务器，因此还会添加一些还没怎么提及过的指令，这些指令会在注释中提及。</p>\n<div class=\"language-nginx line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"nginx\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-nginx\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># proxy_server.conf(代理服务器)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">server</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    listen </span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">8086</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    server_name </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">您代理服务器自己的公网ip</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> / </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://实际服务器ip:8087/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # proxy_pass 其实就是把请求转发给别的服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /test1 </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://127.0.0.1:8088/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 代理之前配置的静态项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    location</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> /test2 </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        proxy_pass </span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">http://127.0.0.1:8089/</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 代理之前配置的静态项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">} </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 整个配置文件相对于代理了三台服务器, 不过实际只是代理了一个远端服务器, 另外两个都是本地的</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>而我们的实际服务器采用 <code v-pre>Node.js</code> 来进行编写，这样编写的成本比较低，为了减少您的安装环境，您只需要使用 <code v-pre>sudo yum install node</code> 即可，然后使用 <code v-pre>node server.js</code> 即可运行实际服务器代码。</p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-js\"><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> http</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> require</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">http</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> proxyIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">填写您的代理服务器ip</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 允许的代理服务器 IP 地址</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> host</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0.0.0.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 监听所有网络接口</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8087</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> http</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">createServer</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">((</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">req</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> clientIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> req</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">connection</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">remoteAddress</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">clientIp</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> !==</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> proxyIp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 如果请求的 ip 不是代理服务器就拒绝请求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">        res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">writeHead</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">403</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/plain</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">        res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">end</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Forbidden</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">writeHead</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">200</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/plain</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    res</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">end</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">listen</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">port</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> host</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">`</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server running at http://</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">host</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">port</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">`</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">server</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">on</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">error</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">    console</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server error:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">});</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>好了，该有的都有了，打开两个服务器开始进行配置，先配置代理服务器叭~</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 代理服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ln</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled/proxy_server.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/etc/nginx/sites-available</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy_server.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/etc/nginx/sites-enabled</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/default</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> proxy_server.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/proxy_server.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test1.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test1.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test2.conf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/sites-available/test2.conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保 Nginx 有权限访问该目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> chmod</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 744</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/data/www/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确认启动用户为 root 而不是 Nginx 默认的启动用户 www-data</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> head</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -n</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># user www-data; # 注释掉这个用户</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 更换启动用户为 root</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查配置文件是否存在语法错误</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -t</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> the</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> syntax</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ok</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">nginx:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/nginx/nginx.conf</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> successful</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件中定义的日志文件无需创建, Nginx 会自动帮您创建好</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 重新启动 Nginx</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> restart</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> nginx</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 实际服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Centos7 的防火墙不是使用 ufw, 这里我给您留一个快速指引, 避免您去查阅某些文档的时间 hhhh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> status</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewalld</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 检查防火墙状态</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewalld</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 如果防火墙没有运行就启动起来</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --permanent</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --add-port=8087/tcp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 允许开放端口 8087</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --reload</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 重新加载防火墙规则</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> firewall-cmd</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --list-ports</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 验证端口是否开放</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 启动服务器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.js</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> node</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server.js</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> running</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> at</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> http://0.0.0.0:8087/</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>可以看到，之前我们配置的项目也可以被正确访问（因为地址和之前不一样了），而且通过访问代理服务器得到了实际服务器的响应，并且其他机器是无法直接访问实际服务器的，我们的设置使得这种行为会返回 <code v-pre>403</code>，也就是 <code v-pre>禁止访问(Forbidden)</code> 的意思。</p>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240906231529750.png\" alt=\"image-20240906231529750\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240906231529750</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240906231727500.png\" alt=\"image-20240906231727500\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240906231727500</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240907001859922.png\" alt=\"image-20240907001859922\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240907001859922</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/image-20240907004533046.png\" alt=\"image-20240907004533046\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240907004533046</figcaption></figure>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：<code v-pre>CGI(Common Gateway Interface, 通用网关接口)</code> 属于是一种比较老旧的技术设计了，<code v-pre>Fast-CGI</code> 是前者的改进，不过我暂时还没有体会到这种架构的好处，您可以简单看下下面文章临时了解以下，或者看看 <code v-pre>Nginx</code> 的官方文档，详细请看 <a href=\"https://blog.csdn.net/bigfaceCatzzZ/article/details/104660718\" target=\"_blank\" rel=\"noopener noreferrer\">新手教程中最后一节</a>。</p>\n</div>\n<h2 id=\"_1-6-nginx-的深入内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-nginx-的深入内容\"><span>1.6.Nginx 的深入内容</span></a></h2>\n<p>好了，您一定大概了解到了 <code v-pre>Nginx</code> 的基本使用了，如果您希望再精进一步，可以 <a href=\"https://docs.nginx.com/nginx/admin-guide/\" target=\"_blank\" rel=\"noopener noreferrer\">尝试阅读 Nginx 的管理员指南文档</a> 获取更多的知识，待补充...</p>\n<h3 id=\"_1-6-1-配置访问密码\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-1-配置访问密码\"><span>1.6.1.配置访问密码</span></a></h3>\n<p>https://blog.csdn.net/i12344/article/details/138459705</p>\n<h1 id=\"_2-caddy\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-caddy\"><span>2.Caddy</span></a></h1>\n<p><code v-pre>Caddy</code> 采用 <code v-pre>Go</code> 语言编写，简洁高效的配置过程让其具备和 <code v-pre>Nginx</code> 竞争的能力。</p>\n<h2 id=\"_1-1-caddy-的安装启动\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-caddy-的安装启动\"><span>1.1.Caddy 的安装启动</span></a></h2>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装和启动</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> debian-keyring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> debian-archive-keyring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt-transport-https</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -1sLf</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">https://dl.cloudsmith.io/public/caddy/stable/gpg.key</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> gpg</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --dearmor</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/share/keyrings/caddy-stable-archive-keyring.gpg</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -1sLf</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tee</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /etc/apt/sources.list.d/caddy-stable.list</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> update</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>可以快速使用一下，然后我们快速使用 <code v-pre>caddy start</code> 启动一下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.480</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    maxprocs:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Leaving</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GOMAXPROCS=16:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CPU</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> quota</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> undefined</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.480</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    GOMEMLIMIT</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> updated</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">package</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">github.com/KimMachineGun/automemlimit/memlimit</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">GOMEMLIMIT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 45312521011,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">previous</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9223372036854775807</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.481</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> endpoint</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">enforce_origin</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">origins</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//[::1]:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//127.0.0.1:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:38:12.481</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    serving</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> initial</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> configuration</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Successfully</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddy</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (pid=1299405) - Caddy is running in the background</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这里给出了一个可以和 <code v-pre>caddy</code> 服务通信的地址 <code v-pre>http://127.0.0.1:2019</code>，利用这个地址就可以传递 <code v-pre>json</code> 配置，配置一个服务。下面的两种配置方式是等价的，您可以尝试一下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> localhost:2019/load</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">    -H</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type: application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">    -d</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> @-</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> EOF</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        \"apps\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">            \"http\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                \"servers\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                    \"hello\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        \"listen\": [\":2015\"],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        \"routes\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                            {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                \"handle\": [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                    \"handler\": \"static_response\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                    \"body\": \"Hello, world!\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                                }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                        ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">EOF</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>等价于下面的配置方式。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> localhost:2019/load</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">  -H</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type: application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">  -d</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> @caddy.json</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-json line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"json\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-json\"><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">apps</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">        \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">http</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">servers</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">hello</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>执行后响应结果如下：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.154</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin.api</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       received</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> request</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">method</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">POST</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">host</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">uri</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/load</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">remote_ip</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">127.0.0.1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">remote_port</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">53892</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">headers</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">*/*</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">530</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">application/json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">User-Agent</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">curl/8.5.0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> endpoint</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">enforce_origin</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">origins</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//[::1]:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//127.0.0.1:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">//localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls.cache.maintenance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   started</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> background</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> certificate</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> maintenance</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">      {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cache</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">0xc000695900</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    HTTP/2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> because</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> it</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> requires</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TLS</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">network</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">tcp</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">addr</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    HTTP/3</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> because</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> it</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> requires</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TLS</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">network</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">tcp</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">addr</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:2015</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    http.log</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">        server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> running</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">name</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">hello</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">protocols</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h1</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">, </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h2</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    autosaved</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> config</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (load </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">with</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --resume</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> flag</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)      </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"file\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/home/ljp/.config/caddy/autosave.json</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.155</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin.api</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       load</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> complete</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.156</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    admin</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   stopped</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> previous</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">address</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">localhost:2019</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.163</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">     cleaning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> storage</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> unit</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">storage</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">FileStorage:/home/ljp/.local/share/caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/04/29</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 02:43:56.164</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    tls</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">     finished</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cleaning</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> storage</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> units</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后命令行终端就可以使用 <code v-pre>curl localhost:2015</code> 获取到 <code v-pre>Hello, world!</code> 的响应文本。使用 <code v-pre>caddy stop</code> 就可以把 <code v-pre>caddy</code> 服务和 <code v-pre>json</code> 中部署的服务停掉。</p>\n<p>另外还支持使用 <code v-pre>Caddyfile</code> 再结合 <code v-pre>CLI</code> 指令来进行部署，在当前目录下写入下面的文件后再使用 <code v-pre>caddy start</code> 就会自动找到这歌服务进行部署。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">:2015</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果想要取消服务就需要删除这个文件并且使用 <code v-pre>caddy stop</code>。</p>\n<p>这两种方式我们后面还会详细介绍，不过您最好选择其中一种方式来进行学习，我个人更加推荐使用 <code v-pre>Caddyfile</code> 文件，因为简单易学。</p>\n<h2 id=\"_1-2-caddy-的相关查看\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-caddy-的相关查看\"><span>1.2.Caddy 的相关查看</span></a></h2>\n<h3 id=\"_1-2-1-配置内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-配置内容\"><span>1.2.1.配置内容</span></a></h3>\n<p>实际上我们不再需要精确知道配置文件在何处，我们想要查看目前的配置，可以使用 <code v-pre>curl localhost:2019/config/</code> 来查看，不仅可以看到我们的 <code v-pre>Caddy</code> 配置，还可以看到其他的 <code v-pre>json</code> 服务配置。</p>\n<h3 id=\"_1-2-2-日志内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-日志内容\"><span>1.2.2.日志内容</span></a></h3>\n<p>如果是使用 <code v-pre>caddy run</code> 的方式就可以实时在终端界面上查看配访问记录，当然我们的要求不止如此，在使用 <code v-pre>caddy start</code> 的时候是以守护进程的方式来运行服务的，这种情况下需要阅读日志可以修改配置文件，这个后面提及。</p>\n<h2 id=\"_1-3-caddy-的具体操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-3-caddy-的具体操作\"><span>1.3.Caddy 的具体操作</span></a></h2>\n<p>您可以按照以下文档顺序进行阅读：</p>\n<ul>\n<li><a href=\"https://caddyserver.com/docs/quick-starts\" target=\"_blank\" rel=\"noopener noreferrer\">快速入门</a></li>\n<li><a href=\"https://caddyserver.com/docs/getting-started\" target=\"_blank\" rel=\"noopener noreferrer\">基础知识</a></li>\n<li><a href=\"https://caddyserver.com/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">全部文档</a></li>\n</ul>\n<p>不过最核心的就是 <code v-pre>cli</code> 和 <code v-pre>api</code> 的文档：</p>\n<ul>\n<li>\n<p><code v-pre>Caddy</code> 提供了命令行工具 <a href=\"https://caddyserver.com/docs/caddyfile-tutorial\" target=\"_blank\" rel=\"noopener noreferrer\">caddy cli</a>：</p>\n<ul>\n<li><code v-pre>caddy start</code>：启动 <code v-pre>Caddy</code> 服务，以守护进程来启动</li>\n<li><code v-pre>caddy adapt</code>：检测当前目录下的 <code v-pre>Caddyfile</code> 文件且转化为 <code v-pre>json</code> 后输出，可以搭配 <code v-pre>jq</code> 进行使用（但不自动部署），同时还会检查配置文件是否有语法错误</li>\n<li><code v-pre>caddy run</code>：临时 <code v-pre>Caddy</code> 服务（在测试过程使用可以使用 <code v-pre>--watch</code> 监测 <code v-pre>Caddyfile</code> 配置文件的改动）</li>\n<li><code v-pre>caddy stop</code>：停止 <code v-pre>Caddy</code> 服务（同时去除之前配置的服务）</li>\n<li><code v-pre>caddy reload</code>：重载 <code v-pre>Caddy</code> 服务（因此可以使用 <code v-pre>Caddyfile</code> 持久化多个服务）</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>Caddy</code> 提供了管理接口 <a href=\"https://caddyserver.com/docs/api-tutorial\" target=\"_blank\" rel=\"noopener noreferrer\">caddy api</a>：</p>\n<ul>\n<li><code v-pre>localhost:2019/config</code>：以 <code v-pre>json</code> 形式输出 <code v-pre>Caddy</code> 服务当前的状态</li>\n<li><code v-pre>localhost:2019/load</code>：加载/更新 <code v-pre>json</code> 中配置的多个服务</li>\n<li><code v-pre>localhost:2019/config/apps/http/servers/&lt;服务名称&gt;/routes/&lt;数组下标&gt;/handle/&lt;数组下标&gt;/需要修改的字段</code>：修改部分的 <code v-pre>json</code> 配置，避免多个服务被修改（利用 <code v-pre>&quot;@id&quot;</code> 的 <code v-pre>json</code> 字段可以使用更短的路径来进行高效的修改）</li>\n</ul>\n</li>\n</ul>\n<div class=\"hint-container caution\">\n<p class=\"hint-container-title\">警告</p>\n<p>警告：使用 <code v-pre>caddy start</code> 的本质和使用 <code v-pre>systemctl start caddy.service</code> 是一样的，因此不能两者一起使用。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果加载新配置时出现任何错误，<code v-pre>Caddy</code> 将回滚到上一个正常工作的配置。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：使用 <code v-pre>jq</code> 指令可以优化对 <code v-pre>json</code> 的美观输出。</p>\n</div>\n<h2 id=\"_1-4-caddy-的配置结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-caddy-的配置结构\"><span>1.4.Caddy 的配置结构</span></a></h2>\n<h4 id=\"_1-4-1-json-文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-1-json-文件\"><span>1.4.1.JSON 文件</span></a></h4>\n<p><code v-pre>Caddy</code> 支持使用 <code v-pre>JSON</code> 文件来搭建服务。</p>\n<div class=\"language-json line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"json\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-json\"><span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">apps</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">        \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">http</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">servers</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">&#x3C;服务名1></span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">&#x3C;域名1>:&#x3C;端口号1></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">&#x3C;服务名2></span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">listen</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">&#x3C;域名2>:&#x3C;端口号2></span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                    \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">routes</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                            \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handle</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> [{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">handler</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">static_response</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">                                \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">body</span><span style=\"--shiki-light:#99841877;--shiki-dark:#B8A96577\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Goodbye, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                            }]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">                }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-4-2-caddyfile-文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-4-2-caddyfile-文件\"><span>1.4.2.Caddyfile 文件</span></a></h4>\n<p><code v-pre>Caddy</code> 支持使用 <code v-pre>Caddyfile</code> 文件来搭建服务（我们最主要还是使用这种方式）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">域名</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">1></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">端口号</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">1></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Hello, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">域名</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">2></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">端口号</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">2></span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        respond</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Goodbye, world!</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果提示您的格式不规范，可以使用 <code v-pre>caddy fmt --overwrite</code> 自动规范文件。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：允许您使用 <code v-pre>#</code> 开头的文本行作为 <code v-pre>Caddyfile</code> 中的注释。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果使用了域名部署并且需要使用 <code v-pre>443</code> 这种敏感端口，就需要使用 <code v-pre>sudo</code> 来提高权限。</p>\n</div>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：<code v-pre>Caddyfile</code> 支持在解析之前读取外部的环境变量。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> export</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> SITE_ADDRESS=localhost:9055</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><p>而下面的 <code v-pre>Caddyfile</code> 就会从：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">{$SITE_ADDRESS}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>被解析为：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost:9055</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></div>\n<h2 id=\"_1-5-caddy-的主要用途\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-caddy-的主要用途\"><span>1.5.Caddy 的主要用途</span></a></h2>\n<h3 id=\"_1-5-1-caddy-的静态网站部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-1-caddy-的静态网站部署\"><span>1.5.1.Caddy 的静态网站部署</span></a></h3>\n<p>使用 <code v-pre>Caddy</code> 来部署一个可以查阅服务器文件的服务简直不要太容易，只需要做以下的配置（域名和端口您自己换）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> touch</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> README.md</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy.html</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tutorial</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">                Page</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> loaded</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> at:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {{now | date \"Mon Jan 2 15:04:05 MST 2006\"}}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    encode</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持压缩传输</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    templates</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持模板语法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> browse</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 支持文件阅览</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --watch</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 注意一定要加上 sudo, 因为我们直接使用 localhost 相当于使用域名, 因此需要使用 443 这种端口, 需要提高权限才可以使用</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>访问 <code v-pre>https://localhost</code> 即可得到下面界面，点击文件就可以切换带有模板语法的 <code v-pre>html</code> 文件。</p>\n<div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：如果不希望启用 <code v-pre>https</code>，可以使用 <code v-pre>tls off</code> 来关闭。</p>\n</div>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g.jpg\" alt=\"img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g\" tabindex=\"0\" loading=\"lazy\"><figcaption>img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g</figcaption></figure>\n<figure><img src=\"@source/3.系统网络/1.基本操作/assets/img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg.jpg\" alt=\"img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg\" tabindex=\"0\" loading=\"lazy\"><figcaption>img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg</figcaption></figure>\n<p>不过我们还不止是需要这种效果，我们更加希望用户访问服务器根目录后能直接看到部署好的前端服务，此时就可以修改根目录。我们新增加一个 <code v-pre>dist</code> 文件，然后使用约定的 <code v-pre>index.html</code> 文件写入一些简单的内容（如果不是使用 <code v-pre>index.html</code> 需要您在使用 <code v-pre>curl</code> 时指定文件名称）。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">root</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">file_server</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/index.html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/index.html</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Caddyfile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  caddy.html</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  dist</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  README.md</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reload</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://localhost/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>前面我们说过日志文件的问题，这里也可以自己定义日志文件的去处，而不仅仅在命令行上查看。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  root</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  log</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      output</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> file</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./dist/access.log</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      format</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> json</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 日志格式包含</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> reload</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.434</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    using</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> adjacent</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Caddyfile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.435</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> INFO</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    adapted</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> config</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> JSON</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">adapter</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">2025/05/02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:38:44.435</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> WARN</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    Caddyfile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> input</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> not</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> formatted</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> run</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddy fmt --overwrite</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> fix</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> inconsistencies</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    {</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">adapter</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">file</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddyfile</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">line</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://localhost/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;!</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">DOCTYPE</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> htm</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">                &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">title</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/titl</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">e</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/head</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">p</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">I</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> am</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> index.html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/body</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/html</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dist/access.log</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 注意需要提高权限</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"level\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"info\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"ts\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">:1746200328.3812969,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"logger\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"http.log.access.log0\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"msg\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"handled request\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"request\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">{</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_port</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">39740</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">client_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">HTTP/2.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">method</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">GET</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">host</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">uri</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">User-Agent</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl/8.5.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"],\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Accept</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">*/*</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"]},\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">tls</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resumed</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":false,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">version</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":772,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cipher_suite</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":4865,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">h2</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"}},\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bytes_read</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":0,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user_id</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":\"\",\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">duration</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":0.000096963,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">size</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":123,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">status</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":200,\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resp_headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":{\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Last-Modified</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\":[\"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Fri,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> May</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2025</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:31:34</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GMT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Ranges</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">bytes</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">123</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Alt-Svc</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:443</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> ma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">2592000</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Vary</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Encoding</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Etag</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">d9ls796hiq8d3f</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">],</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:[</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">]}}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$ sudo cat dist/access.log | jq # 或者用更加可见的方式</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">level</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">info</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">ts</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: 1746200328.3812969,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">logger</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">http.log.access.log0</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">  \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">msg</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">handled</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> request</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">request</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">remote_port</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">39740</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">client_ip</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:1</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">HTTP/2.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">method</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">GET</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">host</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">uri</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">/</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">User-Agent</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl/8.5.0</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Accept</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">*/*</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">tls</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resumed</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": false,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">version</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 772,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cipher_suite</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 4865,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">proto</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">h2</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">server_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bytes_read</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 0,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">user_id</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": \"\",</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">duration</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 0.000096963,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">size</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 123,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">status</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": 200,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">resp_headers</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Last-Modified</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\": [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">      \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Fri,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 02</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> May</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2025</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 15:31:34</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GMT</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Ranges</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">bytes</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Length</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">123</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Server</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Caddy</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Alt-Svc</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">h3=</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:443</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> ma</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">2592000</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Vary</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Accept-Encoding</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Etag</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">d9ls796hiq8d3f</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\\"</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">    \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Content-Type</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">: [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">      \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">text/html</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> charset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">utf-8</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h3 id=\"_1-5-2-caddy-的代理服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-5-2-caddy-的代理服务部署\"><span>1.5.2.Caddy 的代理服务部署</span></a></h3>\n<p>做反向代理也是很快的，下面展示的两个例子就是基于匹配器的代理语法。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    reverse_proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 127.0.0.1:9005</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">localhost</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    reverse_proxy</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /api/</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 127.0.0.1:9005</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    file_server</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_1-6-caddy-的深入内容\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-6-caddy-的深入内容\"><span>1.6.Caddy 的深入内容</span></a></h2>\n<p>可以看出 <code v-pre>Caddy</code> 非常简洁，下面提供一些资料供您参考：</p>\n<ul>\n<li><a href=\"https://caddyserver.com/docs/command-line\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的命令操作</a></li>\n<li><a href=\"https://caddyserver.com/docs/api\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的管理接口</a></li>\n<li><a href=\"https://caddyserver.com/docs/architecture\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的原理解读</a></li>\n<li><a href=\"https://caddyserver.com/docs/extending-caddy\" target=\"_blank\" rel=\"noopener noreferrer\">更详细的拓展开发</a></li>\n</ul>\n<p>官方文档非常易读，请仔细查阅...</p>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n# 1.Nginx\n\n`Nginx` 是一款自由、开源、高性能的 `HTTP` 服务器和反向代理服务器（正向代理代理客户端，反向代理代理服务端）。同时也是 一个 `IMAP, POP3, SMTP` 代理服务器。`Nginx` 可以作为一个 `HTTP` 服务器进行网站 的发布处理，也可以作为反向代理进行负载均衡的实现，这里展示关于 `Ubuntu` 下 `Nginx` 的使用。\n\n>   [!WARNING]\n>\n>   注意：下列部分指令可能需要使用 `sudo` 权限，建议您全程带上 `sudo` 提升权限。\n\n## 1.1.Nginx 的安装启动\n\n```shell\n# 安装和启动\n# 安装 Nginx\napt install nginx -y\n\n# 修改配置\n$ vim /etc/nginx/sites-available/default\n$ cat /etc/nginx/sites-available/default \nserver {\n        listen 80 default_server; # 修改为自己服务器上开放的端口号\n        listen [::]:80 default_server;\n\n        server_name 填您自己服务器的 ip 地址; # 修改自己服务器的 ip 地址\n\n        root /usr/share/nginx/html; # 填写需要交给 nginx 托管的文件根目录\n        \n        index index.html index.htm index.nginx-debian.html;\n\n        location / {\n                try_files $uri $uri/ =404;\n        }\n}\n\n# 启动 Nginx\n$ systemctl start nginx\n[root@alyubuntu cpu: 6.5% mem: 21.45% - ~] $ sudo systemctl status nginx\n● nginx.service - A high performance web server and a reverse proxy server\n     Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)\n     Active: active (running) since Thu 2024-09-05 12:25:46 CST; 6s ago\n       Docs: man:nginx(8)\n    Process: 476705 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=>\n    Process: 476706 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)\n   Main PID: 476707 (nginx)\n      Tasks: 3 (limit: 4202)\n     Memory: 3.3M\n        CPU: 22ms\n     CGroup: /system.slice/nginx.service\n             ├─476707 \"nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\"\n             ├─476708 \"nginx: worker process\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" >\n             └─476709 \"nginx: worker process\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" \"\" >\n\nSep 05 12:25:46 alyubuntu systemd[1]: Starting A high performance web server and a reverse proxy server...\nSep 05 12:25:46 alyubuntu systemd[1]: Started A high performance web server and a reverse proxy server.\n```\n\n然后就可以在浏览器中直接访问您的服务器。\n\n![image-20240905134123295.png](./assets/image-20240905134123295.png)\n\n## 1.2.Nginx 的相关查看\n\n### 1.2.1.配置目录\n\n上面我们简单配置了一个 `Nginx` 的配置文件，这里我们来深入学习这些配置语法，[相关的资料可以在 Nginx 官方文档中寻找](https://nginx.org/en/docs/)，这里我们 [跟着 Nginx 的新手教程来学习语法](https://nginx.org/en/docs/beginners_guide.html) 即可。\n\n`Nginx` 文档里写的非常清楚，`Nginx` 由一个主进程和多个工作进程构成，内部采用事件驱动模型，什么叫事件驱动？这里其实就是指使用了多路转接的 `IO` 处理机制，也就是 `epoll()` 等接口。\n\n知道大致的原理后，我们要添加配置或修改配置，应该知道配置文件的地址在哪里叭？\n\n`Nginx` 及其模块的工作方式在配置文件中确定。默认情况下，配置文件名为 `nginx.conf` ，并放置在目录 `/usr/local/nginx/conf/` 或 `/etc/nginx/` 或 `/usr/local/etc/nginx/` 中。在我的 `Ubuntu20` 服务器中，这个目录就在 `/etc/nginx/` 下，我们就在这个目录下进行展开。\n\n-   `/etc/nginx/sites-available/ (可用的服务)` 存放各个服务的配置文件\n-   `/etc/nginx/sites-enabled/ (启用的服务)` 存放上一个目录中文件对应的符号链接\n\n```shell\n# 查看两个目录的内容\n$ tree sites-available\nsites-available\n└── default\n\n$ tree sites-enabled\nsites-enabled\n└── default -> /etc/nginx/sites-available/default\n0 directories, 1 file\n```\n\n`/etc/nginx/sites-available/default` 是 `Nginx` 服务器的配置文件目录中的一个默认配置文件，这个文件提供一个默认的服务器配置，当您第一次安装 `Nginx` 时，它通常会自动生成并作为示例或模板，我们刚刚配置的就是这个文件。\n\n为什么需要做一层链接隔离？主要是方便一些项目的快速启停部署，并且 `Nginx` 配置文件中有一个 `include` 指令，这个指令允许 `Nginx` 的配置文件进行模块化配置，将不同的虚拟主机放入同一个主 `Nging` 配置文件中进行统一管理（比如统一管理日志文件输出目录，除非个别主机做了个性化处理，因此 `Nginx` 其实也是有局部配置有限的概念的），在主配置文件中有以下这段代码。\n\n```nginx\n# 查看主配置文件中的 include 行的内容\n$ cat nginx.conf | grep include\ninclude /etc/nginx/modules-enabled/*.conf;\n        include /etc/nginx/mime.types; # 这里都是一些 MIME 类型的映射\n        include /etc/nginx/conf.d/*.conf; # 这里是一些 Nginx 的其他一些被拆分的配置\n        include /etc/nginx/sites-enabled/*; # 重点看这里, 包含了我们需要启动的软链接\n```\n\n这样主配置就可以加载软连接对应的配置文件模块，部署多个服务。\n\n>   [!IMPORTANT]\n>\n>   补充：不过比较新版本的 `Nginx` 可以直接把配置文件放到 `/etc/nginx/conf.d/` 中，这样配置更加简单并且也方便，另外，这也是最通用方法，有的操作系统在不同版本下可能只有这一种设置方式。至于为什么会有两种配置，我找到 [一篇不算特别官方的文章](https://www.baeldung.com/linux/sites-available-sites-enabled-conf-d#header-318)，还有 [另外一篇个人博文](https://www.sunzhongwei.com/nginx-configuration-file-to-put-more-good-which-directories-sites-availableenabled-and-conf-d?from=random)，以及 [serverfault 上的讨论](https://serverfault.com/questions/527630/difference-in-sites-available-vs-sites-enabled-vs-conf-d-directories-nginx)，但是我觉得确实是有点道理的，有时间我看看文档验证一下。不过貌似最佳实践是使用 `/etc/nginx/conf.d/`，不过我觉得您两者都能理解是最好的。\n\n### 1.2.2.日志目录\n\n访问日志通常位于 `/var/log/nginx/access.log`，而错误日志通常位于 `/var/log/nginx/error.log`。\n\n## 1.3.Nginx 的具体操作\n\n要启动 `Nginx`，请运行 `nginx` 可执行文件，也就是 `nginx` 这个指令（不过上面我们使用的是 `systemd` 来进行托管的）。一旦 `nginx` 启动，可以通过调用带有 `-s` 参数的可执行文件来控制它。\n\n```shell\n# Nginx 的内部指令\n$ nginx -s <signal> # 信号可以是以下之一\n# 直接使用 nginx 什么都不带就按默认配置进行启动\n# stop — 快速关闭\n# quit — 优雅关闭\n# reload — 重新加载配置文件, 这个过程中主进程会启动新的工作进程, 并向旧的工作进程发送消息, 请求它们关闭。否则主进程会回滚更改, 并继续使用旧的配置\n# reopen — 重新打开日志文件\n```\n\n>   [!IMPORTANT]\n>\n>   补充：还有一个常用指令就是 `sudo nginx -t` 可以检查配置文件是否存在语法问题，这个后面会用到。\n\n## 1.4.Nginx 的配置结构\n\n`Nginx` 配置文件由模块组成，这些模块由配置文件中指定的指令来控制。指令又分为简单指令和块指令。\n\n-   简单指令由名称和用空格分隔的参数组成，并以分号 `;` 作为结束\n-   块指令的结构则以一组大括号 `{` 和 `}` 包围作为结束。如果块指令可以在大括号内包含其他指令，则可以被称为上下文\n\n而在 `Nginx` 中，在 `#` 符号之后的其余部分被视为注释。\n\n## 1.5.Nginx 的主要用途\n\n### 1.5.1.Nginx 的静态网站部署\n\n一个重要的 `web` 服务器任务是提供文件（例如图像或静态 `HTML` 页面）。您将实现一个示例，根据请求，从不同的本地目录提供文件 `/data/www` （`HTML` 文件）和 `/data/images` （包含图像）。这将需要编辑配置文件，并在 `http` 块内设置一个服务器块，包含两个目录地址。\n\n首先，创建 `~/data/www` 目录并将一个 `index.html` 文件放入其中，文件内容可以是任意文本，然后创建 `~/data/images` 目录并在其中放置一些图片。 \n\n```html\n<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Test Page</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            background-color: #f4f4f4;\n            text-align: center;\n            padding: 50px;\n        }\n        h1 {\n            color: #333;\n        }\n        p {\n            color: #666;\n        }\n        .container {\n            background-color: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n            display: inline-block;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Welcome to Nginx</h1>\n        <p>This is a simple test page to verify that Nginx is working correctly.</p>\n        <p>If you are seeing this page, your server is configured correctly!</p>\n    </div>\n</body>\n</html>\n\n```\n\n图片就放两张图片，分别命名为 `image1.jpg` 和 `image2.jpg` 再上传到服务器中。\n\n接下来，打开配置文件，默认配置文件已经包含了几个 `server` 块的示例，大多数是被注释掉的。现在将所有这些块注释掉，并开始一个新的 `server` 块。\n\n```shell\n# 编写配置文件\nhttp {\n    server {\n    }\n}\n```\n\n通常配置文件可能包含几个由监听端口和服务器名称区分的 `server` 块（`server` 块可以看作是一台虚拟服务器主机），将以下 `location` 块添加到 `server` 块中。\n\n```nginx\n# 编写配置文件\nserver {\n    # 配置 html 静态目录\n    location / { # 所有以 / 开头的请求都被映射到 ~/data/www/ 目录中\n        root /home/用户名/data/www;\n    }\n\n    # 配置 image 静态目录\n    location /images/ { # 所有以 /images 开头的请求都被映射到 ~/data/images 目录中\n        root /home/用户名/data;\n    }\n}\n```\n\n官网是这么直接进行配置，但是这个配置太过于简单，我们加一点料：\n\n-   修改默认绑定的 `ip` 和默认指定的 `port`\n-   修改不同错误码对应的响应网页\n-   指定日志输出位置\n\n```nginx\n# 编写配置文件\nserver {\n    # 绑定的 ip 和 port\n    listen 您的开放port;\n    server_name 您的公网ip; # 这里甚至可以配置域名(但是必须经过 DNS 解析)\n\n    # 配置 html 静态目录\n    location / { # 所有以 / 开头的请求都被映射到 ~/data/www/ 目录中\n        root /home/用户名/data/www;\n    }\n\n    # 配置 image 静态目录\n    location /images/ { # 所有以 /images 开头的请求都被映射到 ~/data/images 目录中\n        root /home/用户名/data;\n    }\n\n    # 错误页面的配置\n    error_page 404 /home/用户名/data/www/404.html;\n    error_page 500 502 503 504 /home/用户名/data/www/50x.html;\n\n    # 这里的 location = 表示精准匹配    \n    location = /404.html {\n        internal; # 设置 internal 可以确保上述路由只供 nginx 内部使用, 不会被用户直接访问(内部发生错误时才允许这些页面被用户看到)\n    }\n\n    # 这里的 location = 表示精准匹配    \n    location = /50x.html {\n        internal; # 设置 internal 可以确保上述路由只供 nginx 内部使用, 不会被用户直接访问(内部发生错误时才允许这些页面被用户看到)\n    }\n    \n    # 配置访问日志\n    access_log /home/用户名/data/www/access.log;\n\n    # 配置错误日志\n    error_log /home/用户名/data/www/error.log;\n}\n```\n\n然后我们根据上述的文件模板，生成两份实际的配置文件，注意是两份，我希望教您配置一个 `Nginx` 部署多个服务（注意两个文件内的路径都需要填写具体的用户名，并且设置不同的端口，`ip` 可以填写为 `_` 表示允许任意人访问）。这两个文件 `test1.conf` 和 `test2.conf` 就配置到我们之前说的配置目录 `sites-available` 下吧，并且在 `sites-enabled` 中做个软连接。\n\n```shell\n# 开始部署多个虚拟主机\n# 根据上述模板配置两个配置文件\n$ cd /etc/nginx\n\n$ sudo vim test1.conf\n$ sudo vim test2.conf\n\n# 创建符号链接\n$ sudo ln -s /etc/nginx/sites-available/test1.conf /etc/nginx/sites-enabled/test1.conf\n$ sudo ln -s /etc/nginx/sites-available/test2.conf /etc/nginx/sites-enabled/test2.conf\n\n# 检查上述的创建结果\n$ cd ..\n\n$ tree sites-available\nsites-available\n├── default\n├── test1.conf\n└── test2.conf\n0 directories, 3 files\n\n$ tree sites-enabled\nsites-enabled\n├── default -> /etc/nginx/sites-available/default\n├── test1.conf -> /etc/nginx/sites-available/test1.conf\n└── test2.conf -> /etc/nginx/sites-available/test2.conf\n0 directories, 3 files\n\n# 检查服务器上是否有对应的实际资源\n$ cd /home/您的用户名/data/www\n\n$ ls\nimage1.jpg  image2.jpg  index.html\n\n# 确保 Nginx 有权限访问该目录\n$ sudo chmod 744 /home/ljp/data/www/*\n\n# 修改启动用户, Nginx 默认的启动用户是 www-data, 这里修改配置为 root 比较简单点(理论上也可以直接使用该用户来启动 Nginx 的配置, 我没有试过, 您可以尝试一下, 毕竟这是一个 Nginx 下载的时候自动配置的账号)\n$ cd /etc/nginx\n$ head -n 2 /etc/nginx/nginx.conf\n# user www-data; # 注释掉这个用户\nuser root; # 更换启动用户为 root\n\n# 检查配置文件是否存在语法错误\n$ sudo nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n\n# 配置文件中定义的日志文件无需创建, Nginx 会自动帮您创建好\n\n# 重新启动 Nginx\n$ sudo systemctl restart nginx\n\n```\n\n然后再使用浏览器进行查看，看看我们简单部署的 `index.html` 以及两张图片是否可以被访问。\n\n>   [!IMPORTANT]\n>\n>   补充：如果您是 `Centos` 一类的系统，并且查看错误日志出现权限问题，有可能是关于 `SELinux ` 的问题，您可以 [前往 stackoverflow 查看大家的讨论解决这个问题](https://stackoverflow.com/questions/31729212/nginx-root-index-html-forbidden-13-permission-denied)。若以上的解法均不可，则可以 [考虑看这一篇 csdn 博客的四种解法来解决](https://blog.csdn.net/onlysunnyboy/article/details/75270533)（我这里使用的就是里面的第一种解法）。\n\n![image-20240905204226096](./assets/image-20240905204226096.png)\n\n![image-20240905204258689](./assets/image-20240905204258689.png)\n\n![image-20240905205206492](./assets/image-20240905205206492.png)\n\n![image-20240905205251586](./assets/image-20240905205251586.png)\n\n>   [!NOTE]\n>\n>   吐槽：另外，如果您传递的 `.jpg` 文件比较大，并且再仔细一点，就可以很明显看到一个现象，先请求的照片要优先被渲染，另外一张照片需要等待另外一张照片彻底渲染完毕后才可以进行渲染，我不太清楚这个是不是 `Nginx` 的多路转接造成的，以后再研究叭...\n\n> [!IMPORTANT]\n>\n> 补充：如果您用过某些镜像网站，则会遇到下面这种资源页面，我写了一个类似的配置文件供您参考。下面的配置文件，配置了一个叫做 `taidiyun` 的项目网站，是我给 `10.41.1.3` 服务器中的 `lpx` 用户进行配置的。\n>\n> ```nginx\n> # 配置资源静态网站, 并且配置一些 ip 屏蔽的配置\n> server {\n>  listen 8010;\n>  server_name 10.41.1.3;\n> \n>  autoindex on; # 启用目录列表\n>  allow 10.41.128.57; # 添加允许的 IP 10.41.128.57\n>  deny 10.0.0.0/8; # 屏蔽 10 开头的 IP 段(deny all 则可以屏蔽所有其他访问)\n>  charset utf-8; # 保持终端字符集和这里一样即可(避免浏览器放回乱码)\n> \n>  # 配置 html 静态目录, 使用 \"/\" 或者 \"/taidiyun\" 都可以访问静态资源\n>  location / {\n>      root /home/lpx/taidiyun;\n>  }\n> \n>  location /taidiyun {\n>      root /home/lpx;\n>  }\n> \n>  # 重定向日志文件\n>  access_log /home/lpx/access.log;\n>  error_log /home/lpx/error.log;\n> }\n> \n> ```\n>\n> 这是一个最小示例，很多资源网站都是这么做的。\n\n### 1.5.2.Nginx 的代理服务部署\n\n只是配置静态网站的话，那么 `Nginx` 就会显得比较普通，实际上成为反向代理服务器才是 `Nginx` 最为出名的地方。这意味着客户端程序将请求先传递给被代理的服务器程序 `Nginx`，然后由代理服务器程序 `Nginx` 转交给真正的服务器程序，`Nginx` 从中获取响应后转发给客户端程序。\n\n直接另起一个配置文件，把 `Nginx` 代理服务器的配置放入其中，我还特意准备了两台实际的服务器来做测试，一台是 `Ubuntu20(代理服务器)`，另外一台是 `Centos7(实际服务器)`。\n\n从之前的经验来看，我们使用类似方式编写配置文件，并且将配置文件和对应软连接放到之前提到德两个目录中即可。不过由于我们是做代理服务器，因此还会添加一些还没怎么提及过的指令，这些指令会在注释中提及。\n\n```nginx\n# proxy_server.conf(代理服务器)\nserver {\n    listen 8086;\n    server_name 您代理服务器自己的公网ip;\n\n    location / {\n        proxy_pass http://实际服务器ip:8087/; # proxy_pass 其实就是把请求转发给别的服务器\n    }\n\n    location /test1 {\n        proxy_pass http://127.0.0.1:8088/; # 代理之前配置的静态项目\n    }\n    \n    location /test2 {\n        proxy_pass http://127.0.0.1:8089/; # 代理之前配置的静态项目\n    }\n} # 整个配置文件相对于代理了三台服务器, 不过实际只是代理了一个远端服务器, 另外两个都是本地的\n\n```\n\n而我们的实际服务器采用 `Node.js` 来进行编写，这样编写的成本比较低，为了减少您的安装环境，您只需要使用 `sudo yum install node` 即可，然后使用 `node server.js` 即可运行实际服务器代码。\n\n```js\nconst http = require('http');\n\nconst proxyIp = '填写您的代理服务器ip'; // 允许的代理服务器 IP 地址\nconst host = '0.0.0.0'; // 监听所有网络接口\nconst port = 8087;\n\nconst server = http.createServer((req, res) => {\n    const clientIp = req.connection.remoteAddress;\n\n    if (clientIp !== proxyIp) { // 如果请求的 ip 不是代理服务器就拒绝请求\n        res.writeHead(403, {'Content-Type': 'text/plain'});\n        res.end('Forbidden\\n');\n        return;\n    }\n\n    res.writeHead(200, {'Content-Type': 'text/plain'});\n    res.end('Hello\\n');\n});\n\nserver.listen(port, host, () => {\n    console.log(`Server running at http://${host}:${port}/`);\n});\n\nserver.on('error', (err) => {\n    console.error('Server error:', err);\n});\n```\n\n好了，该有的都有了，打开两个服务器开始进行配置，先配置代理服务器叭~\n\n```shell\n# 代理服务器\n$ sudo vim /etc/nginx/sites-available/proxy_server.conf\n\n$ sudo ln -s /etc/nginx/sites-available/proxy_server.conf /etc/nginx/sites-enabled/proxy_server.conf\n\n$ tree /etc/nginx/sites-available /etc/nginx/sites-enabled\n/etc/nginx/sites-available\n├── default\n├── proxy_server.conf\n├── test1.conf\n└── test2.conf\n/etc/nginx/sites-enabled\n├── default -> /etc/nginx/sites-available/default\n├── proxy_server.conf -> /etc/nginx/sites-available/proxy_server.conf\n├── test1.conf -> /etc/nginx/sites-available/test1.conf\n└── test2.conf -> /etc/nginx/sites-available/test2.conf\n\n# 确保 Nginx 有权限访问该目录\n$ sudo chmod 744 /home/ljp/data/www/*\n\n# 确认启动用户为 root 而不是 Nginx 默认的启动用户 www-data\n$ head -n 2 /etc/nginx/nginx.conf\n# user www-data; # 注释掉这个用户\nuser root; # 更换启动用户为 root\n\n# 检查配置文件是否存在语法错误\n$ sudo nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n\n# 配置文件中定义的日志文件无需创建, Nginx 会自动帮您创建好\n\n# 重新启动 Nginx\n$ sudo systemctl restart nginx\n```\n\n```shell\n# 实际服务器\n# Centos7 的防火墙不是使用 ufw, 这里我给您留一个快速指引, 避免您去查阅某些文档的时间 hhhh\n$ sudo systemctl status firewalld # 检查防火墙状态\n$ sudo systemctl start firewalld # 如果防火墙没有运行就启动起来\n$ sudo firewall-cmd --permanent --add-port=8087/tcp # 允许开放端口 8087\n$ sudo firewall-cmd --reload # 重新加载防火墙规则\n$ sudo firewall-cmd --list-ports # 验证端口是否开放\n\n# 启动服务器\n$ vim server.js \n$ node server.js \nServer running at http://0.0.0.0:8087/\n```\n\n可以看到，之前我们配置的项目也可以被正确访问（因为地址和之前不一样了），而且通过访问代理服务器得到了实际服务器的响应，并且其他机器是无法直接访问实际服务器的，我们的设置使得这种行为会返回 `403`，也就是 `禁止访问(Forbidden)` 的意思。\n\n![image-20240906231529750](./assets/image-20240906231529750.png)\n\n![image-20240906231727500](./assets/image-20240906231727500.png)\n\n![image-20240907001859922](./assets/image-20240907001859922.png)\n\n![image-20240907004533046](./assets/image-20240907004533046.png)\n\n>   [!IMPORTANT]\n>\n>   补充：`CGI(Common Gateway Interface, 通用网关接口)` 属于是一种比较老旧的技术设计了，`Fast-CGI` 是前者的改进，不过我暂时还没有体会到这种架构的好处，您可以简单看下下面文章临时了解以下，或者看看 `Nginx` 的官方文档，详细请看 [新手教程中最后一节](https://blog.csdn.net/bigfaceCatzzZ/article/details/104660718)。\n\n## 1.6.Nginx 的深入内容\n\n好了，您一定大概了解到了 `Nginx` 的基本使用了，如果您希望再精进一步，可以 [尝试阅读 Nginx 的管理员指南文档](https://docs.nginx.com/nginx/admin-guide/) 获取更多的知识，待补充...\n\n### 1.6.1.配置访问密码\n\nhttps://blog.csdn.net/i12344/article/details/138459705\n\n# 2.Caddy\n\n`Caddy` 采用 `Go` 语言编写，简洁高效的配置过程让其具备和 `Nginx` 竞争的能力。\n\n## 1.1.Caddy 的安装启动\n\n```shell\n# 安装和启动\n$ sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https curl\n$ curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg\n$ curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list\n$ sudo apt update\n$ sudo apt install caddy\n\n```\n\n可以快速使用一下，然后我们快速使用 `caddy start` 启动一下。\n\n```bash\n$ caddy start\n2025/04/29 02:38:12.480 INFO    maxprocs: Leaving GOMAXPROCS=16: CPU quota undefined\n2025/04/29 02:38:12.480 INFO    GOMEMLIMIT is updated   {\"package\": \"github.com/KimMachineGun/automemlimit/memlimit\", \"GOMEMLIMIT\": 45312521011, \"previous\": 9223372036854775807}\n2025/04/29 02:38:12.481 INFO    admin   admin endpoint started  {\"address\": \"localhost:2019\", \"enforce_origin\": false, \"origins\": [\"//localhost:2019\", \"//[::1]:2019\", \"//127.0.0.1:2019\"]}\n2025/04/29 02:38:12.481 INFO    serving initial configuration\nSuccessfully started Caddy (pid=1299405) - Caddy is running in the background\n```\n\n这里给出了一个可以和 `caddy` 服务通信的地址 `http://127.0.0.1:2019`，利用这个地址就可以传递 `json` 配置，配置一个服务。下面的两种配置方式是等价的，您可以尝试一下。\n\n```bash\n$ curl localhost:2019/load \\\n    -H \"Content-Type: application/json\" \\\n    -d @- << EOF\n    {\n        \"apps\": {\n            \"http\": {\n                \"servers\": {\n                    \"hello\": {\n                        \"listen\": [\":2015\"],\n                        \"routes\": [\n                            {\n                                \"handle\": [{\n                                    \"handler\": \"static_response\",\n                                    \"body\": \"Hello, world!\"\n                                }]\n                            }\n                        ]\n                    }\n                }\n            }\n        }\n    }\nEOF\n\n```\n\n等价于下面的配置方式。\n\n```bash\n$ curl localhost:2019/load \\\n  -H \"Content-Type: application/json\" \\\n  -d @caddy.json\n```\n\n```json\n{\n    \"apps\": {\n        \"http\": {\n            \"servers\": {\n                \"hello\": {\n                    \"listen\": [\":2015\"],\n                    \"routes\": [\n                        {\n                            \"handle\": [{\n                                \"handler\": \"static_response\",\n                                \"body\": \"Hello, world!\"\n                            }]\n                        }\n                    ]\n                }\n            }\n        }\n    }\n}\n```\n\n执行后响应结果如下：\n\n```bash\n2025/04/29 02:43:56.154 INFO    admin.api       received request        {\"method\": \"POST\", \"host\": \"localhost:2019\", \"uri\": \"/load\", \"remote_ip\": \"127.0.0.1\", \"remote_port\": \"53892\", \"headers\": {\"Accept\":[\"*/*\"],\"Content-Length\":[\"530\"],\"Content-Type\":[\"application/json\"],\"User-Agent\":[\"curl/8.5.0\"]}}\n2025/04/29 02:43:56.155 INFO    admin   admin endpoint started  {\"address\": \"localhost:2019\", \"enforce_origin\": false, \"origins\": [\"//[::1]:2019\", \"//127.0.0.1:2019\", \"//localhost:2019\"]}\n2025/04/29 02:43:56.155 INFO    tls.cache.maintenance   started background certificate maintenance      {\"cache\": \"0xc000695900\"}\n2025/04/29 02:43:56.155 WARN    http    HTTP/2 skipped because it requires TLS  {\"network\": \"tcp\", \"addr\": \":2015\"}\n2025/04/29 02:43:56.155 WARN    http    HTTP/3 skipped because it requires TLS  {\"network\": \"tcp\", \"addr\": \":2015\"}\n2025/04/29 02:43:56.155 INFO    http.log        server running  {\"name\": \"hello\", \"protocols\": [\"h1\", \"h2\", \"h3\"]}\n2025/04/29 02:43:56.155 INFO    autosaved config (load with --resume flag)      {\"file\": \"/home/ljp/.config/caddy/autosave.json\"}\n2025/04/29 02:43:56.155 INFO    admin.api       load complete\n2025/04/29 02:43:56.156 INFO    admin   stopped previous server {\"address\": \"localhost:2019\"}\n2025/04/29 02:43:56.163 INFO    tls     cleaning storage unit   {\"storage\": \"FileStorage:/home/ljp/.local/share/caddy\"}            \n2025/04/29 02:43:56.164 INFO    tls     finished cleaning storage units\n```\n\n然后命令行终端就可以使用 `curl localhost:2015` 获取到 `Hello, world!` 的响应文本。使用 `caddy stop` 就可以把 `caddy` 服务和 `json` 中部署的服务停掉。\n\n另外还支持使用 `Caddyfile` 再结合 `CLI` 指令来进行部署，在当前目录下写入下面的文件后再使用 `caddy start` 就会自动找到这歌服务进行部署。\n\n```bash\n:2015 {\n    respond \"Hello, world!\"\n}\n```\n\n如果想要取消服务就需要删除这个文件并且使用 `caddy stop`。\n\n这两种方式我们后面还会详细介绍，不过您最好选择其中一种方式来进行学习，我个人更加推荐使用 `Caddyfile` 文件，因为简单易学。\n\n## 1.2.Caddy 的相关查看\n\n### 1.2.1.配置内容\n\n实际上我们不再需要精确知道配置文件在何处，我们想要查看目前的配置，可以使用 `curl localhost:2019/config/` 来查看，不仅可以看到我们的 `Caddy` 配置，还可以看到其他的 `json` 服务配置。\n\n### 1.2.2.日志内容\n\n如果是使用 `caddy run` 的方式就可以实时在终端界面上查看配访问记录，当然我们的要求不止如此，在使用 `caddy start` 的时候是以守护进程的方式来运行服务的，这种情况下需要阅读日志可以修改配置文件，这个后面提及。\n\n## 1.3.Caddy 的具体操作\n\n您可以按照以下文档顺序进行阅读：\n\n-   [快速入门](https://caddyserver.com/docs/quick-starts)\n-   [基础知识](https://caddyserver.com/docs/getting-started)\n-   [全部文档](https://caddyserver.com/docs/)\n\n不过最核心的就是 `cli` 和 `api` 的文档：\n\n-   `Caddy` 提供了命令行工具 [caddy cli](https://caddyserver.com/docs/caddyfile-tutorial)：\n    -   `caddy start`：启动 `Caddy` 服务，以守护进程来启动\n    -   `caddy adapt`：检测当前目录下的 `Caddyfile` 文件且转化为 `json` 后输出，可以搭配 `jq` 进行使用（但不自动部署），同时还会检查配置文件是否有语法错误\n    -   `caddy run`：临时 `Caddy` 服务（在测试过程使用可以使用 `--watch` 监测 `Caddyfile` 配置文件的改动）\n    -   `caddy stop`：停止 `Caddy` 服务（同时去除之前配置的服务）\n    -   `caddy reload`：重载 `Caddy` 服务（因此可以使用 `Caddyfile` 持久化多个服务）\n    \n-   `Caddy` 提供了管理接口 [caddy api](https://caddyserver.com/docs/api-tutorial)：\n    -   `localhost:2019/config`：以 `json` 形式输出 `Caddy` 服务当前的状态\n    -   `localhost:2019/load`：加载/更新 `json` 中配置的多个服务\n    -   `localhost:2019/config/apps/http/servers/<服务名称>/routes/<数组下标>/handle/<数组下标>/需要修改的字段`：修改部分的 `json` 配置，避免多个服务被修改（利用 `\"@id\"` 的 `json` 字段可以使用更短的路径来进行高效的修改）\n\n>   [!CAUTION]\n>\n>   警告：使用 `caddy start` 的本质和使用 `systemctl start caddy.service` 是一样的，因此不能两者一起使用。\n\n\n>   [!IMPORTANT]\n>\n>   补充：如果加载新配置时出现任何错误，`Caddy` 将回滚到上一个正常工作的配置。\n\n>   [!IMPORTANT]\n>\n>   补充：使用 `jq` 指令可以优化对 `json` 的美观输出。\n\n## 1.4.Caddy 的配置结构\n\n#### 1.4.1.JSON 文件\n\n`Caddy` 支持使用 `JSON` 文件来搭建服务。\n\n```json\n{\n    \"apps\": {\n        \"http\": {\n            \"servers\": {\n                \"<服务名1>\": {\n                    \"listen\": [\"<域名1>:<端口号1>\"],\n                    \"routes\": [\n                        {\n                            \"handle\": [{\n                                \"handler\": \"static_response\",\n                                \"body\": \"Hello, world!\"\n                            }]\n                        }\n                    ]\n                },\n                \"<服务名2>\": {\n                    \"listen\": [\"<域名2>:<端口号2>\"],\n                    \"routes\": [\n                        {\n                            \"handle\": [{\n                                \"handler\": \"static_response\",\n                                \"body\": \"Goodbye, world!\"\n                            }]\n                        }\n                    ]\n                }\n            }\n        }\n    }\n}\n```\n\n#### 1.4.2.Caddyfile 文件\n\n`Caddy` 支持使用 `Caddyfile` 文件来搭建服务（我们最主要还是使用这种方式）。\n\n```bash\n<域名1>:<端口号1> {\n        respond \"Hello, world!\"\n}\n\n<域名2>:<端口号2> {\n        respond \"Goodbye, world!\"\n}\n```\n\n>   [!IMPORTANT]\n>\n>   补充：如果提示您的格式不规范，可以使用 `caddy fmt --overwrite` 自动规范文件。\n\n>   [!IMPORTANT]\n>\n>   补充：允许您使用 `#` 开头的文本行作为 `Caddyfile` 中的注释。\n\n>   [!IMPORTANT]\n>\n>   补充：如果使用了域名部署并且需要使用 `443` 这种敏感端口，就需要使用 `sudo` 来提高权限。\n\n>   [!IMPORTANT]\n>\n>   补充：`Caddyfile` 支持在解析之前读取外部的环境变量。\n>\n>   ```bash\n>   $ export SITE_ADDRESS=localhost:9055\n>   ```\n>\n>   而下面的 `Caddyfile` 就会从：\n>\n>   ```bash\n>   {$SITE_ADDRESS}\n>   \n>   file_server\n>   ```\n>\n>   被解析为：\n>\n>   ```bash\n>   localhost:9055\n>   \n>   file_server\n>   ```\n\n## 1.5.Caddy 的主要用途\n\n### 1.5.1.Caddy 的静态网站部署\n\n使用 `Caddy` 来部署一个可以查阅服务器文件的服务简直不要太容易，只需要做以下的配置（域名和端口您自己换）。\n\n```bash\n$ touch README.md\n$ vim caddy.html && cat caddy.html\n<!DOCTYPE html>\n<html>\n        <head>\n                <title>Caddy tutorial</title>\n        </head>\n        <body>\n                Page loaded at: {{now | date \"Mon Jan 2 15:04:05 MST 2006\"}}\n        </body>\n</html>\n$ vim Caddyfile && cat Caddyfile\nlocalhost {\n    encode # 支持压缩传输\n    templates # 支持模板语法\n    file_server browse # 支持文件阅览\n}\n\n$ sudo caddy run --watch # 注意一定要加上 sudo, 因为我们直接使用 localhost 相当于使用域名, 因此需要使用 443 这种端口, 需要提高权限才可以使用\n\n```\n\n访问 `https://localhost` 即可得到下面界面，点击文件就可以切换带有模板语法的 `html` 文件。\n\n>   [!IMPORTANT]\n>\n>   补充：如果不希望启用 `https`，可以使用 `tls off` 来关闭。\n\n![img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g](./assets/img_v3_02lt_52e5d641-3770-4f75-a72a-7ba9bd6d456g.jpg)\n\n![img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg](./assets/img_v3_02lt_40cbe01a-8d56-4203-abf0-bdcd9bb72bfg.jpg)\n\n不过我们还不止是需要这种效果，我们更加希望用户访问服务器根目录后能直接看到部署好的前端服务，此时就可以修改根目录。我们新增加一个 `dist` 文件，然后使用约定的 `index.html` 文件写入一些简单的内容（如果不是使用 `index.html` 需要您在使用 `curl` 时指定文件名称）。\n\n```bash\n$ vim Caddyfile && cat Caddyfile\nlocalhost\n\nroot * ./dist/\nfile_server\n\n$ mkdir -p dist && vim dist/index.html && cat dist/index.html\n<!DOCTYPE html>\n<html>\n        <head>\n                <title>Caddy index</title>\n        </head>\n        <body>\n    <p>I am a index.html</p>\n        </body>\n</html>\n\n$ ls\nCaddyfile  caddy.html  dist  README.md\n\n$ sudo caddy reload\n\n$ curl https://localhost/\n<!DOCTYPE html>\n<html>\n        <head>\n                <title>Caddy index</title>\n        </head>\n        <body>\n    <p>I am a index.html</p>\n        </body>\n</html>\n\n```\n\n前面我们说过日志文件的问题，这里也可以自己定义日志文件的去处，而不仅仅在命令行上查看。\n\n```bash\n$ vim Caddyfile && cat Caddyfile\nlocalhost {\n  root * ./dist/\n  file_server\n  log {\n      output file ./dist/access.log\n      format json # 日志格式包含\n  }\n}\n\n$ sudo caddy reload\n2025/05/02 15:38:44.434 INFO    using adjacent Caddyfile\n2025/05/02 15:38:44.435 INFO    adapted config to JSON  {\"adapter\": \"caddyfile\"}\n2025/05/02 15:38:44.435 WARN    Caddyfile input is not formatted; run 'caddy fmt --overwrite' to fix inconsistencies    {\"adapter\": \"caddyfile\", \"file\": \"Caddyfile\", \"line\": 2}\n\n$ curl https://localhost/\n<!DOCTYPE html>\n<html>\n        <head>\n                <title>Caddy index</title>\n        </head>\n        <body>\n    <p>I am a index.html</p>\n        </body>\n</html>\n\n$ sudo cat dist/access.log # 注意需要提高权限\n{\"level\":\"info\",\"ts\":1746200328.3812969,\"logger\":\"http.log.access.log0\",\"msg\":\"handled request\",\"request\":{\"remote_ip\":\"::1\",\"remote_port\":\"39740\",\"client_ip\":\"::1\",\"proto\":\"HTTP/2.0\",\"method\":\"GET\",\"host\":\"localhost\",\"uri\":\"/\",\"headers\":{\"User-Agent\":[\"curl/8.5.0\"],\"Accept\":[\"*/*\"]},\"tls\":{\"resumed\":false,\"version\":772,\"cipher_suite\":4865,\"proto\":\"h2\",\"server_name\":\"localhost\"}},\"bytes_read\":0,\"user_id\":\"\",\"duration\":0.000096963,\"size\":123,\"status\":200,\"resp_headers\":{\"Last-Modified\":[\"Fri, 02 May 2025 15:31:34 GMT\"],\"Accept-Ranges\":[\"bytes\"],\"Content-Length\":[\"123\"],\"Server\":[\"Caddy\"],\"Alt-Svc\":[\"h3=\\\":443\\\"; ma=2592000\"],\"Vary\":[\"Accept-Encoding\"],\"Etag\":[\"\\\"d9ls796hiq8d3f\\\"\"],\"Content-Type\":[\"text/html; charset=utf-8\"]}}\n\n$ sudo cat dist/access.log | jq # 或者用更加可见的方式\n{\n  \"level\": \"info\",\n  \"ts\": 1746200328.3812969,\n  \"logger\": \"http.log.access.log0\",\n  \"msg\": \"handled request\",\n  \"request\": {\n    \"remote_ip\": \"::1\",\n    \"remote_port\": \"39740\",\n    \"client_ip\": \"::1\",\n    \"proto\": \"HTTP/2.0\",\n    \"method\": \"GET\",\n    \"host\": \"localhost\",\n    \"uri\": \"/\",\n    \"headers\": {\n      \"User-Agent\": [\n        \"curl/8.5.0\"\n      ],\n      \"Accept\": [\n        \"*/*\"\n      ]\n    },\n    \"tls\": {\n      \"resumed\": false,\n      \"version\": 772,\n      \"cipher_suite\": 4865,\n      \"proto\": \"h2\",\n      \"server_name\": \"localhost\"\n    }\n  },\n  \"bytes_read\": 0,\n  \"user_id\": \"\",\n  \"duration\": 0.000096963,\n  \"size\": 123,\n  \"status\": 200,\n  \"resp_headers\": {\n    \"Last-Modified\": [\n      \"Fri, 02 May 2025 15:31:34 GMT\"\n    ],\n    \"Accept-Ranges\": [\n      \"bytes\"\n    ],\n    \"Content-Length\": [\n      \"123\"\n    ],\n    \"Server\": [\n      \"Caddy\"\n    ],\n    \"Alt-Svc\": [\n      \"h3=\\\":443\\\"; ma=2592000\"\n    ],\n    \"Vary\": [\n      \"Accept-Encoding\"\n    ],\n    \"Etag\": [\n      \"\\\"d9ls796hiq8d3f\\\"\"\n    ],\n    \"Content-Type\": [\n      \"text/html; charset=utf-8\"\n    ]\n  }\n}\n\n```\n\n### 1.5.2.Caddy 的代理服务部署\n\n做反向代理也是很快的，下面展示的两个例子就是基于匹配器的代理语法。\n\n```bash\nlocalhost {\n    file_server\n    reverse_proxy 127.0.0.1:9005\n}\n```\n\n```bash\nlocalhost {\n    reverse_proxy /api/* 127.0.0.1:9005\n    file_server\n}\n```\n\n## 1.6.Caddy 的深入内容\n\n可以看出 `Caddy` 非常简洁，下面提供一些资料供您参考：\n\n-   [更详细的命令操作](https://caddyserver.com/docs/command-line)\n-   [更详细的管理接口](https://caddyserver.com/docs/api)\n-   [更详细的原理解读](https://caddyserver.com/docs/architecture)\n-   [更详细的拓展开发](https://caddyserver.com/docs/extending-caddy)\n\n官方文档非常易读，请仔细查阅...","excerpt":"","includedFiles":[],"tasklistId":0,"title":"1.Nginx","headers":[{"level":2,"title":"1.1.Nginx 的安装启动","slug":"_1-1-nginx-的安装启动","link":"#_1-1-nginx-的安装启动","children":[]},{"level":2,"title":"1.2.Nginx 的相关查看","slug":"_1-2-nginx-的相关查看","link":"#_1-2-nginx-的相关查看","children":[{"level":3,"title":"1.2.1.配置目录","slug":"_1-2-1-配置目录","link":"#_1-2-1-配置目录","children":[]},{"level":3,"title":"1.2.2.日志目录","slug":"_1-2-2-日志目录","link":"#_1-2-2-日志目录","children":[]}]},{"level":2,"title":"1.3.Nginx 的具体操作","slug":"_1-3-nginx-的具体操作","link":"#_1-3-nginx-的具体操作","children":[]},{"level":2,"title":"1.4.Nginx 的配置结构","slug":"_1-4-nginx-的配置结构","link":"#_1-4-nginx-的配置结构","children":[]},{"level":2,"title":"1.5.Nginx 的主要用途","slug":"_1-5-nginx-的主要用途","link":"#_1-5-nginx-的主要用途","children":[{"level":3,"title":"1.5.1.Nginx 的静态网站部署","slug":"_1-5-1-nginx-的静态网站部署","link":"#_1-5-1-nginx-的静态网站部署","children":[]},{"level":3,"title":"1.5.2.Nginx 的代理服务部署","slug":"_1-5-2-nginx-的代理服务部署","link":"#_1-5-2-nginx-的代理服务部署","children":[]}]},{"level":2,"title":"1.6.Nginx 的深入内容","slug":"_1-6-nginx-的深入内容","link":"#_1-6-nginx-的深入内容","children":[{"level":3,"title":"1.6.1.配置访问密码","slug":"_1-6-1-配置访问密码","link":"#_1-6-1-配置访问密码","children":[]}]},{"level":2,"title":"1.1.Caddy 的安装启动","slug":"_1-1-caddy-的安装启动","link":"#_1-1-caddy-的安装启动","children":[]},{"level":2,"title":"1.2.Caddy 的相关查看","slug":"_1-2-caddy-的相关查看","link":"#_1-2-caddy-的相关查看","children":[{"level":3,"title":"1.2.1.配置内容","slug":"_1-2-1-配置内容","link":"#_1-2-1-配置内容","children":[]},{"level":3,"title":"1.2.2.日志内容","slug":"_1-2-2-日志内容","link":"#_1-2-2-日志内容","children":[]}]},{"level":2,"title":"1.3.Caddy 的具体操作","slug":"_1-3-caddy-的具体操作","link":"#_1-3-caddy-的具体操作","children":[]},{"level":2,"title":"1.4.Caddy 的配置结构","slug":"_1-4-caddy-的配置结构","link":"#_1-4-caddy-的配置结构","children":[]},{"level":2,"title":"1.5.Caddy 的主要用途","slug":"_1-5-caddy-的主要用途","link":"#_1-5-caddy-的主要用途","children":[{"level":3,"title":"1.5.1.Caddy 的静态网站部署","slug":"_1-5-1-caddy-的静态网站部署","link":"#_1-5-1-caddy-的静态网站部署","children":[]},{"level":3,"title":"1.5.2.Caddy 的代理服务部署","slug":"_1-5-2-caddy-的代理服务部署","link":"#_1-5-2-caddy-的代理服务部署","children":[]}]},{"level":2,"title":"1.6.Caddy 的深入内容","slug":"_1-6-caddy-的深入内容","link":"#_1-6-caddy-的深入内容","children":[]}]}}
