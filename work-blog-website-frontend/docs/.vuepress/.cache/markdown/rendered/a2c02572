{"content":"<p>[TOC]</p>\n<blockquote>\n<p>概要：...</p>\n</blockquote>\n<blockquote>\n<p>资料：...</p>\n</blockquote>\n<hr>\n<h1 id=\"_1-断言\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-断言\"><span>1.断言</span></a></h1>\n<p><code v-pre>IDEA</code> 中默认 <code v-pre>assert</code> 是关闭，开启方式为：设置 <code v-pre>jvm</code> 的参数，参数为 <code v-pre>-enableassertions</code> 或 <code v-pre>-ea</code> 即可（对应的命令行就是 <code v-pre>java -ea MyApp</code>）。</p>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114190245266.png\" alt=\"image-20240114190245266\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114190245266</figcaption></figure>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114190241867.png\" alt=\"image-20240114190241867\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114190241867</figcaption></figure>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114191634523.png\" alt=\"image-20240114191634523\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114191634523</figcaption></figure>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 使用断言</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> static</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">String</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[]</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> args</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        int</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> a</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        assert</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">a </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/* 输出结果</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">Exception in thread \"main\" java.lang.AssertionError</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">\tat Main.main(Main.java: 5)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">*/</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>吐槽：老实说，断言这种机制比较少用，一般 <code v-pre>Java</code> 排错都是使用异常和日志。</p>\n</blockquote>\n<h1 id=\"_2-异常\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-异常\"><span>2.异常</span></a></h1>\n<p><code v-pre>Java</code> 拥有和 <code v-pre>Cpp</code> 类似的异常体系，其继承关系如下。</p>\n<Mermaid code=\"eJxLL0osyFAI8uEKySjKL09Myknlci0qyi9S0NW1q1HySixLVHixf8KLhT3Ppm97vnn3893zn7a1vmxe8Wxq68tZc551THuxteXZrgkvGqY/3bBXAyL3dE/T0x07NJVqFJAMrUhOLSjJzM9DMvjJjrUv586DGA81G6zz+ayWp63bnuye9qyz4dmcToigxtMl03CYHVSaV5KZm4pmxfM9056v6AbaAdEC1AFXwKWnp4emGmIhyGZM1QAYx5ec\"></Mermaid><p>其中派生于 <code v-pre>Error</code> 和 <code v-pre>RuntimeException</code> 的异常都属于 <strong>非检查型异常</strong>（程序员通常在前者可以预防），而其他的异常都是 <strong>检查型异常</strong>（可能程序员不一定找得到）。</p>\n<p><code v-pre>C/Cpp</code> 中有些程序使用返回值来告知用户出现错误，这是早期的实践，虽然可以解决问题但是会带来一些比较经典的麻烦，因此 <code v-pre>Java</code> 中的异常机制就是让错误提示从方法返回值中剥离出来，异常提供了检错的机制。</p>\n<p>通常方法会在方法签名的最后加上 <code v-pre>throws 异常类型</code> 子句的方式声明调用方法者：该方法有可能抛出某类型的异常（没有这个子句声明但是却抛出了异常就会报错）。</p>\n<p>所谓的抛出异常，实际上就是抛出了被继承的异常类所创建的异常对象，通过 <code v-pre>throws</code> 关键字在方法内部进行实际的抛出，然后交给较外层进行捕获检查。</p>\n<p>到底在什么时候抛出异常呢？只要有检查型异常就一定做抛出。</p>\n<ul>\n<li>本方法内部调用了可能抛出检查型异常的方法</li>\n<li>本方法自己遇到某些错误主动抛出检查型异常</li>\n</ul>\n<p>剩下的异常，要么是您几乎无法解决的（<code v-pre>Error</code>），要么是您可以在编码中提前预防的（<code v-pre>RuntimeException</code>）。</p>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 尝试使用异常, 并且抛出所有的检查型异常</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> java</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">io</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> FileProcessor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    /**</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * 读取文件内容并打印，如果文件不存在或者读取过程中出现 IO 异常，则抛出 IOException。</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     *</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">@param</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> fileName</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> 文件名</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">@throws</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> IOException</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> 如果读取文件失败</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     */</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> readFile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">String </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> throws</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> IOException </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        try</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">BufferedReader</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> BufferedReader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> FileReader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)))</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            String</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> line</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            while</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ((</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">line </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">readLine</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> !=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> null</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">                System</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">out</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">println</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">line</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> catch</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">IOException </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">            // 可以根据具体情况选择处理异常或者继续向上抛出</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            throw</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> IOException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Failed to read file </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 这里把异常的原因也加上了再重新抛出去</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> static</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">String</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[]</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> args</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        FileProcessor</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> processor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> FileProcessor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        try</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">            processor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">readFile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">example.txt</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> catch</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">IOException </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">            System</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">println</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">An error occurred while processing the file: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">getMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果没有现有的异常符合您的需求，就可以自定义一个继承的子异常类，通常该类内部需要包含一个空参数构造器和字符串参数构造器（字符串主要是描述异常信息的）。</p>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 尝试自定义异常类</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> CustomException</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> extends</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> Exception</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    // 空参数构造器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> CustomException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        super</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 调用父类的构造器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    // 字符串参数构造器，用于传递异常信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> CustomException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">String </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">message</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        super</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">message</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 调用父类的构造器，传入异常信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>补充：一旦方法抛出异常，就不会返回到调用者，因此不必操心方法的此时的返回值，已经无关紧要了。</p>\n</blockquote>\n<blockquote>\n<p>补充：关于 <code v-pre>finally</code> 和 <code v-pre>resources</code> 待补充...还有堆栈轨迹...</p>\n</blockquote>\n<h1 id=\"_3-日志\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-日志\"><span>3.日志</span></a></h1>\n<p>日志的部分以后再补充...</p>\n<blockquote>\n<p>补充：了解 <code v-pre>Logback</code> 日志框架。</p>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240716124643889.png\" alt=\"image-20240716124643889\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240716124643889</figcaption></figure>\n</blockquote>\n<hr>\n<blockquote>\n<p>结语：...</p>\n</blockquote>\n","env":{"base":"/","filePath":"/home/ljp/git/work/work-blog-website/work-blog-website-frontend/docs/1.编程语言/4.Java/005_limou_2024_07_06_java_断言、异常、日志.md","filePathRelative":"1.编程语言/4.Java/005_limou_2024_07_06_java_断言、异常、日志.md","frontmatter":{"createTime":"2025/06/21 15:33:58","permalink":"/1.编程语言/gwlhocfk/"},"sfcBlocks":{"template":{"type":"template","content":"<template><p>[TOC]</p>\n<blockquote>\n<p>概要：...</p>\n</blockquote>\n<blockquote>\n<p>资料：...</p>\n</blockquote>\n<hr>\n<h1 id=\"_1-断言\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-断言\"><span>1.断言</span></a></h1>\n<p><code v-pre>IDEA</code> 中默认 <code v-pre>assert</code> 是关闭，开启方式为：设置 <code v-pre>jvm</code> 的参数，参数为 <code v-pre>-enableassertions</code> 或 <code v-pre>-ea</code> 即可（对应的命令行就是 <code v-pre>java -ea MyApp</code>）。</p>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114190245266.png\" alt=\"image-20240114190245266\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114190245266</figcaption></figure>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114190241867.png\" alt=\"image-20240114190241867\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114190241867</figcaption></figure>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114191634523.png\" alt=\"image-20240114191634523\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114191634523</figcaption></figure>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 使用断言</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> static</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">String</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[]</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> args</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        int</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> a</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        assert</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">a </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/* 输出结果</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">Exception in thread \"main\" java.lang.AssertionError</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">\tat Main.main(Main.java: 5)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">*/</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>吐槽：老实说，断言这种机制比较少用，一般 <code v-pre>Java</code> 排错都是使用异常和日志。</p>\n</blockquote>\n<h1 id=\"_2-异常\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-异常\"><span>2.异常</span></a></h1>\n<p><code v-pre>Java</code> 拥有和 <code v-pre>Cpp</code> 类似的异常体系，其继承关系如下。</p>\n<Mermaid code=\"eJxLL0osyFAI8uEKySjKL09Myknlci0qyi9S0NW1q1HySixLVHixf8KLhT3Ppm97vnn3893zn7a1vmxe8Wxq68tZc551THuxteXZrgkvGqY/3bBXAyL3dE/T0x07NJVqFJAMrUhOLSjJzM9DMvjJjrUv586DGA81G6zz+ayWp63bnuye9qyz4dmcToigxtMl03CYHVSaV5KZm4pmxfM9056v6AbaAdEC1AFXwKWnp4emGmIhyGZM1QAYx5ec\"></Mermaid><p>其中派生于 <code v-pre>Error</code> 和 <code v-pre>RuntimeException</code> 的异常都属于 <strong>非检查型异常</strong>（程序员通常在前者可以预防），而其他的异常都是 <strong>检查型异常</strong>（可能程序员不一定找得到）。</p>\n<p><code v-pre>C/Cpp</code> 中有些程序使用返回值来告知用户出现错误，这是早期的实践，虽然可以解决问题但是会带来一些比较经典的麻烦，因此 <code v-pre>Java</code> 中的异常机制就是让错误提示从方法返回值中剥离出来，异常提供了检错的机制。</p>\n<p>通常方法会在方法签名的最后加上 <code v-pre>throws 异常类型</code> 子句的方式声明调用方法者：该方法有可能抛出某类型的异常（没有这个子句声明但是却抛出了异常就会报错）。</p>\n<p>所谓的抛出异常，实际上就是抛出了被继承的异常类所创建的异常对象，通过 <code v-pre>throws</code> 关键字在方法内部进行实际的抛出，然后交给较外层进行捕获检查。</p>\n<p>到底在什么时候抛出异常呢？只要有检查型异常就一定做抛出。</p>\n<ul>\n<li>本方法内部调用了可能抛出检查型异常的方法</li>\n<li>本方法自己遇到某些错误主动抛出检查型异常</li>\n</ul>\n<p>剩下的异常，要么是您几乎无法解决的（<code v-pre>Error</code>），要么是您可以在编码中提前预防的（<code v-pre>RuntimeException</code>）。</p>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 尝试使用异常, 并且抛出所有的检查型异常</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> java</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">io</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> FileProcessor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    /**</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * 读取文件内容并打印，如果文件不存在或者读取过程中出现 IO 异常，则抛出 IOException。</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     *</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">@param</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> fileName</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> 文件名</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">@throws</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> IOException</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> 如果读取文件失败</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     */</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> readFile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">String </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> throws</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> IOException </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        try</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">BufferedReader</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> BufferedReader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> FileReader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)))</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            String</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> line</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            while</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ((</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">line </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">readLine</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> !=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> null</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">                System</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">out</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">println</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">line</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> catch</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">IOException </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">            // 可以根据具体情况选择处理异常或者继续向上抛出</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            throw</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> IOException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Failed to read file </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 这里把异常的原因也加上了再重新抛出去</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> static</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">String</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[]</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> args</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        FileProcessor</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> processor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> FileProcessor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        try</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">            processor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">readFile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">example.txt</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> catch</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">IOException </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">            System</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">println</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">An error occurred while processing the file: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">getMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果没有现有的异常符合您的需求，就可以自定义一个继承的子异常类，通常该类内部需要包含一个空参数构造器和字符串参数构造器（字符串主要是描述异常信息的）。</p>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 尝试自定义异常类</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> CustomException</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> extends</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> Exception</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    // 空参数构造器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> CustomException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        super</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 调用父类的构造器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    // 字符串参数构造器，用于传递异常信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> CustomException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">String </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">message</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        super</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">message</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 调用父类的构造器，传入异常信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>补充：一旦方法抛出异常，就不会返回到调用者，因此不必操心方法的此时的返回值，已经无关紧要了。</p>\n</blockquote>\n<blockquote>\n<p>补充：关于 <code v-pre>finally</code> 和 <code v-pre>resources</code> 待补充...还有堆栈轨迹...</p>\n</blockquote>\n<h1 id=\"_3-日志\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-日志\"><span>3.日志</span></a></h1>\n<p>日志的部分以后再补充...</p>\n<blockquote>\n<p>补充：了解 <code v-pre>Logback</code> 日志框架。</p>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240716124643889.png\" alt=\"image-20240716124643889\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240716124643889</figcaption></figure>\n</blockquote>\n<hr>\n<blockquote>\n<p>结语：...</p>\n</blockquote>\n</template>","contentStripped":"<p>[TOC]</p>\n<blockquote>\n<p>概要：...</p>\n</blockquote>\n<blockquote>\n<p>资料：...</p>\n</blockquote>\n<hr>\n<h1 id=\"_1-断言\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-断言\"><span>1.断言</span></a></h1>\n<p><code v-pre>IDEA</code> 中默认 <code v-pre>assert</code> 是关闭，开启方式为：设置 <code v-pre>jvm</code> 的参数，参数为 <code v-pre>-enableassertions</code> 或 <code v-pre>-ea</code> 即可（对应的命令行就是 <code v-pre>java -ea MyApp</code>）。</p>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114190245266.png\" alt=\"image-20240114190245266\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114190245266</figcaption></figure>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114190241867.png\" alt=\"image-20240114190241867\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114190241867</figcaption></figure>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240114191634523.png\" alt=\"image-20240114191634523\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240114191634523</figcaption></figure>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 使用断言</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> static</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">String</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[]</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> args</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        int</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> a</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        assert</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">a </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> b</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/* 输出结果</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">Exception in thread \"main\" java.lang.AssertionError</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">\tat Main.main(Main.java: 5)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">*/</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>吐槽：老实说，断言这种机制比较少用，一般 <code v-pre>Java</code> 排错都是使用异常和日志。</p>\n</blockquote>\n<h1 id=\"_2-异常\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-异常\"><span>2.异常</span></a></h1>\n<p><code v-pre>Java</code> 拥有和 <code v-pre>Cpp</code> 类似的异常体系，其继承关系如下。</p>\n<Mermaid code=\"eJxLL0osyFAI8uEKySjKL09Myknlci0qyi9S0NW1q1HySixLVHixf8KLhT3Ppm97vnn3893zn7a1vmxe8Wxq68tZc551THuxteXZrgkvGqY/3bBXAyL3dE/T0x07NJVqFJAMrUhOLSjJzM9DMvjJjrUv586DGA81G6zz+ayWp63bnuye9qyz4dmcToigxtMl03CYHVSaV5KZm4pmxfM9056v6AbaAdEC1AFXwKWnp4emGmIhyGZM1QAYx5ec\"></Mermaid><p>其中派生于 <code v-pre>Error</code> 和 <code v-pre>RuntimeException</code> 的异常都属于 <strong>非检查型异常</strong>（程序员通常在前者可以预防），而其他的异常都是 <strong>检查型异常</strong>（可能程序员不一定找得到）。</p>\n<p><code v-pre>C/Cpp</code> 中有些程序使用返回值来告知用户出现错误，这是早期的实践，虽然可以解决问题但是会带来一些比较经典的麻烦，因此 <code v-pre>Java</code> 中的异常机制就是让错误提示从方法返回值中剥离出来，异常提供了检错的机制。</p>\n<p>通常方法会在方法签名的最后加上 <code v-pre>throws 异常类型</code> 子句的方式声明调用方法者：该方法有可能抛出某类型的异常（没有这个子句声明但是却抛出了异常就会报错）。</p>\n<p>所谓的抛出异常，实际上就是抛出了被继承的异常类所创建的异常对象，通过 <code v-pre>throws</code> 关键字在方法内部进行实际的抛出，然后交给较外层进行捕获检查。</p>\n<p>到底在什么时候抛出异常呢？只要有检查型异常就一定做抛出。</p>\n<ul>\n<li>本方法内部调用了可能抛出检查型异常的方法</li>\n<li>本方法自己遇到某些错误主动抛出检查型异常</li>\n</ul>\n<p>剩下的异常，要么是您几乎无法解决的（<code v-pre>Error</code>），要么是您可以在编码中提前预防的（<code v-pre>RuntimeException</code>）。</p>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 尝试使用异常, 并且抛出所有的检查型异常</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> java</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">io</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">*</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> FileProcessor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    /**</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * 读取文件内容并打印，如果文件不存在或者读取过程中出现 IO 异常，则抛出 IOException。</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     *</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">@param</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> fileName</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> 文件名</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     * </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">@throws</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> IOException</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> 如果读取文件失败</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">     */</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> readFile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">String </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> throws</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> IOException </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        try</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">BufferedReader</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> BufferedReader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> FileReader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)))</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">            String</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> line</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            while</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ((</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">line </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> reader</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">readLine</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">())</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> !=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> null</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">                System</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">out</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">println</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">line</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">            }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> catch</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">IOException </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">            // 可以根据具体情况选择处理异常或者继续向上抛出</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">            throw</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> IOException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Failed to read file </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fileName</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 这里把异常的原因也加上了再重新抛出去</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> Main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> static</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">String</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[]</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> args</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">        FileProcessor</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> processor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> =</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> new</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> FileProcessor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        try</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">            processor</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">readFile</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">example.txt</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> catch</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">IOException </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">            System</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">err</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">println</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">An error occurred while processing the file: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> e</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">getMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">());</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">        }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果没有现有的异常符合您的需求，就可以自定义一个继承的子异常类，通常该类内部需要包含一个空参数构造器和字符串参数构造器（字符串主要是描述异常信息的）。</p>\n<div class=\"language-java line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"java\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-java\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 尝试自定义异常类</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">public</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> class</span><span style=\"--shiki-light:#2E8F82;--shiki-dark:#5DA994\"> CustomException</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> extends</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> Exception</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    // 空参数构造器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> CustomException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        super</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">();</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 调用父类的构造器</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">    // 字符串参数构造器，用于传递异常信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    public</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> CustomException</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">String </span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">message</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">        super</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">message</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> // 调用父类的构造器，传入异常信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><blockquote>\n<p>补充：一旦方法抛出异常，就不会返回到调用者，因此不必操心方法的此时的返回值，已经无关紧要了。</p>\n</blockquote>\n<blockquote>\n<p>补充：关于 <code v-pre>finally</code> 和 <code v-pre>resources</code> 待补充...还有堆栈轨迹...</p>\n</blockquote>\n<h1 id=\"_3-日志\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-日志\"><span>3.日志</span></a></h1>\n<p>日志的部分以后再补充...</p>\n<blockquote>\n<p>补充：了解 <code v-pre>Logback</code> 日志框架。</p>\n<figure><img src=\"@source/1.编程语言/4.Java/assets/image-20240716124643889.png\" alt=\"image-20240716124643889\" tabindex=\"0\" loading=\"lazy\"><figcaption>image-20240716124643889</figcaption></figure>\n</blockquote>\n<hr>\n<blockquote>\n<p>结语：...</p>\n</blockquote>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"[TOC]\n\n>   概要：...\n\n>   资料：...\n\n---\n\n# 1.断言\n\n`IDEA` 中默认 `assert` 是关闭，开启方式为：设置 `jvm` 的参数，参数为 `-enableassertions` 或 `-ea` 即可（对应的命令行就是 `java -ea MyApp`）。\n\n![image-20240114190245266](./assets/image-20240114190245266.png)\n\n![image-20240114190241867](./assets/image-20240114190241867.png)\n\n![image-20240114191634523](./assets/image-20240114191634523.png)\n\n```java\n// 使用断言\npublic class Main {\n    public static void main(String[] args) {\n        int a = 1, b = 2;\n        assert (a > b);\n    }\n}\n/* 输出结果\nException in thread \"main\" java.lang.AssertionError\n\tat Main.main(Main.java: 5)\n*/\n```\n\n>   吐槽：老实说，断言这种机制比较少用，一般 `Java` 排错都是使用异常和日志。\n\n# 2.异常\n\n`Java` 拥有和 `Cpp` 类似的异常体系，其继承关系如下。\n\n```mermaid\ngraph RL\nThrowable\nError -->|\"Java 运行时系统内部故障或资源耗尽(内部异常)\"| Throwable\nException -->|\"Java 中非运行系统异常的其他所有异常(外部异常)\"| Throwable\nRuntimeException -->|\"编程中异常\"| Exception\n...Exception -->|\"其他的异常\"| Exception\n```\n\n其中派生于 `Error` 和 `RuntimeException` 的异常都属于 **非检查型异常**（程序员通常在前者可以预防），而其他的异常都是 **检查型异常**（可能程序员不一定找得到）。\n\n`C/Cpp` 中有些程序使用返回值来告知用户出现错误，这是早期的实践，虽然可以解决问题但是会带来一些比较经典的麻烦，因此 `Java` 中的异常机制就是让错误提示从方法返回值中剥离出来，异常提供了检错的机制。\n\n通常方法会在方法签名的最后加上 `throws 异常类型` 子句的方式声明调用方法者：该方法有可能抛出某类型的异常（没有这个子句声明但是却抛出了异常就会报错）。\n\n所谓的抛出异常，实际上就是抛出了被继承的异常类所创建的异常对象，通过 `throws` 关键字在方法内部进行实际的抛出，然后交给较外层进行捕获检查。\n\n到底在什么时候抛出异常呢？只要有检查型异常就一定做抛出。\n\n-   本方法内部调用了可能抛出检查型异常的方法\n-   本方法自己遇到某些错误主动抛出检查型异常\n\n剩下的异常，要么是您几乎无法解决的（`Error`），要么是您可以在编码中提前预防的（`RuntimeException`）。\n\n```java\n// 尝试使用异常, 并且抛出所有的检查型异常\nimport java.io.*;\n\nclass FileProcessor {\n\n    /**\n     * 读取文件内容并打印，如果文件不存在或者读取过程中出现 IO 异常，则抛出 IOException。\n     *\n     * @param fileName 文件名\n     * @throws IOException 如果读取文件失败\n     */\n    public void readFile(String fileName) throws IOException {\n        try (BufferedReader reader = new BufferedReader(new FileReader(fileName))) {\n            String line;\n            while ((line = reader.readLine()) != null) {\n                System.out.println(line);\n            }\n        } catch (IOException e) {\n            // 可以根据具体情况选择处理异常或者继续向上抛出\n            throw new IOException(\"Failed to read file \" + fileName, e); // 这里把异常的原因也加上了再重新抛出去\n        }\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        FileProcessor processor = new FileProcessor();\n        try {\n            processor.readFile(\"example.txt\");\n        } catch (IOException e) {\n            System.err.println(\"An error occurred while processing the file: \" + e.getMessage());\n        }\n    }\n}\n```\n\n如果没有现有的异常符合您的需求，就可以自定义一个继承的子异常类，通常该类内部需要包含一个空参数构造器和字符串参数构造器（字符串主要是描述异常信息的）。\n\n```java\n// 尝试自定义异常类\npublic class CustomException extends Exception {\n\n    // 空参数构造器\n    public CustomException() {\n        super(); // 调用父类的构造器\n    }\n\n    // 字符串参数构造器，用于传递异常信息\n    public CustomException(String message) {\n        super(message); // 调用父类的构造器，传入异常信息\n    }\n}\n```\n\n>   补充：一旦方法抛出异常，就不会返回到调用者，因此不必操心方法的此时的返回值，已经无关紧要了。\n\n>   补充：关于 `finally` 和 `resources` 待补充...还有堆栈轨迹...\n\n# 3.日志\n\n日志的部分以后再补充...\n\n>   补充：了解 `Logback` 日志框架。\n>\n>   ![image-20240716124643889](./assets/image-20240716124643889.png)\n\n---\n\n>   结语：...","excerpt":"","includedFiles":[],"tasklistId":0,"title":"1.断言","headers":[]}}
