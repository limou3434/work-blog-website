{"content":"<h1 id=\"_1-make\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-make\"><span>1.Make</span></a></h1>\n<h2 id=\"_1-1-make-的概念\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-make-的概念\"><span>1.1.Make 的概念</span></a></h2>\n<p><code v-pre>make</code> 是一个指令，<code v-pre>makefile</code> 是一个在当前目录下存在的一个具有特定格式的文件。</p>\n<p>如果在 <code v-pre>Linux</code> 中编写了大量的代码文件，难不成要一个一个使用 <code v-pre>gcc/h++</code> 编译吗，要是代码出了问题，修改后又需要编译怎么办？因此出现了 <code v-pre>make</code> 这样的自动化构建工具。</p>\n<h2 id=\"_1-2-make-的使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-make-的使用\"><span>1.2.Make 的使用</span></a></h2>\n<h3 id=\"_1-2-1-编写代码文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-编写代码文件\"><span>1.2.1.编写代码文件</span></a></h3>\n<p>先在一个目录下编写一个或多个 <code v-pre>.c</code> 源文件。</p>\n<h3 id=\"_1-2-2-编写构建文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-编写构建文件\"><span>1.2.2.编写构建文件</span></a></h3>\n<ol>\n<li>\n<p>首先 <code v-pre>touch</code> 一个 <code v-pre>makefile</code> 文件</p>\n</li>\n<li>\n<p><code v-pre>makefile</code> 内部编写目标文件、依赖文件列表、依赖方法</p>\n</li>\n<li>\n<p>写入用作清理的伪目标，<code v-pre>.PHONY</code> 是修饰伪目标的关键字</p>\n</li>\n</ol>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># make 指令自顶向下执行，如果直接使用 make 指令就会执行第一份依赖命令</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#目标文件: 依赖文件列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#   依赖方法（Linux 下的命令）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#.PHONY: 伪目标（重点是执行方法而不是目的（“phony”即“假的，伪的”））</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#   依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #没有依赖关系，设定为伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ol start=\"4\">\n<li>使用 <code v-pre>make</code> 指令运行 <code v-pre>makefile</code> 文件，不指定目标直接使用 <code v-pre>make</code> 指令，就会自动找第一对依赖关系和依赖方法（即 <code v-pre>makefile</code> 的第一个目标）。</li>\n</ol>\n<h3 id=\"_1-2-3-运行构建工具\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-运行构建工具\"><span>1.2.3.运行构建工具</span></a></h3>\n<h4 id=\"_1-2-3-1-尝试构建\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-1-尝试构建\"><span>1.2.3.1.尝试构建</span></a></h4>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 尝试使用 make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include &#x3C;stdio.h></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    for(i</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> i</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> i++</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        printf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"%d \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    printf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"\\n\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> make</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 20</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rwxrwxr-x</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8408</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:54</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">   62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 16</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 25</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 36</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 49</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 64</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 81</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> make</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> clean</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-2-3-2-重复执行\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-2-重复执行\"><span>1.2.3.2.重复执行</span></a></h4>\n<p>很多书都会写：“伪目标总是会被执行的”。例如：</p>\n<ol>\n<li>\n<p><code v-pre>make run/make</code> 指令是不能被重复调用的（会显示 <code v-pre>make:'run' is up to date.</code>。\n除非我们要编译的源文件的最近修改时间发生了变动，也就是说如果源文件没有经过修改，<code v-pre>make run</code> 是不会再次编译的，因为这样做的效率低下（大型的文件编译的时间非常久））。\n另外如果我们对源文件使用 <code v-pre>touch</code> 指令更新修改时间，那么就也是能重复使用 <code v-pre>make main</code> 指令。</p>\n</li>\n<li>\n<p>但 <code v-pre>make clean</code> 指令总是可以被调用的。因此“总是被执行”的另外一个说法是“总是会根据依赖关系，执行依赖方法”。</p>\n</li>\n</ol>\n<blockquote>\n<p>补充：使用 <code v-pre>stat</code> 可以查看文件的三个重要时间</p>\n<ol>\n<li>\n<p><code v-pre>Access</code>：文件最近被访问的时间（即：读取的时候，<code v-pre>touch</code> 只更改这个时间，但是由于 <code v-pre>Access</code> 也是属性，所以这个改动也会同时改动 <code v-pre>Change</code> 属性），如果修改了文件也算访问。不过由于读取文件是高频工作，因此 <code v-pre>Linux</code> 修改了内核，只会在一定时间后进行修改，不会读取一次就修改一次（每次都修改就会导致反复访问磁盘，导致效率低下）</p>\n</li>\n<li>\n<p><code v-pre>Modify</code>：文件的最近内容修改时间（<code v-pre>make</code> 指令就是看这个文件来确认是否要重新编译的），不过有的时候改变内容会改变大小，导致文件的属性变化，<code v-pre>Change</code> 也发生了变化</p>\n</li>\n<li>\n<p><code v-pre>Change</code>：文件的最近属性修改时间，比如：文件权限的设置、文件的大小改变</p>\n</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>注意：文件改变的本质不是时间变化，而是随着时间文件内容产生新旧内容。</p>\n</blockquote>\n<h4 id=\"_1-2-3-3-自动推导\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-3-自动推导\"><span>1.2.3.3.自动推导</span></a></h4>\n<p><code v-pre>make</code> 可以进行自动推导（嵌套代码），但是一般不建议像下面这么写，只是为了证明 <code v-pre>make</code> 可以自动推导这一现象：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">main.o:main.s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -c</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.s</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mian.s:main.i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mian.i</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mian.s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mian.i:mian.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -E</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.i</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.i</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-2-3-4-拓展学习\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-4-拓展学习\"><span>1.2.3.4.拓展学习</span></a></h4>\n<p>上面的知识在平时的学习和使用中就很够用了，但是我们可以拓展学习一些其他的内容。</p>\n<ol>\n<li>\n<p>有的时候不希望打印出使用 <code v-pre>make</code> 命令的信息，这个时候可以在每个依赖方法前加上 <code v-pre>@</code> 符号，这样就不会回显信息了</p>\n</li>\n<li>\n<p>在 <code v-pre>makefile</code> 允许创建变量，因此我们上面的代码还可以改写为更加普遍的（变量的赋值一般不建议留空格，不过您其实可以将这种变量作为宏来理解）</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">cc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">gcc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">TAGET</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    $(cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -o </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> $(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n<li>\n<p><code v-pre>makefile</code> 还可以在依赖方法省略依赖关系用到的依赖文件列表和目标文件</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> $</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">^</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $@</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法，$^表示冒号右侧内容，$@表示冒号左侧的内容</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #没有依赖关系，设定为伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n</ol>\n<h1 id=\"_2-cmake\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-cmake\"><span>2.Cmake</span></a></h1>\n<h2 id=\"_2-1-cmake-的概念\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-1-cmake-的概念\"><span>2.1.Cmake 的概念</span></a></h2>\n<p>既然有了 <code v-pre>Make</code>，为什么会有 <code v-pre>CMake</code> 的存在呢？实际上，早期不同平台的 <code v-pre>Make</code> 面对大型项目难以维护，脚本编写和维护难度都比较高，并且不同平台有不同的编译链，迁移成本也比较高，因此就出现了 <code v-pre>CMake</code>，您可以 <a href=\"https://cmake.org/\" target=\"_blank\" rel=\"noopener noreferrer\">前去 CMake 的官网查看 Camke 的历史</a>，也可以 <a href=\"https://github.com/Kitware/CMake\" target=\"_blank\" rel=\"noopener noreferrer\">去 Github 上查看 CMake 的源代码</a>。另外，还有一份 <a href=\"https://cmake-doc.readthedocs.io/zh-cn/latest/guide/tutorial/A%20Basic%20Starting%20Point.html\" target=\"_blank\" rel=\"noopener noreferrer\">简单易懂的 CMake 官方教程</a> 也值得您查阅，不过也许是翻译的原因，有些地方读起来怪怪的，说得不是很清楚，所要这里关于 CMake 是对官方教程的补充的简化，旨在为您快速掌握 <code v-pre>CMake</code> 基础。</p>\n<blockquote>\n<p>吐槽：在 <code v-pre>Cpp</code> 领域日渐被蚕食的今天，<code v-pre>CMake</code> 才是 <code v-pre>Cpp</code> 的未来。</p>\n</blockquote>\n<h2 id=\"_2-2-cmake-的使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-cmake-的使用\"><span>2.2.Cmake 的使用</span></a></h2>\n<p>接下来我将在 <code v-pre>Linux</code> 系统上演示关于 <code v-pre>CMake</code> 的使用，我是用的是 <code v-pre>CMake 3.22.1</code>，如果您的版本何我不一样可能会有些一些操作需要变化，请您仔细查看本文。</p>\n<h3 id=\"_2-2-1-cmake-的基本使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-1-cmake-的基本使用\"><span>2.2.1.CMake 的基本使用</span></a></h3>\n<p>和 <code v-pre>Make</code> 类似，<code v-pre>Cmake</code> 也需要编写构建文件 <code v-pre>CMakeList.txt</code>，但是编写过程更加简单，功能更加强大。简单点，现在假设您的项目结构如下所示。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目结构</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">my_simple_project/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>在 <code v-pre>main.cpp</code> 文件中，您可以开始编写 <code v-pre>C/C++</code> 程序，例如：</p>\n<div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// main.cc: 计算给定数字的平方根并将结果输出到终端</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cmath</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cstdlib</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">string</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> char*</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argc </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Usage: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> number</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> double</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> inputValue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> atof</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> double</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> outputValue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sqrt</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">inputValue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">The square root of </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> inputValue </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> outputValue</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;&#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后开始 编写 <code v-pre>CMakeList.txt</code> 文件，<code v-pre>CMakeLists.txt</code> 文件主要由变量和指令构成，通过指令可以给一些 <code v-pre>CMake</code> 变量进行设置。</p>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cmake_minimum_required</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 3.10) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(my_simple_project) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD 11) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD_REQUIRED </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(my_executable main.cc) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>接下来要开始构建这个项目，不过您先需要在项目的根目录下（<code v-pre>MySimpleProject/</code>）<mark>使用 <code v-pre>mkdir bulid &amp;&amp; cd build</code></mark>，也就是创建构建文件夹后再进入该文件夹中开始 <mark>运行 <code v-pre>cmake ..</code> 命令</mark> 来生成构建目标，这样对构建文件的处理会比较好一下，因为 <code v-pre>CMake</code> 会把构建的目标和其他的某些自带配置文件、缓存文件等也一起放入其中。</p>\n<div class=\"language-sh line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"sh\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-sh\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始构建项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 创建并进入构建目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 运行 CMake 以生成构建系统</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/c++</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Configuring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Generating</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> have</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> been</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> written</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/root/tests/cmake_test/build</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  tree</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCache.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeFiles</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.22.1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCCompiler.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCXXCompiler.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDetermineCompilerABI_C.bin</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDetermineCompilerABI_CXX.bin</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeSystem.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CompilerIdC</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a.out</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCCompilerId.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CompilerIdCXX</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a.out</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCXXCompilerId.cpp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake.check_cache</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDirectoryInformation.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeOutput.log</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeTmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> my_executable.dir</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake_clean.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler_depend.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler_depend.ts</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> DependInfo.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> depend.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> flags.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> link.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> progress.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> progress.marks</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TargetDirectories.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake_install.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">8</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 28</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>不过 <code v-pre>CMake ..</code> 的执行并没有完成真正的编译构造，这一步只是执行了一系列的配置构建环境和生成构建文件，您可以看看上述执行后目录结构发生的变化，这里一步步解释多出来的文件。</p>\n<ul>\n<li>\n<p><code v-pre>CMakeCache.txt</code> 缓存文件，保存了 <code v-pre>CMake</code> 配置过程中生成的变量和选项。它包括编译器路径、库路径、<code v-pre>CMake</code> 配置选项等。这个文件可以帮助 <code v-pre>CMake</code> 在后续配置中快速获取信息，而不需要重新执行所有的检测</p>\n</li>\n<li>\n<p><code v-pre>CMakeFiles/</code> 这是一个包含各种 <code v-pre>CMake</code> 构建信息和临时文件的目录</p>\n<ul>\n<li>\n<p><code v-pre>3.22.1/</code> 这是 <code v-pre>CMake</code> 版本目录，用于存放与特定 <code v-pre>CMake</code> 版本相关的文件</p>\n<ul>\n<li><code v-pre>CMakeCCompiler.cmake</code> 记录了 <code v-pre>C</code> 编译器的配置，指导如何使用</li>\n<li><code v-pre>CMakeCXXCompiler.cmake</code> 记录了 <code v-pre>C++</code> 编译器的配置，指导如何使用</li>\n<li><code v-pre>CMakeDetermineCompilerABI_C.bin</code> 用于确定 <code v-pre>C</code> 编译器的 <code v-pre>ABI</code>（应用程序二进制接口）</li>\n<li><code v-pre>CMakeDetermineCompilerABI_CXX.bin</code> 用于确定 <code v-pre>C++</code> 编译器的 <code v-pre>ABI</code>（应用程序二进制接口）</li>\n<li><code v-pre>CMakeSystem.cmake</code> 记录系统信息，如操作系统、编译器版本等</li>\n<li><code v-pre>CompilerIdC/</code> 内部的文件检测 <code v-pre>C</code> 编译器的工具和信息，验证编译器的有效性</li>\n<li><code v-pre>CompilerIdCXX/</code> 内部的文件检测 <code v-pre>C++</code> 编译器的工具和信息，验证编译器的有效</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>cmake.check_cache</code> 缓存检查文件，在每次 <code v-pre>CMake</code> 运行时，它会检查 <code v-pre>CMakeCache.txt</code> 是否有变化。如果发现缓存中的某些设置或变量已被修改，有助于决定是否需要重新生成缓存或者进行重新配置</p>\n</li>\n<li>\n<p><code v-pre>CMakeDirectoryInformation.cmake</code> 目录信息文件，记录构建目录的相关信息</p>\n</li>\n<li>\n<p><code v-pre>CMakeOutput.log</code> 记录 <code v-pre>CMake</code> 配置过程的输出日志</p>\n</li>\n<li>\n<p><code v-pre>CMakeTmp</code> 临时文件目录，用于存放在构建过程中生成的临时文件</p>\n</li>\n<li>\n<p><code v-pre>Makefile2</code> 是一个由 <code v-pre>CMake</code> 生成的文件，通常作为 <code v-pre>Makefile</code> 的辅助文件，包含了构建过程的详细依赖规则和构建目标之间的依赖关系。它用于分离和组织 <code v-pre>Makefile</code> 中的复杂规则和依赖关系，使得主 <code v-pre>Makefile</code> 更加简洁</p>\n</li>\n<li>\n<p><code v-pre>Makefile.cmake</code>：用于将 <code v-pre>CMake</code> 指令和变量转换为适合 <code v-pre>Makefile</code> 系统使用的格式，它帮助 <code v-pre>CMake</code> 将 <code v-pre>CMakeLists.txt</code> 中定义的配置和规则转换为 <code v-pre>Makefile</code> 可执行的具体指令</p>\n</li>\n<li>\n<p><code v-pre>my_executable.dir/</code> 包含特定目标（例如 <code v-pre>my_executable</code>）的构建文件和信息，这里就不细细展开了，比较复杂...</p>\n</li>\n<li>\n<p><code v-pre>progress.marks</code> 文件用于跟踪构建过程中的进度信息，特别是在使用 <code v-pre>make</code> 或其他构建工具进行并行构建时。这个文件帮助 <code v-pre>CMake</code> 了解哪些构建任务已经完成、哪些还在进行中，从而可以在命令行上显示构建进度</p>\n</li>\n<li>\n<p><code v-pre>TargetDirectories.txt</code> 文件用于记录构建系统中各个目标（如可执行文件、库等）的输出目录信息。这个文件确保每个构建目标都能正确地生成到指定的目录中，并且这些目录的信息在整个构建过程中是可以访问的，避免路径错误或文件错位的情况</p>\n</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>cmake_install.cmake</code> 安装脚本文件，生成用于安装构建产物的 <code v-pre>CMake</code> 脚本，它通常用于执行 <code v-pre>make install</code> 或 <code v-pre>cmake --install</code> 命令时，指定如何安装编译生成的文件和库</p>\n</li>\n<li>\n<p><code v-pre>Makefile</code> 生成的 <code v-pre>Makefile</code> 文件，用于 <code v-pre>make</code> 命令。它包含了构建项目所需的所有构建规则和依赖关系，<code v-pre>make</code> 命令会根据这个文件执行编译、链接和其他构建任务</p>\n</li>\n</ul>\n<p><code v-pre>OK</code>，现在您已经简单了解了 <code v-pre>CMake</code> 的构建系统，现在就可以开始编译了，使用 <code v-pre>cmake --build .</code> 替代 <code v-pre>make</code> 编译程序（比 <code v-pre>make</code> 会更加具有可移植性）。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始编译源代码</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 50%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Built target my_executable</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeFiles</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  CMakeCache.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  cmake_install.cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  Makefile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  my_executable</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">$ </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">./my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Usage:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> number</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./my_executable</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> square</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> of</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2.82843</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这将生成一个可执行文件 <code v-pre>my_executable</code>（或在 <code v-pre>Windows</code> 上可能是 <code v-pre>my_executable.exe</code>），您可以运行它来执行程序。</p>\n<h3 id=\"_2-2-2-cmake-的常用指令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-cmake-的常用指令\"><span>2.2.2.CMake 的常用指令</span></a></h3>\n<p>虽然每个小节只讲一个指令，但是有可能不得不混入一些其他没有和您说明的指令，这些指令我会给出注释...</p>\n<h4 id=\"_2-2-2-1-message\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-1-message\"><span>2.2.2.1.message()</span></a></h4>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># message(): 打印日志信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message([</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">&#x3C;mode>] </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">messag...</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用这个指令可以用来输出一些构建信息, &#x3C;mode> 是消息的等级</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># STATUS 显示普通的消息, 通常用于显示信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># WARNING 显示警告消息, 通常用于提示潜在的问题</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># SEND_ERROR 显示错误消息并设置 CMake 生成失败, 后续的生成过程会中止</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># FATAL_ERROR 显示致命错误消息并立即停止生成过程</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># DEPRECATION 显示弃用警告消息</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>我们后面会频繁使用这个 <code v-pre>message()</code> 开打印信息，所以这里就不展示使用了。</p>\n<h4 id=\"_2-2-2-2-project\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-2-project\"><span>2.2.2.2.project()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># project(): 用于配置项目名称和版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(项目名称 </span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 主版本号.次版本号.修补版本号.微小补修版本号)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 当 CMake 执行 project() 后会设置以下变量, 可以使用 ${变量名} 引用变量的值</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_NAME 项目名称</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION 项目的完整版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_MAJOR 项目的主版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_MINOR 项目的次版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_PATCH 项目的修补版本号(若无指定就为空)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_TWEAK 项目的微小修补版本号(若无指定就为空)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 project()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cmake_minimum_required(VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.10</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project(my_simple_project</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 打印项目信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_NAME: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_NAME</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MAJOR: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MAJOR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MINOR: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MINOR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_PATCH: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_PATCH</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_TWEAK: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_TWEAK</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD_REQUIRED</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">add_executable(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/c++</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_NAME:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> my_simple_project</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_MAJOR:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_MINOR:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_PATCH:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_TWEAK:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Configuring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Generating</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> have</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> been</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> written</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/tests/cmake_test/build</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 50%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Built target my_executable</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_2-2-2-2-configure-file\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-2-configure-file\"><span>2.2.2.2.configure_file()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># configure_file(): 用于处理配置文件模板 .in 并生成实际的配置文件 .h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">configure_file</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(&#x3C;input> &#x3C;output> [COPYONLY] [ESCAPE_QUOTES] [@ONLY])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># configure_file() </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># &#x3C;input> 输入模板文件的路径(xxx.h.in)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># &#x3C;output> 输出文件的路径(xxx.h), 默认输出到 cmake --bulid . 时的 . 目录下</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># COPYONLY 仅将文件从源目录复制到目标目录, 而不进行变量替换</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># ESCAPE_QUOTES 转义输出文件中的引号字符(用于处理包含引号的内容)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># @ONLY 仅替换以 @VAR@ 形式出现的变量, 不替换 ${VAR} 形式的变量, 不过这种场景我暂时没有找到, 待补充...</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 configure_file()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.h.in</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cmake_minimum_required(VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.10</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project(my_simple_project</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">configure_file(main.h.in</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.h</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件的处理, 由于生成的头文件默认输出到 cmake --bulid . 时的 . 目录下, 也就是 ${CMAKE_BINARY_DIR} 的值, 因此后面需要把源文件的头文件目录 target_include_directories() 指定一下, 否则找不到头文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD_REQUIRED</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">add_executable(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target_include_directories(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PRIVATE</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ${</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">CMAKE_BINARY_DIR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 将构建目录添加到包含目录列表中, 这样编译时才可以找到对应的头文件. 而这里的 PRIVATE 意味着只有在编译当前目标时, 编译器会查找这些目录中的头文件, 这里 ${CMAKE_BINARY_DIR} 值等价于 /home/root/tests/cmake_test/bulid</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">//</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 打印头文件中的宏</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include &#x3C;iostream></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include \"main.h\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    std::cout</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"Tutorial Version: \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_MAJOR &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_MINOR &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_PATCH &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_TWEAK &#x3C;&#x3C; std::endl;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    return 0;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">// main.h.in: 模板文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#ifndef MAIN_H</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_H</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_MAJOR @PROJECT_VERSION_MAJOR@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_MINOR @PROJECT_VERSION_MINOR@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_PATCH @PROJECT_VERSION_PATCH@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_TWEAK @PROJECT_VERSION_TWEAK@</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#endif</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> // MAIN_H</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$ mkdir build &#x26;&#x26; cd build &#x26;&#x26; cmake .. &#x26;&#x26; cmake --build . &#x26;&#x26; ./my_executable  &#x26;&#x26; cd ..</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- The C compiler identification is GNU 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- The CXX compiler identification is GNU 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compiler ABI info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compiler ABI info - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Check for working C compiler: /usr/bin/cc - skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compile features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compile features - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compiler ABI info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compiler ABI info - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Check for working CXX compiler: /usr/bin/c++ - skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compile features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compile features - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_NAME: my_simple_project</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION: 1.2.3.4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_MAJOR: 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_MINOR: 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_PATCH: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_TWEAK: 4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Configuring done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Generating done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Build files have been written to: /home/ljp/tests/cmake_test/build</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[ 50%] Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[100%] Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[100%] Built target my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Tutorial Version: 1.2.3.4</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这里我制作一个模板文件 <code v-pre>.h.in</code> 做个例子。</p>\n<blockquote>\n<p>补充：<code v-pre>${CMAKE_BINARY_DIR}</code> 是由 <code v-pre>CMake</code> 在配置阶段自动设置的变量，它的值是构建目录的路径，即您在运行 <code v-pre>CMake</code> 时指定的目录。</p>\n<p>如果你在项目根目录中创建了一个 <code v-pre>build</code> 子目录，并在其中运行 CMake 配置命令，如：</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><p>此时 <code v-pre>${CMAKE_BINARY_DIR}</code> 将被设置为 <code v-pre>build</code> 目录的路径，例如 <code v-pre>/path/to/project/build</code>，在使用一些指令时会自动添加这个路径信息。</p>\n</blockquote>\n<blockquote>\n<p>补充：上述之所以把生成的 <code v-pre>.h</code> 配置文件放在了 <code v-pre>bulid</code> 的内部，主要原因是因为可以让所有是 <code v-pre>CMake</code> 产生的文件都处于 <code v-pre>bulid</code> 中方便管理。</p>\n</blockquote>\n<blockquote>\n<p>吐槽：不知道为什么，翻译版的官方文档把构建目录 <code v-pre>build</code> 称为二进制目录，搞得我疑惑了好久...</p>\n</blockquote>\n<h4 id=\"_2-2-2-3-set\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-3-set\"><span>2.2.2.3.set()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># set(): 创建或设置 CMake 变量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(变量名, 设定值)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 set() 可以创建或设置 CMake 变量或用户自己设置的自定义变量, 不过用户在创建自定义变量的时候, 命名应该尽量避免使用 CMAKE_ 打头, 例如 CMAKE_BINARY_DIR, 这些变量有些 CMake 已经帮我们在 CMake 一运行的时候就设置好了, 再修改有可能引发奇怪的错误。也有的可以交给用户变量来设置，例如 CMAKE_CXX_STANDARD, CMAKE_CXX_STANDARD_REQUIRED</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>我们上面也已经用过，这里只是简单补全一下概念。</p>\n<h4 id=\"_2-2-2-4-add-library\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-4-add-library\"><span>2.2.2.4.add_library()</span></a></h4>\n<h3 id=\"_2-2-3-高级使用-cmake\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-3-高级使用-cmake\"><span>2.2.3.高级使用 CMake</span></a></h3>\n<p>如果可以，我们在掌握了以上的所有知识后，应该给与一个实际的项目使用 <code v-pre>CMake</code> 进行管理，下面我给出一个比较接近实际工程的 <code v-pre>Cpp</code> 项目目录，并且编写对应的 <code v-pre>CMakeLists.txt</code> 文件。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Cpp 工程目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project_name/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .git</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # git 存储仓库</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .gitignore</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # git 忽略文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 第三方库目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> gtest/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # Goolge 单元测试框架</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty_1/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty_2/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> project_name/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目源代码目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.h</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序头文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序源文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目主模块1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dir_1/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 子模块1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dir_2/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 子模块2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1.h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目主模块2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2.h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tests/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目测试代码目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_main.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_module1.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主模块1单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_module2.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主模块2单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 使用 CMake 管理项目构建</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存放 CMake 后的构建系统文件和目标文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> LICENSE</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目许可证信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> README.md</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目说明文档</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> doc/doxygen.html</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目指导文档</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> deploy/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存放可以对外交付/部署的文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> bin/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付可执行的二进制文件(用户可以直接使用)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付头文件(用户可以调用接口)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付库文件(支持用户调用接口对应的实现)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>则我们需要对应的 <code v-pre>CMakeLists.txt</code> 内容如下举例。</p>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 CMake 最低版本</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cmake_minimum_required</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 3.10)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置项目名称和版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">project_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 1.0 LANGUAGES CXX)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 强制指定 C++ 标准</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD 11)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD_REQUIRED </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置变量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(SOURCE_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/project_name\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(INCLUDE_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/project_name\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(THIRD_PARTY_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/3rdparty\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(TEST_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/tests\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 添加全局项目头文件目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include_directories</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建项目可执行文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">SOURCES</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/main.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module1/module1.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module2/module2.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${SOURCES}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 链接第三方库</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/lib/libname1.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/lib/libname2.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 打开单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enable_testing</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建测试可执行文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module1 </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_module1.cc)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module2 </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_module2.cc)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_main </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_main.cc)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 链接 Google Test 库到测试目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_main</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 添加测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestModule1 </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_module1)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestModule2 </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_module2)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestMain </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_main)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置安装规则</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(TARGETS </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable DESTINATION deploy/bin)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/include/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/include/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${CMAKE_BINARY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/lib/ DESTINATION deploy/lib)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","env":{"base":"/","filePath":"/home/ljp/git/work/work-blog-website/work-blog-website-frontend/docs/3.系统网络/1.基本操作/007_ljp_2023_09_12_构建器.md","filePathRelative":"3.系统网络/1.基本操作/007_ljp_2023_09_12_构建器.md","frontmatter":{"createTime":"2025/04/11 12:12:53","permalink":"/3.系统网络/5txmd1gw/","title":"构建器"},"sfcBlocks":{"template":{"type":"template","content":"<template><h1 id=\"_1-make\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-make\"><span>1.Make</span></a></h1>\n<h2 id=\"_1-1-make-的概念\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-make-的概念\"><span>1.1.Make 的概念</span></a></h2>\n<p><code v-pre>make</code> 是一个指令，<code v-pre>makefile</code> 是一个在当前目录下存在的一个具有特定格式的文件。</p>\n<p>如果在 <code v-pre>Linux</code> 中编写了大量的代码文件，难不成要一个一个使用 <code v-pre>gcc/h++</code> 编译吗，要是代码出了问题，修改后又需要编译怎么办？因此出现了 <code v-pre>make</code> 这样的自动化构建工具。</p>\n<h2 id=\"_1-2-make-的使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-make-的使用\"><span>1.2.Make 的使用</span></a></h2>\n<h3 id=\"_1-2-1-编写代码文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-编写代码文件\"><span>1.2.1.编写代码文件</span></a></h3>\n<p>先在一个目录下编写一个或多个 <code v-pre>.c</code> 源文件。</p>\n<h3 id=\"_1-2-2-编写构建文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-编写构建文件\"><span>1.2.2.编写构建文件</span></a></h3>\n<ol>\n<li>\n<p>首先 <code v-pre>touch</code> 一个 <code v-pre>makefile</code> 文件</p>\n</li>\n<li>\n<p><code v-pre>makefile</code> 内部编写目标文件、依赖文件列表、依赖方法</p>\n</li>\n<li>\n<p>写入用作清理的伪目标，<code v-pre>.PHONY</code> 是修饰伪目标的关键字</p>\n</li>\n</ol>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># make 指令自顶向下执行，如果直接使用 make 指令就会执行第一份依赖命令</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#目标文件: 依赖文件列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#   依赖方法（Linux 下的命令）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#.PHONY: 伪目标（重点是执行方法而不是目的（“phony”即“假的，伪的”））</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#   依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #没有依赖关系，设定为伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ol start=\"4\">\n<li>使用 <code v-pre>make</code> 指令运行 <code v-pre>makefile</code> 文件，不指定目标直接使用 <code v-pre>make</code> 指令，就会自动找第一对依赖关系和依赖方法（即 <code v-pre>makefile</code> 的第一个目标）。</li>\n</ol>\n<h3 id=\"_1-2-3-运行构建工具\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-运行构建工具\"><span>1.2.3.运行构建工具</span></a></h3>\n<h4 id=\"_1-2-3-1-尝试构建\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-1-尝试构建\"><span>1.2.3.1.尝试构建</span></a></h4>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 尝试使用 make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include &#x3C;stdio.h></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    for(i</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> i</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> i++</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        printf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"%d \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    printf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"\\n\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> make</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 20</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rwxrwxr-x</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8408</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:54</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">   62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 16</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 25</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 36</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 49</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 64</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 81</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> make</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> clean</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-2-3-2-重复执行\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-2-重复执行\"><span>1.2.3.2.重复执行</span></a></h4>\n<p>很多书都会写：“伪目标总是会被执行的”。例如：</p>\n<ol>\n<li>\n<p><code v-pre>make run/make</code> 指令是不能被重复调用的（会显示 <code v-pre>make:'run' is up to date.</code>。\n除非我们要编译的源文件的最近修改时间发生了变动，也就是说如果源文件没有经过修改，<code v-pre>make run</code> 是不会再次编译的，因为这样做的效率低下（大型的文件编译的时间非常久））。\n另外如果我们对源文件使用 <code v-pre>touch</code> 指令更新修改时间，那么就也是能重复使用 <code v-pre>make main</code> 指令。</p>\n</li>\n<li>\n<p>但 <code v-pre>make clean</code> 指令总是可以被调用的。因此“总是被执行”的另外一个说法是“总是会根据依赖关系，执行依赖方法”。</p>\n</li>\n</ol>\n<blockquote>\n<p>补充：使用 <code v-pre>stat</code> 可以查看文件的三个重要时间</p>\n<ol>\n<li>\n<p><code v-pre>Access</code>：文件最近被访问的时间（即：读取的时候，<code v-pre>touch</code> 只更改这个时间，但是由于 <code v-pre>Access</code> 也是属性，所以这个改动也会同时改动 <code v-pre>Change</code> 属性），如果修改了文件也算访问。不过由于读取文件是高频工作，因此 <code v-pre>Linux</code> 修改了内核，只会在一定时间后进行修改，不会读取一次就修改一次（每次都修改就会导致反复访问磁盘，导致效率低下）</p>\n</li>\n<li>\n<p><code v-pre>Modify</code>：文件的最近内容修改时间（<code v-pre>make</code> 指令就是看这个文件来确认是否要重新编译的），不过有的时候改变内容会改变大小，导致文件的属性变化，<code v-pre>Change</code> 也发生了变化</p>\n</li>\n<li>\n<p><code v-pre>Change</code>：文件的最近属性修改时间，比如：文件权限的设置、文件的大小改变</p>\n</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>注意：文件改变的本质不是时间变化，而是随着时间文件内容产生新旧内容。</p>\n</blockquote>\n<h4 id=\"_1-2-3-3-自动推导\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-3-自动推导\"><span>1.2.3.3.自动推导</span></a></h4>\n<p><code v-pre>make</code> 可以进行自动推导（嵌套代码），但是一般不建议像下面这么写，只是为了证明 <code v-pre>make</code> 可以自动推导这一现象：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">main.o:main.s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -c</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.s</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mian.s:main.i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mian.i</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mian.s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mian.i:mian.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -E</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.i</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.i</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-2-3-4-拓展学习\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-4-拓展学习\"><span>1.2.3.4.拓展学习</span></a></h4>\n<p>上面的知识在平时的学习和使用中就很够用了，但是我们可以拓展学习一些其他的内容。</p>\n<ol>\n<li>\n<p>有的时候不希望打印出使用 <code v-pre>make</code> 命令的信息，这个时候可以在每个依赖方法前加上 <code v-pre>@</code> 符号，这样就不会回显信息了</p>\n</li>\n<li>\n<p>在 <code v-pre>makefile</code> 允许创建变量，因此我们上面的代码还可以改写为更加普遍的（变量的赋值一般不建议留空格，不过您其实可以将这种变量作为宏来理解）</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">cc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">gcc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">TAGET</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    $(cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -o </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> $(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n<li>\n<p><code v-pre>makefile</code> 还可以在依赖方法省略依赖关系用到的依赖文件列表和目标文件</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> $</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">^</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $@</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法，$^表示冒号右侧内容，$@表示冒号左侧的内容</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #没有依赖关系，设定为伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n</ol>\n<h1 id=\"_2-cmake\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-cmake\"><span>2.Cmake</span></a></h1>\n<h2 id=\"_2-1-cmake-的概念\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-1-cmake-的概念\"><span>2.1.Cmake 的概念</span></a></h2>\n<p>既然有了 <code v-pre>Make</code>，为什么会有 <code v-pre>CMake</code> 的存在呢？实际上，早期不同平台的 <code v-pre>Make</code> 面对大型项目难以维护，脚本编写和维护难度都比较高，并且不同平台有不同的编译链，迁移成本也比较高，因此就出现了 <code v-pre>CMake</code>，您可以 <a href=\"https://cmake.org/\" target=\"_blank\" rel=\"noopener noreferrer\">前去 CMake 的官网查看 Camke 的历史</a>，也可以 <a href=\"https://github.com/Kitware/CMake\" target=\"_blank\" rel=\"noopener noreferrer\">去 Github 上查看 CMake 的源代码</a>。另外，还有一份 <a href=\"https://cmake-doc.readthedocs.io/zh-cn/latest/guide/tutorial/A%20Basic%20Starting%20Point.html\" target=\"_blank\" rel=\"noopener noreferrer\">简单易懂的 CMake 官方教程</a> 也值得您查阅，不过也许是翻译的原因，有些地方读起来怪怪的，说得不是很清楚，所要这里关于 CMake 是对官方教程的补充的简化，旨在为您快速掌握 <code v-pre>CMake</code> 基础。</p>\n<blockquote>\n<p>吐槽：在 <code v-pre>Cpp</code> 领域日渐被蚕食的今天，<code v-pre>CMake</code> 才是 <code v-pre>Cpp</code> 的未来。</p>\n</blockquote>\n<h2 id=\"_2-2-cmake-的使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-cmake-的使用\"><span>2.2.Cmake 的使用</span></a></h2>\n<p>接下来我将在 <code v-pre>Linux</code> 系统上演示关于 <code v-pre>CMake</code> 的使用，我是用的是 <code v-pre>CMake 3.22.1</code>，如果您的版本何我不一样可能会有些一些操作需要变化，请您仔细查看本文。</p>\n<h3 id=\"_2-2-1-cmake-的基本使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-1-cmake-的基本使用\"><span>2.2.1.CMake 的基本使用</span></a></h3>\n<p>和 <code v-pre>Make</code> 类似，<code v-pre>Cmake</code> 也需要编写构建文件 <code v-pre>CMakeList.txt</code>，但是编写过程更加简单，功能更加强大。简单点，现在假设您的项目结构如下所示。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目结构</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">my_simple_project/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>在 <code v-pre>main.cpp</code> 文件中，您可以开始编写 <code v-pre>C/C++</code> 程序，例如：</p>\n<div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// main.cc: 计算给定数字的平方根并将结果输出到终端</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cmath</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cstdlib</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">string</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> char*</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argc </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Usage: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> number</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> double</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> inputValue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> atof</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> double</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> outputValue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sqrt</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">inputValue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">The square root of </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> inputValue </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> outputValue</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;&#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后开始 编写 <code v-pre>CMakeList.txt</code> 文件，<code v-pre>CMakeLists.txt</code> 文件主要由变量和指令构成，通过指令可以给一些 <code v-pre>CMake</code> 变量进行设置。</p>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cmake_minimum_required</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 3.10) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(my_simple_project) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD 11) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD_REQUIRED </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(my_executable main.cc) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>接下来要开始构建这个项目，不过您先需要在项目的根目录下（<code v-pre>MySimpleProject/</code>）<mark>使用 <code v-pre>mkdir bulid &amp;&amp; cd build</code></mark>，也就是创建构建文件夹后再进入该文件夹中开始 <mark>运行 <code v-pre>cmake ..</code> 命令</mark> 来生成构建目标，这样对构建文件的处理会比较好一下，因为 <code v-pre>CMake</code> 会把构建的目标和其他的某些自带配置文件、缓存文件等也一起放入其中。</p>\n<div class=\"language-sh line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"sh\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-sh\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始构建项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 创建并进入构建目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 运行 CMake 以生成构建系统</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/c++</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Configuring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Generating</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> have</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> been</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> written</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/root/tests/cmake_test/build</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  tree</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCache.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeFiles</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.22.1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCCompiler.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCXXCompiler.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDetermineCompilerABI_C.bin</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDetermineCompilerABI_CXX.bin</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeSystem.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CompilerIdC</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a.out</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCCompilerId.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CompilerIdCXX</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a.out</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCXXCompilerId.cpp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake.check_cache</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDirectoryInformation.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeOutput.log</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeTmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> my_executable.dir</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake_clean.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler_depend.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler_depend.ts</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> DependInfo.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> depend.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> flags.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> link.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> progress.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> progress.marks</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TargetDirectories.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake_install.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">8</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 28</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>不过 <code v-pre>CMake ..</code> 的执行并没有完成真正的编译构造，这一步只是执行了一系列的配置构建环境和生成构建文件，您可以看看上述执行后目录结构发生的变化，这里一步步解释多出来的文件。</p>\n<ul>\n<li>\n<p><code v-pre>CMakeCache.txt</code> 缓存文件，保存了 <code v-pre>CMake</code> 配置过程中生成的变量和选项。它包括编译器路径、库路径、<code v-pre>CMake</code> 配置选项等。这个文件可以帮助 <code v-pre>CMake</code> 在后续配置中快速获取信息，而不需要重新执行所有的检测</p>\n</li>\n<li>\n<p><code v-pre>CMakeFiles/</code> 这是一个包含各种 <code v-pre>CMake</code> 构建信息和临时文件的目录</p>\n<ul>\n<li>\n<p><code v-pre>3.22.1/</code> 这是 <code v-pre>CMake</code> 版本目录，用于存放与特定 <code v-pre>CMake</code> 版本相关的文件</p>\n<ul>\n<li><code v-pre>CMakeCCompiler.cmake</code> 记录了 <code v-pre>C</code> 编译器的配置，指导如何使用</li>\n<li><code v-pre>CMakeCXXCompiler.cmake</code> 记录了 <code v-pre>C++</code> 编译器的配置，指导如何使用</li>\n<li><code v-pre>CMakeDetermineCompilerABI_C.bin</code> 用于确定 <code v-pre>C</code> 编译器的 <code v-pre>ABI</code>（应用程序二进制接口）</li>\n<li><code v-pre>CMakeDetermineCompilerABI_CXX.bin</code> 用于确定 <code v-pre>C++</code> 编译器的 <code v-pre>ABI</code>（应用程序二进制接口）</li>\n<li><code v-pre>CMakeSystem.cmake</code> 记录系统信息，如操作系统、编译器版本等</li>\n<li><code v-pre>CompilerIdC/</code> 内部的文件检测 <code v-pre>C</code> 编译器的工具和信息，验证编译器的有效性</li>\n<li><code v-pre>CompilerIdCXX/</code> 内部的文件检测 <code v-pre>C++</code> 编译器的工具和信息，验证编译器的有效</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>cmake.check_cache</code> 缓存检查文件，在每次 <code v-pre>CMake</code> 运行时，它会检查 <code v-pre>CMakeCache.txt</code> 是否有变化。如果发现缓存中的某些设置或变量已被修改，有助于决定是否需要重新生成缓存或者进行重新配置</p>\n</li>\n<li>\n<p><code v-pre>CMakeDirectoryInformation.cmake</code> 目录信息文件，记录构建目录的相关信息</p>\n</li>\n<li>\n<p><code v-pre>CMakeOutput.log</code> 记录 <code v-pre>CMake</code> 配置过程的输出日志</p>\n</li>\n<li>\n<p><code v-pre>CMakeTmp</code> 临时文件目录，用于存放在构建过程中生成的临时文件</p>\n</li>\n<li>\n<p><code v-pre>Makefile2</code> 是一个由 <code v-pre>CMake</code> 生成的文件，通常作为 <code v-pre>Makefile</code> 的辅助文件，包含了构建过程的详细依赖规则和构建目标之间的依赖关系。它用于分离和组织 <code v-pre>Makefile</code> 中的复杂规则和依赖关系，使得主 <code v-pre>Makefile</code> 更加简洁</p>\n</li>\n<li>\n<p><code v-pre>Makefile.cmake</code>：用于将 <code v-pre>CMake</code> 指令和变量转换为适合 <code v-pre>Makefile</code> 系统使用的格式，它帮助 <code v-pre>CMake</code> 将 <code v-pre>CMakeLists.txt</code> 中定义的配置和规则转换为 <code v-pre>Makefile</code> 可执行的具体指令</p>\n</li>\n<li>\n<p><code v-pre>my_executable.dir/</code> 包含特定目标（例如 <code v-pre>my_executable</code>）的构建文件和信息，这里就不细细展开了，比较复杂...</p>\n</li>\n<li>\n<p><code v-pre>progress.marks</code> 文件用于跟踪构建过程中的进度信息，特别是在使用 <code v-pre>make</code> 或其他构建工具进行并行构建时。这个文件帮助 <code v-pre>CMake</code> 了解哪些构建任务已经完成、哪些还在进行中，从而可以在命令行上显示构建进度</p>\n</li>\n<li>\n<p><code v-pre>TargetDirectories.txt</code> 文件用于记录构建系统中各个目标（如可执行文件、库等）的输出目录信息。这个文件确保每个构建目标都能正确地生成到指定的目录中，并且这些目录的信息在整个构建过程中是可以访问的，避免路径错误或文件错位的情况</p>\n</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>cmake_install.cmake</code> 安装脚本文件，生成用于安装构建产物的 <code v-pre>CMake</code> 脚本，它通常用于执行 <code v-pre>make install</code> 或 <code v-pre>cmake --install</code> 命令时，指定如何安装编译生成的文件和库</p>\n</li>\n<li>\n<p><code v-pre>Makefile</code> 生成的 <code v-pre>Makefile</code> 文件，用于 <code v-pre>make</code> 命令。它包含了构建项目所需的所有构建规则和依赖关系，<code v-pre>make</code> 命令会根据这个文件执行编译、链接和其他构建任务</p>\n</li>\n</ul>\n<p><code v-pre>OK</code>，现在您已经简单了解了 <code v-pre>CMake</code> 的构建系统，现在就可以开始编译了，使用 <code v-pre>cmake --build .</code> 替代 <code v-pre>make</code> 编译程序（比 <code v-pre>make</code> 会更加具有可移植性）。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始编译源代码</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 50%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Built target my_executable</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeFiles</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  CMakeCache.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  cmake_install.cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  Makefile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  my_executable</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">$ </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">./my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Usage:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> number</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./my_executable</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> square</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> of</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2.82843</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这将生成一个可执行文件 <code v-pre>my_executable</code>（或在 <code v-pre>Windows</code> 上可能是 <code v-pre>my_executable.exe</code>），您可以运行它来执行程序。</p>\n<h3 id=\"_2-2-2-cmake-的常用指令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-cmake-的常用指令\"><span>2.2.2.CMake 的常用指令</span></a></h3>\n<p>虽然每个小节只讲一个指令，但是有可能不得不混入一些其他没有和您说明的指令，这些指令我会给出注释...</p>\n<h4 id=\"_2-2-2-1-message\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-1-message\"><span>2.2.2.1.message()</span></a></h4>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># message(): 打印日志信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message([</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">&#x3C;mode>] </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">messag...</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用这个指令可以用来输出一些构建信息, &#x3C;mode> 是消息的等级</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># STATUS 显示普通的消息, 通常用于显示信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># WARNING 显示警告消息, 通常用于提示潜在的问题</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># SEND_ERROR 显示错误消息并设置 CMake 生成失败, 后续的生成过程会中止</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># FATAL_ERROR 显示致命错误消息并立即停止生成过程</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># DEPRECATION 显示弃用警告消息</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>我们后面会频繁使用这个 <code v-pre>message()</code> 开打印信息，所以这里就不展示使用了。</p>\n<h4 id=\"_2-2-2-2-project\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-2-project\"><span>2.2.2.2.project()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># project(): 用于配置项目名称和版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(项目名称 </span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 主版本号.次版本号.修补版本号.微小补修版本号)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 当 CMake 执行 project() 后会设置以下变量, 可以使用 ${变量名} 引用变量的值</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_NAME 项目名称</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION 项目的完整版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_MAJOR 项目的主版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_MINOR 项目的次版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_PATCH 项目的修补版本号(若无指定就为空)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_TWEAK 项目的微小修补版本号(若无指定就为空)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 project()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cmake_minimum_required(VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.10</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project(my_simple_project</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 打印项目信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_NAME: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_NAME</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MAJOR: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MAJOR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MINOR: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MINOR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_PATCH: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_PATCH</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_TWEAK: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_TWEAK</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD_REQUIRED</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">add_executable(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/c++</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_NAME:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> my_simple_project</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_MAJOR:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_MINOR:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_PATCH:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_TWEAK:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Configuring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Generating</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> have</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> been</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> written</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/tests/cmake_test/build</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 50%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Built target my_executable</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_2-2-2-2-configure-file\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-2-configure-file\"><span>2.2.2.2.configure_file()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># configure_file(): 用于处理配置文件模板 .in 并生成实际的配置文件 .h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">configure_file</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(&#x3C;input> &#x3C;output> [COPYONLY] [ESCAPE_QUOTES] [@ONLY])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># configure_file() </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># &#x3C;input> 输入模板文件的路径(xxx.h.in)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># &#x3C;output> 输出文件的路径(xxx.h), 默认输出到 cmake --bulid . 时的 . 目录下</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># COPYONLY 仅将文件从源目录复制到目标目录, 而不进行变量替换</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># ESCAPE_QUOTES 转义输出文件中的引号字符(用于处理包含引号的内容)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># @ONLY 仅替换以 @VAR@ 形式出现的变量, 不替换 ${VAR} 形式的变量, 不过这种场景我暂时没有找到, 待补充...</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 configure_file()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.h.in</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cmake_minimum_required(VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.10</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project(my_simple_project</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">configure_file(main.h.in</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.h</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件的处理, 由于生成的头文件默认输出到 cmake --bulid . 时的 . 目录下, 也就是 ${CMAKE_BINARY_DIR} 的值, 因此后面需要把源文件的头文件目录 target_include_directories() 指定一下, 否则找不到头文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD_REQUIRED</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">add_executable(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target_include_directories(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PRIVATE</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ${</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">CMAKE_BINARY_DIR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 将构建目录添加到包含目录列表中, 这样编译时才可以找到对应的头文件. 而这里的 PRIVATE 意味着只有在编译当前目标时, 编译器会查找这些目录中的头文件, 这里 ${CMAKE_BINARY_DIR} 值等价于 /home/root/tests/cmake_test/bulid</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">//</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 打印头文件中的宏</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include &#x3C;iostream></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include \"main.h\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    std::cout</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"Tutorial Version: \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_MAJOR &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_MINOR &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_PATCH &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_TWEAK &#x3C;&#x3C; std::endl;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    return 0;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">// main.h.in: 模板文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#ifndef MAIN_H</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_H</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_MAJOR @PROJECT_VERSION_MAJOR@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_MINOR @PROJECT_VERSION_MINOR@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_PATCH @PROJECT_VERSION_PATCH@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_TWEAK @PROJECT_VERSION_TWEAK@</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#endif</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> // MAIN_H</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$ mkdir build &#x26;&#x26; cd build &#x26;&#x26; cmake .. &#x26;&#x26; cmake --build . &#x26;&#x26; ./my_executable  &#x26;&#x26; cd ..</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- The C compiler identification is GNU 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- The CXX compiler identification is GNU 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compiler ABI info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compiler ABI info - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Check for working C compiler: /usr/bin/cc - skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compile features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compile features - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compiler ABI info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compiler ABI info - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Check for working CXX compiler: /usr/bin/c++ - skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compile features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compile features - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_NAME: my_simple_project</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION: 1.2.3.4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_MAJOR: 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_MINOR: 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_PATCH: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_TWEAK: 4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Configuring done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Generating done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Build files have been written to: /home/ljp/tests/cmake_test/build</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[ 50%] Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[100%] Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[100%] Built target my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Tutorial Version: 1.2.3.4</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这里我制作一个模板文件 <code v-pre>.h.in</code> 做个例子。</p>\n<blockquote>\n<p>补充：<code v-pre>${CMAKE_BINARY_DIR}</code> 是由 <code v-pre>CMake</code> 在配置阶段自动设置的变量，它的值是构建目录的路径，即您在运行 <code v-pre>CMake</code> 时指定的目录。</p>\n<p>如果你在项目根目录中创建了一个 <code v-pre>build</code> 子目录，并在其中运行 CMake 配置命令，如：</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><p>此时 <code v-pre>${CMAKE_BINARY_DIR}</code> 将被设置为 <code v-pre>build</code> 目录的路径，例如 <code v-pre>/path/to/project/build</code>，在使用一些指令时会自动添加这个路径信息。</p>\n</blockquote>\n<blockquote>\n<p>补充：上述之所以把生成的 <code v-pre>.h</code> 配置文件放在了 <code v-pre>bulid</code> 的内部，主要原因是因为可以让所有是 <code v-pre>CMake</code> 产生的文件都处于 <code v-pre>bulid</code> 中方便管理。</p>\n</blockquote>\n<blockquote>\n<p>吐槽：不知道为什么，翻译版的官方文档把构建目录 <code v-pre>build</code> 称为二进制目录，搞得我疑惑了好久...</p>\n</blockquote>\n<h4 id=\"_2-2-2-3-set\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-3-set\"><span>2.2.2.3.set()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># set(): 创建或设置 CMake 变量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(变量名, 设定值)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 set() 可以创建或设置 CMake 变量或用户自己设置的自定义变量, 不过用户在创建自定义变量的时候, 命名应该尽量避免使用 CMAKE_ 打头, 例如 CMAKE_BINARY_DIR, 这些变量有些 CMake 已经帮我们在 CMake 一运行的时候就设置好了, 再修改有可能引发奇怪的错误。也有的可以交给用户变量来设置，例如 CMAKE_CXX_STANDARD, CMAKE_CXX_STANDARD_REQUIRED</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>我们上面也已经用过，这里只是简单补全一下概念。</p>\n<h4 id=\"_2-2-2-4-add-library\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-4-add-library\"><span>2.2.2.4.add_library()</span></a></h4>\n<h3 id=\"_2-2-3-高级使用-cmake\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-3-高级使用-cmake\"><span>2.2.3.高级使用 CMake</span></a></h3>\n<p>如果可以，我们在掌握了以上的所有知识后，应该给与一个实际的项目使用 <code v-pre>CMake</code> 进行管理，下面我给出一个比较接近实际工程的 <code v-pre>Cpp</code> 项目目录，并且编写对应的 <code v-pre>CMakeLists.txt</code> 文件。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Cpp 工程目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project_name/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .git</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # git 存储仓库</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .gitignore</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # git 忽略文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 第三方库目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> gtest/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # Goolge 单元测试框架</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty_1/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty_2/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> project_name/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目源代码目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.h</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序头文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序源文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目主模块1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dir_1/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 子模块1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dir_2/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 子模块2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1.h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目主模块2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2.h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tests/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目测试代码目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_main.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_module1.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主模块1单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_module2.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主模块2单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 使用 CMake 管理项目构建</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存放 CMake 后的构建系统文件和目标文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> LICENSE</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目许可证信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> README.md</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目说明文档</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> doc/doxygen.html</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目指导文档</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> deploy/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存放可以对外交付/部署的文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> bin/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付可执行的二进制文件(用户可以直接使用)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付头文件(用户可以调用接口)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付库文件(支持用户调用接口对应的实现)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>则我们需要对应的 <code v-pre>CMakeLists.txt</code> 内容如下举例。</p>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 CMake 最低版本</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cmake_minimum_required</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 3.10)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置项目名称和版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">project_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 1.0 LANGUAGES CXX)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 强制指定 C++ 标准</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD 11)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD_REQUIRED </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置变量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(SOURCE_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/project_name\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(INCLUDE_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/project_name\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(THIRD_PARTY_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/3rdparty\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(TEST_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/tests\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 添加全局项目头文件目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include_directories</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建项目可执行文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">SOURCES</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/main.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module1/module1.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module2/module2.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${SOURCES}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 链接第三方库</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/lib/libname1.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/lib/libname2.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 打开单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enable_testing</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建测试可执行文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module1 </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_module1.cc)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module2 </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_module2.cc)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_main </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_main.cc)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 链接 Google Test 库到测试目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_main</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 添加测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestModule1 </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_module1)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestModule2 </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_module2)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestMain </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_main)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置安装规则</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(TARGETS </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable DESTINATION deploy/bin)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/include/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/include/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${CMAKE_BINARY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/lib/ DESTINATION deploy/lib)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></template>","contentStripped":"<h1 id=\"_1-make\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-make\"><span>1.Make</span></a></h1>\n<h2 id=\"_1-1-make-的概念\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-1-make-的概念\"><span>1.1.Make 的概念</span></a></h2>\n<p><code v-pre>make</code> 是一个指令，<code v-pre>makefile</code> 是一个在当前目录下存在的一个具有特定格式的文件。</p>\n<p>如果在 <code v-pre>Linux</code> 中编写了大量的代码文件，难不成要一个一个使用 <code v-pre>gcc/h++</code> 编译吗，要是代码出了问题，修改后又需要编译怎么办？因此出现了 <code v-pre>make</code> 这样的自动化构建工具。</p>\n<h2 id=\"_1-2-make-的使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-make-的使用\"><span>1.2.Make 的使用</span></a></h2>\n<h3 id=\"_1-2-1-编写代码文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-1-编写代码文件\"><span>1.2.1.编写代码文件</span></a></h3>\n<p>先在一个目录下编写一个或多个 <code v-pre>.c</code> 源文件。</p>\n<h3 id=\"_1-2-2-编写构建文件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-2-编写构建文件\"><span>1.2.2.编写构建文件</span></a></h3>\n<ol>\n<li>\n<p>首先 <code v-pre>touch</code> 一个 <code v-pre>makefile</code> 文件</p>\n</li>\n<li>\n<p><code v-pre>makefile</code> 内部编写目标文件、依赖文件列表、依赖方法</p>\n</li>\n<li>\n<p>写入用作清理的伪目标，<code v-pre>.PHONY</code> 是修饰伪目标的关键字</p>\n</li>\n</ol>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># make 指令自顶向下执行，如果直接使用 make 指令就会执行第一份依赖命令</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#目标文件: 依赖文件列表</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#   依赖方法（Linux 下的命令）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#.PHONY: 伪目标（重点是执行方法而不是目的（“phony”即“假的，伪的”））</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#   依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #没有依赖关系，设定为伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ol start=\"4\">\n<li>使用 <code v-pre>make</code> 指令运行 <code v-pre>makefile</code> 文件，不指定目标直接使用 <code v-pre>make</code> 指令，就会自动找第一对依赖关系和依赖方法（即 <code v-pre>makefile</code> 的第一个目标）。</li>\n</ol>\n<h3 id=\"_1-2-3-运行构建工具\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-运行构建工具\"><span>1.2.3.运行构建工具</span></a></h3>\n<h4 id=\"_1-2-3-1-尝试构建\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-1-尝试构建\"><span>1.2.3.1.尝试构建</span></a></h4>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 尝试使用 make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include &#x3C;stdio.h></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">{</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> =</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    for(i</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> i</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> i++</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">        printf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"%d \"</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">,</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> i</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    printf</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">\"\\n\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> make</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 20</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rwxrwxr-x</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8408</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:54</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">   62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">0</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 16</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 25</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 36</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 49</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 64</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 81</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> make</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> clean</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ll</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">total</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 147</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:51</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">-rw-rw-r--</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> limou</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">  62</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Sep</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 14</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 10:53</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> makefile</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-2-3-2-重复执行\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-2-重复执行\"><span>1.2.3.2.重复执行</span></a></h4>\n<p>很多书都会写：“伪目标总是会被执行的”。例如：</p>\n<ol>\n<li>\n<p><code v-pre>make run/make</code> 指令是不能被重复调用的（会显示 <code v-pre>make:'run' is up to date.</code>。\n除非我们要编译的源文件的最近修改时间发生了变动，也就是说如果源文件没有经过修改，<code v-pre>make run</code> 是不会再次编译的，因为这样做的效率低下（大型的文件编译的时间非常久））。\n另外如果我们对源文件使用 <code v-pre>touch</code> 指令更新修改时间，那么就也是能重复使用 <code v-pre>make main</code> 指令。</p>\n</li>\n<li>\n<p>但 <code v-pre>make clean</code> 指令总是可以被调用的。因此“总是被执行”的另外一个说法是“总是会根据依赖关系，执行依赖方法”。</p>\n</li>\n</ol>\n<blockquote>\n<p>补充：使用 <code v-pre>stat</code> 可以查看文件的三个重要时间</p>\n<ol>\n<li>\n<p><code v-pre>Access</code>：文件最近被访问的时间（即：读取的时候，<code v-pre>touch</code> 只更改这个时间，但是由于 <code v-pre>Access</code> 也是属性，所以这个改动也会同时改动 <code v-pre>Change</code> 属性），如果修改了文件也算访问。不过由于读取文件是高频工作，因此 <code v-pre>Linux</code> 修改了内核，只会在一定时间后进行修改，不会读取一次就修改一次（每次都修改就会导致反复访问磁盘，导致效率低下）</p>\n</li>\n<li>\n<p><code v-pre>Modify</code>：文件的最近内容修改时间（<code v-pre>make</code> 指令就是看这个文件来确认是否要重新编译的），不过有的时候改变内容会改变大小，导致文件的属性变化，<code v-pre>Change</code> 也发生了变化</p>\n</li>\n<li>\n<p><code v-pre>Change</code>：文件的最近属性修改时间，比如：文件权限的设置、文件的大小改变</p>\n</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>注意：文件改变的本质不是时间变化，而是随着时间文件内容产生新旧内容。</p>\n</blockquote>\n<h4 id=\"_1-2-3-3-自动推导\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-3-自动推导\"><span>1.2.3.3.自动推导</span></a></h4>\n<p><code v-pre>make</code> 可以进行自动推导（嵌套代码），但是一般不建议像下面这么写，只是为了证明 <code v-pre>make</code> 可以自动推导这一现象：</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">main.o:main.s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -c</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.s</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mian.s:main.i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mian.i</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mian.s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mian.i:mian.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -E</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.c</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.i</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.i</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.s</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.o</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_1-2-3-4-拓展学习\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-2-3-4-拓展学习\"><span>1.2.3.4.拓展学习</span></a></h4>\n<p>上面的知识在平时的学习和使用中就很够用了，但是我们可以拓展学习一些其他的内容。</p>\n<ol>\n<li>\n<p>有的时候不希望打印出使用 <code v-pre>make</code> 命令的信息，这个时候可以在每个依赖方法前加上 <code v-pre>@</code> 符号，这样就不会回显信息了</p>\n</li>\n<li>\n<p>在 <code v-pre>makefile</code> 允许创建变量，因此我们上面的代码还可以改写为更加普遍的（变量的赋值一般不建议留空格，不过您其实可以将这种变量作为宏来理解）</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">cc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">gcc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">main.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">run</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">TAGET</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">:</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    $(cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">src</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> -o </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> $(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n<li>\n<p><code v-pre>makefile</code> 还可以在依赖方法省略依赖关系用到的依赖文件列表和目标文件</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-bash\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">run:main.c</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖关系</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    gcc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> $</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">^</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -o</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> $@</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法，$^表示冒号右侧内容，$@表示冒号左侧的内容</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">.PHONY:clean</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #没有依赖关系，设定为伪目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">clean:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    rm</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> #依赖方法</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></li>\n</ol>\n<h1 id=\"_2-cmake\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-cmake\"><span>2.Cmake</span></a></h1>\n<h2 id=\"_2-1-cmake-的概念\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-1-cmake-的概念\"><span>2.1.Cmake 的概念</span></a></h2>\n<p>既然有了 <code v-pre>Make</code>，为什么会有 <code v-pre>CMake</code> 的存在呢？实际上，早期不同平台的 <code v-pre>Make</code> 面对大型项目难以维护，脚本编写和维护难度都比较高，并且不同平台有不同的编译链，迁移成本也比较高，因此就出现了 <code v-pre>CMake</code>，您可以 <a href=\"https://cmake.org/\" target=\"_blank\" rel=\"noopener noreferrer\">前去 CMake 的官网查看 Camke 的历史</a>，也可以 <a href=\"https://github.com/Kitware/CMake\" target=\"_blank\" rel=\"noopener noreferrer\">去 Github 上查看 CMake 的源代码</a>。另外，还有一份 <a href=\"https://cmake-doc.readthedocs.io/zh-cn/latest/guide/tutorial/A%20Basic%20Starting%20Point.html\" target=\"_blank\" rel=\"noopener noreferrer\">简单易懂的 CMake 官方教程</a> 也值得您查阅，不过也许是翻译的原因，有些地方读起来怪怪的，说得不是很清楚，所要这里关于 CMake 是对官方教程的补充的简化，旨在为您快速掌握 <code v-pre>CMake</code> 基础。</p>\n<blockquote>\n<p>吐槽：在 <code v-pre>Cpp</code> 领域日渐被蚕食的今天，<code v-pre>CMake</code> 才是 <code v-pre>Cpp</code> 的未来。</p>\n</blockquote>\n<h2 id=\"_2-2-cmake-的使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-cmake-的使用\"><span>2.2.Cmake 的使用</span></a></h2>\n<p>接下来我将在 <code v-pre>Linux</code> 系统上演示关于 <code v-pre>CMake</code> 的使用，我是用的是 <code v-pre>CMake 3.22.1</code>，如果您的版本何我不一样可能会有些一些操作需要变化，请您仔细查看本文。</p>\n<h3 id=\"_2-2-1-cmake-的基本使用\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-1-cmake-的基本使用\"><span>2.2.1.CMake 的基本使用</span></a></h3>\n<p>和 <code v-pre>Make</code> 类似，<code v-pre>Cmake</code> 也需要编写构建文件 <code v-pre>CMakeList.txt</code>，但是编写过程更加简单，功能更加强大。简单点，现在假设您的项目结构如下所示。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目结构</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">my_simple_project/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>在 <code v-pre>main.cpp</code> 文件中，您可以开始编写 <code v-pre>C/C++</code> 程序，例如：</p>\n<div class=\"language-cpp line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cpp\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// main.cc: 计算给定数字的平方根并将结果输出到终端</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cmath</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">cstdlib</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">#</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">string</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argc</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> char*</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> (</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">argc </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">        std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Usage: </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\"> argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> number</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">        return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> double</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> inputValue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> atof</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">argv</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> double</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> outputValue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> sqrt</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">(</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">inputValue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">The square root of </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> inputValue </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> outputValue</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">        &#x3C;&#x3C;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">::</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后开始 编写 <code v-pre>CMakeList.txt</code> 文件，<code v-pre>CMakeLists.txt</code> 文件主要由变量和指令构成，通过指令可以给一些 <code v-pre>CMake</code> 变量进行设置。</p>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cmake_minimum_required</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 3.10) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(my_simple_project) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD 11) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD_REQUIRED </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(my_executable main.cc) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>接下来要开始构建这个项目，不过您先需要在项目的根目录下（<code v-pre>MySimpleProject/</code>）<mark>使用 <code v-pre>mkdir bulid &amp;&amp; cd build</code></mark>，也就是创建构建文件夹后再进入该文件夹中开始 <mark>运行 <code v-pre>cmake ..</code> 命令</mark> 来生成构建目标，这样对构建文件的处理会比较好一下，因为 <code v-pre>CMake</code> 会把构建的目标和其他的某些自带配置文件、缓存文件等也一起放入其中。</p>\n<div class=\"language-sh line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"sh\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-sh\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始构建项目</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 创建并进入构建目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 运行 CMake 以生成构建系统</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/c++</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Configuring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Generating</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> have</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> been</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> written</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/root/tests/cmake_test/build</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  tree</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCache.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeFiles</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.22.1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCCompiler.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCXXCompiler.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDetermineCompilerABI_C.bin</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDetermineCompilerABI_CXX.bin</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeSystem.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CompilerIdC</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a.out</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCCompilerId.c</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CompilerIdCXX</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> a.out</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeCXXCompilerId.cpp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake.check_cache</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeDirectoryInformation.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeOutput.log</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeTmp</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> my_executable.dir</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake_clean.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler_depend.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler_depend.ts</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> DependInfo.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> depend.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> flags.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> link.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> progress.make</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> progress.marks</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> TargetDirectories.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake_install.cmake</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Makefile</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">8</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> directories,</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 28</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>不过 <code v-pre>CMake ..</code> 的执行并没有完成真正的编译构造，这一步只是执行了一系列的配置构建环境和生成构建文件，您可以看看上述执行后目录结构发生的变化，这里一步步解释多出来的文件。</p>\n<ul>\n<li>\n<p><code v-pre>CMakeCache.txt</code> 缓存文件，保存了 <code v-pre>CMake</code> 配置过程中生成的变量和选项。它包括编译器路径、库路径、<code v-pre>CMake</code> 配置选项等。这个文件可以帮助 <code v-pre>CMake</code> 在后续配置中快速获取信息，而不需要重新执行所有的检测</p>\n</li>\n<li>\n<p><code v-pre>CMakeFiles/</code> 这是一个包含各种 <code v-pre>CMake</code> 构建信息和临时文件的目录</p>\n<ul>\n<li>\n<p><code v-pre>3.22.1/</code> 这是 <code v-pre>CMake</code> 版本目录，用于存放与特定 <code v-pre>CMake</code> 版本相关的文件</p>\n<ul>\n<li><code v-pre>CMakeCCompiler.cmake</code> 记录了 <code v-pre>C</code> 编译器的配置，指导如何使用</li>\n<li><code v-pre>CMakeCXXCompiler.cmake</code> 记录了 <code v-pre>C++</code> 编译器的配置，指导如何使用</li>\n<li><code v-pre>CMakeDetermineCompilerABI_C.bin</code> 用于确定 <code v-pre>C</code> 编译器的 <code v-pre>ABI</code>（应用程序二进制接口）</li>\n<li><code v-pre>CMakeDetermineCompilerABI_CXX.bin</code> 用于确定 <code v-pre>C++</code> 编译器的 <code v-pre>ABI</code>（应用程序二进制接口）</li>\n<li><code v-pre>CMakeSystem.cmake</code> 记录系统信息，如操作系统、编译器版本等</li>\n<li><code v-pre>CompilerIdC/</code> 内部的文件检测 <code v-pre>C</code> 编译器的工具和信息，验证编译器的有效性</li>\n<li><code v-pre>CompilerIdCXX/</code> 内部的文件检测 <code v-pre>C++</code> 编译器的工具和信息，验证编译器的有效</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>cmake.check_cache</code> 缓存检查文件，在每次 <code v-pre>CMake</code> 运行时，它会检查 <code v-pre>CMakeCache.txt</code> 是否有变化。如果发现缓存中的某些设置或变量已被修改，有助于决定是否需要重新生成缓存或者进行重新配置</p>\n</li>\n<li>\n<p><code v-pre>CMakeDirectoryInformation.cmake</code> 目录信息文件，记录构建目录的相关信息</p>\n</li>\n<li>\n<p><code v-pre>CMakeOutput.log</code> 记录 <code v-pre>CMake</code> 配置过程的输出日志</p>\n</li>\n<li>\n<p><code v-pre>CMakeTmp</code> 临时文件目录，用于存放在构建过程中生成的临时文件</p>\n</li>\n<li>\n<p><code v-pre>Makefile2</code> 是一个由 <code v-pre>CMake</code> 生成的文件，通常作为 <code v-pre>Makefile</code> 的辅助文件，包含了构建过程的详细依赖规则和构建目标之间的依赖关系。它用于分离和组织 <code v-pre>Makefile</code> 中的复杂规则和依赖关系，使得主 <code v-pre>Makefile</code> 更加简洁</p>\n</li>\n<li>\n<p><code v-pre>Makefile.cmake</code>：用于将 <code v-pre>CMake</code> 指令和变量转换为适合 <code v-pre>Makefile</code> 系统使用的格式，它帮助 <code v-pre>CMake</code> 将 <code v-pre>CMakeLists.txt</code> 中定义的配置和规则转换为 <code v-pre>Makefile</code> 可执行的具体指令</p>\n</li>\n<li>\n<p><code v-pre>my_executable.dir/</code> 包含特定目标（例如 <code v-pre>my_executable</code>）的构建文件和信息，这里就不细细展开了，比较复杂...</p>\n</li>\n<li>\n<p><code v-pre>progress.marks</code> 文件用于跟踪构建过程中的进度信息，特别是在使用 <code v-pre>make</code> 或其他构建工具进行并行构建时。这个文件帮助 <code v-pre>CMake</code> 了解哪些构建任务已经完成、哪些还在进行中，从而可以在命令行上显示构建进度</p>\n</li>\n<li>\n<p><code v-pre>TargetDirectories.txt</code> 文件用于记录构建系统中各个目标（如可执行文件、库等）的输出目录信息。这个文件确保每个构建目标都能正确地生成到指定的目录中，并且这些目录的信息在整个构建过程中是可以访问的，避免路径错误或文件错位的情况</p>\n</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>cmake_install.cmake</code> 安装脚本文件，生成用于安装构建产物的 <code v-pre>CMake</code> 脚本，它通常用于执行 <code v-pre>make install</code> 或 <code v-pre>cmake --install</code> 命令时，指定如何安装编译生成的文件和库</p>\n</li>\n<li>\n<p><code v-pre>Makefile</code> 生成的 <code v-pre>Makefile</code> 文件，用于 <code v-pre>make</code> 命令。它包含了构建项目所需的所有构建规则和依赖关系，<code v-pre>make</code> 命令会根据这个文件执行编译、链接和其他构建任务</p>\n</li>\n</ul>\n<p><code v-pre>OK</code>，现在您已经简单了解了 <code v-pre>CMake</code> 的构建系统，现在就可以开始编译了，使用 <code v-pre>cmake --build .</code> 替代 <code v-pre>make</code> 编译程序（比 <code v-pre>make</code> 会更加具有可移植性）。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开始编译源代码</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cmake</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 50%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Built target my_executable</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeFiles</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  CMakeCache.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  cmake_install.cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  Makefile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  my_executable</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">$ </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">./my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">Usage:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> number</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ./my_executable</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> square</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> of</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2.82843</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这将生成一个可执行文件 <code v-pre>my_executable</code>（或在 <code v-pre>Windows</code> 上可能是 <code v-pre>my_executable.exe</code>），您可以运行它来执行程序。</p>\n<h3 id=\"_2-2-2-cmake-的常用指令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-cmake-的常用指令\"><span>2.2.2.CMake 的常用指令</span></a></h3>\n<p>虽然每个小节只讲一个指令，但是有可能不得不混入一些其他没有和您说明的指令，这些指令我会给出注释...</p>\n<h4 id=\"_2-2-2-1-message\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-1-message\"><span>2.2.2.1.message()</span></a></h4>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># message(): 打印日志信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message([</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">&#x3C;mode>] </span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">messag...</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用这个指令可以用来输出一些构建信息, &#x3C;mode> 是消息的等级</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># STATUS 显示普通的消息, 通常用于显示信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># WARNING 显示警告消息, 通常用于提示潜在的问题</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># SEND_ERROR 显示错误消息并设置 CMake 生成失败, 后续的生成过程会中止</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># FATAL_ERROR 显示致命错误消息并立即停止生成过程</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># DEPRECATION 显示弃用警告消息</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>我们后面会频繁使用这个 <code v-pre>message()</code> 开打印信息，所以这里就不展示使用了。</p>\n<h4 id=\"_2-2-2-2-project\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-2-project\"><span>2.2.2.2.project()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># project(): 用于配置项目名称和版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(项目名称 </span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 主版本号.次版本号.修补版本号.微小补修版本号)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 当 CMake 执行 project() 后会设置以下变量, 可以使用 ${变量名} 引用变量的值</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_NAME 项目名称</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION 项目的完整版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_MAJOR 项目的主版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_MINOR 项目的次版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_PATCH 项目的修补版本号(若无指定就为空)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># PROJECT_VERSION_TWEAK 项目的微小修补版本号(若无指定就为空)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 project()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> s</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cmake_minimum_required(VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.10</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project(my_simple_project</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 打印项目信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_NAME: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_NAME</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MAJOR: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MAJOR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MINOR: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_MINOR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_PATCH: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_PATCH</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">message(STATUS</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_TWEAK: </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">${</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">PROJECT_VERSION_TWEAK</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD_REQUIRED</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">add_executable(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> The</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> identification</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> is</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> GNU</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> C</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ABI</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> info</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Check</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> for</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> working</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compiler:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /usr/bin/c++</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Detecting</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CXX</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> compile</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> features</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> -</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_NAME:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> my_simple_project</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_MAJOR:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_MINOR:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_PATCH:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PROJECT_VERSION_TWEAK:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Configuring</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Generating</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">--</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> Build</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> files</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> have</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> been</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> written</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> to:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> /home/ljp/tests/cmake_test/build</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 50%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">[</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">100%</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">]</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> Built target my_executable</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h4 id=\"_2-2-2-2-configure-file\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-2-configure-file\"><span>2.2.2.2.configure_file()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># configure_file(): 用于处理配置文件模板 .in 并生成实际的配置文件 .h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">configure_file</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(&#x3C;input> &#x3C;output> [COPYONLY] [ESCAPE_QUOTES] [@ONLY])</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># configure_file() </span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># &#x3C;input> 输入模板文件的路径(xxx.h.in)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># &#x3C;output> 输出文件的路径(xxx.h), 默认输出到 cmake --bulid . 时的 . 目录下</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># COPYONLY 仅将文件从源目录复制到目标目录, 而不进行变量替换</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># ESCAPE_QUOTES 转义输出文件中的引号字符(用于处理包含引号的内容)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># @ONLY 仅替换以 @VAR@ 形式出现的变量, 不替换 ${VAR} 形式的变量, 不过这种场景我暂时没有找到, 待补充...</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 configure_file()</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ls</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">CMakeLists.txt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.cc</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">  main.h.in</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> cat</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> *</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">cmake_minimum_required(VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3.10</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定最小 CMake 版本</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project(my_simple_project</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> VERSION</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 1.2.3.4</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 项目的名字</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">configure_file(main.h.in</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.h</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 配置文件的处理, 由于生成的头文件默认输出到 cmake --bulid . 时的 . 目录下, 也就是 ${CMAKE_BINARY_DIR} 的值, 因此后面需要把源文件的头文件目录 target_include_directories() 指定一下, 否则找不到头文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 11</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 C++ 标准, 例如 C++11、C++14、C++17 等</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">CMAKE_CXX_STANDARD_REQUIRED</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">add_executable(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定要构建的可执行文件和它的源代码文件</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">target_include_directories(my_executable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> PRIVATE</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> ${</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">CMAKE_BINARY_DIR</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) </span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 将构建目录添加到包含目录列表中, 这样编译时才可以找到对应的头文件. 而这里的 PRIVATE 意味着只有在编译当前目标时, 编译器会查找这些目录中的头文件, 这里 ${CMAKE_BINARY_DIR} 值等价于 /home/root/tests/cmake_test/bulid</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">//</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 打印头文件中的宏</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include &#x3C;iostream></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">#include \"main.h\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">int</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">()</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    std::cout</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\"> &#x3C;&#x3C;</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"Tutorial Version: \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_MAJOR &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_MINOR &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_PATCH &#x3C;&#x3C; \".\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">              &#x3C;&#x3C; MAIN_VERSION_TWEAK &#x3C;&#x3C; std::endl;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">    return 0;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">// main.h.in: 模板文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#ifndef MAIN_H</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_H</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_MAJOR @PROJECT_VERSION_MAJOR@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_MINOR @PROJECT_VERSION_MINOR@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_PATCH @PROJECT_VERSION_PATCH@</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#define MAIN_VERSION_TWEAK @PROJECT_VERSION_TWEAK@</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">#endif</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> // MAIN_H</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$ mkdir build &#x26;&#x26; cd build &#x26;&#x26; cmake .. &#x26;&#x26; cmake --build . &#x26;&#x26; ./my_executable  &#x26;&#x26; cd ..</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- The C compiler identification is GNU 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- The CXX compiler identification is GNU 11.4.0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compiler ABI info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compiler ABI info - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Check for working C compiler: /usr/bin/cc - skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compile features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting C compile features - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compiler ABI info</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compiler ABI info - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Check for working CXX compiler: /usr/bin/c++ - skipped</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compile features</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Detecting CXX compile features - done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_NAME: my_simple_project</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION: 1.2.3.4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_MAJOR: 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_MINOR: 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_PATCH: 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- PROJECT_VERSION_TWEAK: 4</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Configuring done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Generating done</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">-- Build files have been written to: /home/ljp/tests/cmake_test/build</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[ 50%] Building CXX object CMakeFiles/my_executable.dir/main.cc.o</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[100%] Linking CXX executable my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[100%] Built target my_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">Tutorial Version: 1.2.3.4</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>这里我制作一个模板文件 <code v-pre>.h.in</code> 做个例子。</p>\n<blockquote>\n<p>补充：<code v-pre>${CMAKE_BINARY_DIR}</code> 是由 <code v-pre>CMake</code> 在配置阶段自动设置的变量，它的值是构建目录的路径，即您在运行 <code v-pre>CMake</code> 时指定的目录。</p>\n<p>如果你在项目根目录中创建了一个 <code v-pre>build</code> 子目录，并在其中运行 CMake 配置命令，如：</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">mkdir</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> cd</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> cmake</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ..</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div></div></div><p>此时 <code v-pre>${CMAKE_BINARY_DIR}</code> 将被设置为 <code v-pre>build</code> 目录的路径，例如 <code v-pre>/path/to/project/build</code>，在使用一些指令时会自动添加这个路径信息。</p>\n</blockquote>\n<blockquote>\n<p>补充：上述之所以把生成的 <code v-pre>.h</code> 配置文件放在了 <code v-pre>bulid</code> 的内部，主要原因是因为可以让所有是 <code v-pre>CMake</code> 产生的文件都处于 <code v-pre>bulid</code> 中方便管理。</p>\n</blockquote>\n<blockquote>\n<p>吐槽：不知道为什么，翻译版的官方文档把构建目录 <code v-pre>build</code> 称为二进制目录，搞得我疑惑了好久...</p>\n</blockquote>\n<h4 id=\"_2-2-2-3-set\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-3-set\"><span>2.2.2.3.set()</span></a></h4>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># set(): 创建或设置 CMake 变量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(变量名, 设定值)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 使用 set() 可以创建或设置 CMake 变量或用户自己设置的自定义变量, 不过用户在创建自定义变量的时候, 命名应该尽量避免使用 CMAKE_ 打头, 例如 CMAKE_BINARY_DIR, 这些变量有些 CMake 已经帮我们在 CMake 一运行的时候就设置好了, 再修改有可能引发奇怪的错误。也有的可以交给用户变量来设置，例如 CMAKE_CXX_STANDARD, CMAKE_CXX_STANDARD_REQUIRED</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>我们上面也已经用过，这里只是简单补全一下概念。</p>\n<h4 id=\"_2-2-2-4-add-library\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-2-4-add-library\"><span>2.2.2.4.add_library()</span></a></h4>\n<h3 id=\"_2-2-3-高级使用-cmake\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-2-3-高级使用-cmake\"><span>2.2.3.高级使用 CMake</span></a></h3>\n<p>如果可以，我们在掌握了以上的所有知识后，应该给与一个实际的项目使用 <code v-pre>CMake</code> 进行管理，下面我给出一个比较接近实际工程的 <code v-pre>Cpp</code> 项目目录，并且编写对应的 <code v-pre>CMakeLists.txt</code> 文件。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># Cpp 工程目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">$</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tree</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">project_name/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .git</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # git 存储仓库</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> .gitignore</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # git 忽略文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 第三方库目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> gtest/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # Goolge 单元测试框架</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty_1/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3rdparty_2/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> project_name/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目源代码目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.h</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序头文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> main.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序源文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目主模块1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dir_1/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 子模块1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> dir_2/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 子模块2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   │</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module1.h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目主模块2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">       └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> module2.h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> tests/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目测试代码目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_main.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主程序单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_module1.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主模块1单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">│</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">   └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> test_module2.cc</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 主模块2单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> CMakeLists.txt</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 使用 CMake 管理项目构建</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> build/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存放 CMake 后的构建系统文件和目标文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> LICENSE</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目许可证信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> README.md</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目说明文档</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> doc/doxygen.html</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 项目指导文档</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">└──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> deploy/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存放可以对外交付/部署的文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> bin/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付可执行的二进制文件(用户可以直接使用)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    ├──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> include/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付头文件(用户可以调用接口)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    └──</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> lib/</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 可交付库文件(支持用户调用接口对应的实现)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>则我们需要对应的 <code v-pre>CMakeLists.txt</code> 内容如下举例。</p>\n<div class=\"language-cmake line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"cmake\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-cmake\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># CMakeList.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 指定 CMake 最低版本</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">cmake_minimum_required</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 3.10)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置项目名称和版本号</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">project</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B07D48;--shiki-dark:#BD976A\">project_name</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> VERSION</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> 1.0 LANGUAGES CXX)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 强制指定 C++ 标准</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD 11)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(CMAKE_CXX_STANDARD_REQUIRED </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">True</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置变量</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(SOURCE_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/project_name\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(INCLUDE_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/project_name\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(THIRD_PARTY_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/3rdparty\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(TEST_DIR </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">\"${CMAKE_SOURCE_DIR}/tests\"</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 添加全局项目头文件目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">include_directories</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/include</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建项目可执行文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">set</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">SOURCES</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/main.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module1/module1.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${SOURCE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/module2/module2.cc</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${SOURCES}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 链接第三方库</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/lib/libname1.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/lib/libname2.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 打开单元测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enable_testing</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 创建测试可执行文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module1 </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_module1.cc)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module2 </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_module2.cc)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_executable</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_main </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${TEST_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/test_main.cc)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 链接 Google Test 库到测试目标</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_module2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">target_link_libraries</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(test_main</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    ${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/gtest/lib/libgtest.a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 添加测试</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestModule1 </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_module1)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestModule2 </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_module2)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">add_test</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">NAME</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> TestMain </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">COMMAND</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> test_main)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 设置安装规则</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(TARGETS </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${PROJECT_NAME}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">_executable DESTINATION deploy/bin)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${INCLUDE_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_1/include/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${THIRD_PARTY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/3rdparty_2/include/ DESTINATION deploy/include)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">install</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(DIRECTORY </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">${CMAKE_BINARY_DIR}</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">/lib/ DESTINATION deploy/lib)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n# 1.Make\n\n## 1.1.Make 的概念\n\n`make` 是一个指令，`makefile` 是一个在当前目录下存在的一个具有特定格式的文件。\n\n如果在 `Linux` 中编写了大量的代码文件，难不成要一个一个使用 `gcc/h++` 编译吗，要是代码出了问题，修改后又需要编译怎么办？因此出现了 `make` 这样的自动化构建工具。 \n\n## 1.2.Make 的使用\n\n### 1.2.1.编写代码文件\n\n先在一个目录下编写一个或多个 `.c` 源文件。\n\n### 1.2.2.编写构建文件\n\n1. 首先 `touch` 一个 `makefile` 文件\n\n2. `makefile` 内部编写目标文件、依赖文件列表、依赖方法\n\n3. 写入用作清理的伪目标，`.PHONY` 是修饰伪目标的关键字\n\n```bash\n# make 指令自顶向下执行，如果直接使用 make 指令就会执行第一份依赖命令\n\n#目标文件: 依赖文件列表\n#   依赖方法（Linux 下的命令）\n#.PHONY: 伪目标（重点是执行方法而不是目的（“phony”即“假的，伪的”））\n#   依赖方法\n\nrun:main.c #依赖关系\n    gcc main.c -o run #依赖方法\n\n.PHONY:clean #没有依赖关系，设定为伪目标\nclean:\n    rm -f run #依赖方法\n```\n\n4. 使用 `make` 指令运行 `makefile` 文件，不指定目标直接使用 `make` 指令，就会自动找第一对依赖关系和依赖方法（即 `makefile` 的第一个目标）。\n\n### 1.2.3.运行构建工具\n\n#### 1.2.3.1.尝试构建\n\n```bash\n# 尝试使用 make\n$ ll\ntotal 8\n-rw-rw-r-- 1 limou limou 147 Sep 14 10:51 main.c\n-rw-rw-r-- 1 limou limou  62 Sep 14 10:53 makefile\n$ cat main.c\n#include <stdio.h>\nint main()\n{\n    int i = 0;\n    for(i; i < 10; i++)\n    {\n        printf(\"%d \", i * i);\n    }\n    printf(\"\\n\");\n    return 0;\n}\n$ cat makefile\nrun:main.c\n    gcc main.c -o run\n.PHONY:clean\n\nclean:\n    rm -f run\n\n$ make run\ngcc main.c -o run\n\n$ ll\ntotal 20\n-rwxrwxr-x 1 limou limou 8408 Sep 14 10:54 run\n-rw-rw-r-- 1 limou limou  147 Sep 14 10:51 main.c\n-rw-rw-r-- 1 limou limou   62 Sep 14 10:53 makefile\n\n$ ./run\n0 1 4 9 16 25 36 49 64 81 \n\n$ make clean\nrm -f run\n\n$ ll\ntotal 8\n-rw-rw-r-- 1 limou limou 147 Sep 14 10:51 main.c\n-rw-rw-r-- 1 limou limou  62 Sep 14 10:53 makefile\n```\n\n#### 1.2.3.2.重复执行\n\n很多书都会写：“伪目标总是会被执行的”。例如：\n\n1. `make run/make` 指令是不能被重复调用的（会显示 `make:'run' is up to date.`。\n   除非我们要编译的源文件的最近修改时间发生了变动，也就是说如果源文件没有经过修改，`make run` 是不会再次编译的，因为这样做的效率低下（大型的文件编译的时间非常久））。\n   另外如果我们对源文件使用 `touch` 指令更新修改时间，那么就也是能重复使用 `make main` 指令。\n\n2. 但 `make clean` 指令总是可以被调用的。因此“总是被执行”的另外一个说法是“总是会根据依赖关系，执行依赖方法”。\n\n> 补充：使用 `stat` 可以查看文件的三个重要时间\n> \n> 1. `Access`：文件最近被访问的时间（即：读取的时候，`touch` 只更改这个时间，但是由于 `Access` 也是属性，所以这个改动也会同时改动 `Change` 属性），如果修改了文件也算访问。不过由于读取文件是高频工作，因此 `Linux` 修改了内核，只会在一定时间后进行修改，不会读取一次就修改一次（每次都修改就会导致反复访问磁盘，导致效率低下）\n> \n> 2. `Modify`：文件的最近内容修改时间（`make` 指令就是看这个文件来确认是否要重新编译的），不过有的时候改变内容会改变大小，导致文件的属性变化，`Change` 也发生了变化\n> \n> 3. `Change`：文件的最近属性修改时间，比如：文件权限的设置、文件的大小改变\n\n> 注意：文件改变的本质不是时间变化，而是随着时间文件内容产生新旧内容。\n\n#### 1.2.3.3.自动推导\n\n`make` 可以进行自动推导（嵌套代码），但是一般不建议像下面这么写，只是为了证明 `make` 可以自动推导这一现象：\n\n```bash\nrun:main.o\n    gcc main.o -o run\nmain.o:main.s\n    gcc -c main.s -o main.o\nmian.s:main.i\n    gcc -S mian.i -o mian.s\nmian.i:mian.c\n    gcc -E main.c -o main.i\n\n.PHONY:clean\n\nclean:\n    rm -f run main.i main.s main.o\n```\n\n#### 1.2.3.4.拓展学习\n\n上面的知识在平时的学习和使用中就很够用了，但是我们可以拓展学习一些其他的内容。\n\n1. 有的时候不希望打印出使用 `make` 命令的信息，这个时候可以在每个依赖方法前加上 `@` 符号，这样就不会回显信息了\n\n2. 在 `makefile` 允许创建变量，因此我们上面的代码还可以改写为更加普遍的（变量的赋值一般不建议留空格，不过您其实可以将这种变量作为宏来理解）\n   \n   ```bash\n   cc=gcc\n   src=main.c\n   target=run\n   \n   $(TAGET):$(src) #依赖关系\n       $(cc) $(src) -o $(target) #依赖方法\n   \n   .PHONY:clean #伪目标\n   clean:\n       rm -f $(target) #依赖方法\n   ```\n\n3. `makefile` 还可以在依赖方法省略依赖关系用到的依赖文件列表和目标文件\n   \n   ```bash\n   run:main.c #依赖关系\n       gcc $^ -o $@ #依赖方法，$^表示冒号右侧内容，$@表示冒号左侧的内容\n   \n   .PHONY:clean #没有依赖关系，设定为伪目标\n   clean:\n       rm -f run #依赖方法\n   ```\n\n\n# 2.Cmake\n\n## 2.1.Cmake 的概念\n\n既然有了 `Make`，为什么会有 `CMake` 的存在呢？实际上，早期不同平台的 `Make` 面对大型项目难以维护，脚本编写和维护难度都比较高，并且不同平台有不同的编译链，迁移成本也比较高，因此就出现了 `CMake`，您可以 [前去 CMake 的官网查看 Camke 的历史](https://cmake.org/)，也可以 [去 Github 上查看 CMake 的源代码](https://github.com/Kitware/CMake)。另外，还有一份 [简单易懂的 CMake 官方教程](https://cmake-doc.readthedocs.io/zh-cn/latest/guide/tutorial/A%20Basic%20Starting%20Point.html) 也值得您查阅，不过也许是翻译的原因，有些地方读起来怪怪的，说得不是很清楚，所要这里关于 CMake 是对官方教程的补充的简化，旨在为您快速掌握 `CMake` 基础。\n\n>   吐槽：在 `Cpp` 领域日渐被蚕食的今天，`CMake` 才是 `Cpp` 的未来。\n\n## 2.2.Cmake 的使用\n\n接下来我将在 `Linux` 系统上演示关于 `CMake` 的使用，我是用的是 `CMake 3.22.1`，如果您的版本何我不一样可能会有些一些操作需要变化，请您仔细查看本文。\n\n### 2.2.1.CMake 的基本使用\n\n和 `Make` 类似，`Cmake` 也需要编写构建文件 `CMakeList.txt`，但是编写过程更加简单，功能更加强大。简单点，现在假设您的项目结构如下所示。\n\n```shell\n# 项目结构\nmy_simple_project/\n├── CMakeLists.txt\n└── main.cc\n```\n\n在 `main.cpp` 文件中，您可以开始编写 `C/C++` 程序，例如：\n\n```cpp\n// main.cc: 计算给定数字的平方根并将结果输出到终端\n#include <cmath>\n#include <cstdlib>\n#include <iostream>\n#include <string>\n\nint main(int argc, char* argv[]) {\n    if (argc < 2) {\n        std::cout << \"Usage: \" << argv[0] << \" number\" << std::endl;\n        return 1;\n    }\n\n    const double inputValue = atof(argv[1]);\n    const double outputValue = sqrt(inputValue);\n    \n    std::cout << \"The square root of \" << inputValue << \" is \" << outputValue\n        << std::endl;\n    return 0;\n}\n```\n\n然后开始 编写 `CMakeList.txt` 文件，`CMakeLists.txt` 文件主要由变量和指令构成，通过指令可以给一些 `CMake` 变量进行设置。\n\n```cmake\n# CMakeList.txt\ncmake_minimum_required(VERSION 3.10) # 指定最小 CMake 版本\n\nproject(my_simple_project) # 项目的名字\n\nset(CMAKE_CXX_STANDARD 11) # 指定 C++ 标准, 例如 C++11、C++14、C++17 等\nset(CMAKE_CXX_STANDARD_REQUIRED True) # 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能\n\nadd_executable(my_executable main.cc) # 指定要构建的可执行文件和它的源代码文件\n```\n\n接下来要开始构建这个项目，不过您先需要在项目的根目录下（`MySimpleProject/`）==使用 `mkdir bulid && cd build`==，也就是创建构建文件夹后再进入该文件夹中开始 ==运行 `cmake ..` 命令== 来生成构建目标，这样对构建文件的处理会比较好一下，因为 `CMake` 会把构建的目标和其他的某些自带配置文件、缓存文件等也一起放入其中。\n\n```sh\n# 开始构建项目\n$ ls\nCMakeLists.txt  main.cc\n\n$ mkdir build && cd build # 创建并进入构建目录\n$ cmake .. # 运行 CMake 以生成构建系统\n-- The C compiler identification is GNU 11.4.0\n-- The CXX compiler identification is GNU 11.4.0\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /usr/bin/cc - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/root/tests/cmake_test/build\n\n$  tree\n.\n├── CMakeCache.txt\n├── CMakeFiles\n│   ├── 3.22.1\n│   │   ├── CMakeCCompiler.cmake\n│   │   ├── CMakeCXXCompiler.cmake\n│   │   ├── CMakeDetermineCompilerABI_C.bin\n│   │   ├── CMakeDetermineCompilerABI_CXX.bin\n│   │   ├── CMakeSystem.cmake\n│   │   ├── CompilerIdC\n│   │   │   ├── a.out\n│   │   │   ├── CMakeCCompilerId.c\n│   │   │   └── tmp\n│   │   └── CompilerIdCXX\n│   │       ├── a.out\n│   │       ├── CMakeCXXCompilerId.cpp\n│   │       └── tmp\n│   ├── cmake.check_cache\n│   ├── CMakeDirectoryInformation.cmake\n│   ├── CMakeOutput.log\n│   ├── CMakeTmp\n│   ├── Makefile2\n│   ├── Makefile.cmake\n│   ├── my_executable.dir\n│   │   ├── build.make\n│   │   ├── cmake_clean.cmake\n│   │   ├── compiler_depend.make\n│   │   ├── compiler_depend.ts\n│   │   ├── DependInfo.cmake\n│   │   ├── depend.make\n│   │   ├── flags.make\n│   │   ├── link.txt\n│   │   └── progress.make\n│   ├── progress.marks\n│   └── TargetDirectories.txt\n├── cmake_install.cmake\n└── Makefile\n\n8 directories, 28 files\n```\n\n不过 `CMake ..` 的执行并没有完成真正的编译构造，这一步只是执行了一系列的配置构建环境和生成构建文件，您可以看看上述执行后目录结构发生的变化，这里一步步解释多出来的文件。\n\n-   `CMakeCache.txt` 缓存文件，保存了 `CMake` 配置过程中生成的变量和选项。它包括编译器路径、库路径、`CMake` 配置选项等。这个文件可以帮助 `CMake` 在后续配置中快速获取信息，而不需要重新执行所有的检测\n-   `CMakeFiles/` 这是一个包含各种 `CMake` 构建信息和临时文件的目录\n    -   `3.22.1/` 这是 `CMake` 版本目录，用于存放与特定 `CMake` 版本相关的文件\n        -   `CMakeCCompiler.cmake` 记录了 `C` 编译器的配置，指导如何使用\n        -   `CMakeCXXCompiler.cmake` 记录了 `C++` 编译器的配置，指导如何使用\n        -   `CMakeDetermineCompilerABI_C.bin` 用于确定 `C` 编译器的 `ABI`（应用程序二进制接口）\n        -   `CMakeDetermineCompilerABI_CXX.bin` 用于确定 `C++` 编译器的 `ABI`（应用程序二进制接口）\n        -   `CMakeSystem.cmake` 记录系统信息，如操作系统、编译器版本等\n        -   `CompilerIdC/` 内部的文件检测 `C` 编译器的工具和信息，验证编译器的有效性\n        -   `CompilerIdCXX/` 内部的文件检测 `C++` 编译器的工具和信息，验证编译器的有效\n        \n    -   `cmake.check_cache` 缓存检查文件，在每次 `CMake` 运行时，它会检查 `CMakeCache.txt` 是否有变化。如果发现缓存中的某些设置或变量已被修改，有助于决定是否需要重新生成缓存或者进行重新配置\n\n    -   `CMakeDirectoryInformation.cmake` 目录信息文件，记录构建目录的相关信息\n    \n    -   `CMakeOutput.log` 记录 `CMake` 配置过程的输出日志\n    \n    -   `CMakeTmp` 临时文件目录，用于存放在构建过程中生成的临时文件\n    \n    -   `Makefile2` 是一个由 `CMake` 生成的文件，通常作为 `Makefile` 的辅助文件，包含了构建过程的详细依赖规则和构建目标之间的依赖关系。它用于分离和组织 `Makefile` 中的复杂规则和依赖关系，使得主 `Makefile` 更加简洁\n    \n    -   `Makefile.cmake`：用于将 `CMake` 指令和变量转换为适合 `Makefile` 系统使用的格式，它帮助 `CMake` 将 `CMakeLists.txt` 中定义的配置和规则转换为 `Makefile` 可执行的具体指令\n    \n    -   `my_executable.dir/` 包含特定目标（例如 `my_executable`）的构建文件和信息，这里就不细细展开了，比较复杂...\n    \n    -   `progress.marks` 文件用于跟踪构建过程中的进度信息，特别是在使用 `make` 或其他构建工具进行并行构建时。这个文件帮助 `CMake` 了解哪些构建任务已经完成、哪些还在进行中，从而可以在命令行上显示构建进度\n    \n    -   `TargetDirectories.txt` 文件用于记录构建系统中各个目标（如可执行文件、库等）的输出目录信息。这个文件确保每个构建目标都能正确地生成到指定的目录中，并且这些目录的信息在整个构建过程中是可以访问的，避免路径错误或文件错位的情况\n    \n-   `cmake_install.cmake` 安装脚本文件，生成用于安装构建产物的 `CMake` 脚本，它通常用于执行 `make install` 或 `cmake --install` 命令时，指定如何安装编译生成的文件和库\n-   `Makefile` 生成的 `Makefile` 文件，用于 `make` 命令。它包含了构建项目所需的所有构建规则和依赖关系，`make` 命令会根据这个文件执行编译、链接和其他构建任务\n\n`OK`，现在您已经简单了解了 `CMake` 的构建系统，现在就可以开始编译了，使用 `cmake --build .` 替代 `make` 编译程序（比 `make` 会更加具有可移植性）。\n\n```shell\n# 开始编译源代码\n$ cmake --build .\n[ 50%] Building CXX object CMakeFiles/my_executable.dir/main.cc.o\n[100%] Linking CXX executable my_executable\n[100%] Built target my_executable\n\n$ ls\nCMakeFiles  CMakeCache.txt  cmake_install.cmake  Makefile  my_executable\\\n\n$ ./my_executable\nUsage: ./my_executable number\n\n$ ./my_executable 8\nThe square root of 8 is 2.82843\n```\n\n这将生成一个可执行文件 `my_executable`（或在 `Windows` 上可能是 `my_executable.exe`），您可以运行它来执行程序。\n\n### 2.2.2.CMake 的常用指令\n\n虽然每个小节只讲一个指令，但是有可能不得不混入一些其他没有和您说明的指令，这些指令我会给出注释...\n\n#### 2.2.2.1.message()\n\n```shell\n# message(): 打印日志信息\nmessage([<mode>] \"messag...\")\n# 使用这个指令可以用来输出一些构建信息, <mode> 是消息的等级\n# STATUS 显示普通的消息, 通常用于显示信息\n# WARNING 显示警告消息, 通常用于提示潜在的问题\n# SEND_ERROR 显示错误消息并设置 CMake 生成失败, 后续的生成过程会中止\n# FATAL_ERROR 显示致命错误消息并立即停止生成过程\n# DEPRECATION 显示弃用警告消息\n```\n\n我们后面会频繁使用这个 `message()` 开打印信息，所以这里就不展示使用了。\n\n#### 2.2.2.2.project()\n\n```cmake\n# project(): 用于配置项目名称和版本号\nproject(项目名称 VERSION 主版本号.次版本号.修补版本号.微小补修版本号)\n# 当 CMake 执行 project() 后会设置以下变量, 可以使用 ${变量名} 引用变量的值\n# PROJECT_NAME 项目名称\n# PROJECT_VERSION 项目的完整版本号\n# PROJECT_VERSION_MAJOR 项目的主版本号\n# PROJECT_VERSION_MINOR 项目的次版本号\n# PROJECT_VERSION_PATCH 项目的修补版本号(若无指定就为空)\n# PROJECT_VERSION_TWEAK 项目的微小修补版本号(若无指定就为空)\n```\n\n```shell\n# 使用 project()\n$ s\nCMakeLists.txt  main.cc\n\n$ cat CMakeLists.txt\n# CMakeList.txt\ncmake_minimum_required(VERSION 3.10) # 指定最小 CMake 版本\n\nproject(my_simple_project VERSION 1.2.3.4) # 项目的名字\n\n# 打印项目信息\nmessage(STATUS \"PROJECT_NAME: ${PROJECT_NAME}\")\nmessage(STATUS \"PROJECT_VERSION: ${PROJECT_VERSION}\")\nmessage(STATUS \"PROJECT_VERSION_MAJOR: ${PROJECT_VERSION_MAJOR}\")\nmessage(STATUS \"PROJECT_VERSION_MINOR: ${PROJECT_VERSION_MINOR}\")\nmessage(STATUS \"PROJECT_VERSION_PATCH: ${PROJECT_VERSION_PATCH}\")\nmessage(STATUS \"PROJECT_VERSION_TWEAK: ${PROJECT_VERSION_TWEAK}\")\n\nset(CMAKE_CXX_STANDARD 11) # 指定 C++ 标准, 例如 C++11、C++14、C++17 等\nset(CMAKE_CXX_STANDARD_REQUIRED True) # 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能\n\nadd_executable(my_executable main.cc) # 指定要构建的可执行文件和它的源代码文件\n\n$ mkdir build && cd build && cmake .. && cmake --build .\n-- The C compiler identification is GNU 11.4.0\n-- The CXX compiler identification is GNU 11.4.0\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /usr/bin/cc - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- PROJECT_NAME: my_simple_project\n-- PROJECT_VERSION: 1.2.3.4\n-- PROJECT_VERSION_MAJOR: 1\n-- PROJECT_VERSION_MINOR: 2\n-- PROJECT_VERSION_PATCH: 3\n-- PROJECT_VERSION_TWEAK: 4\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/ljp/tests/cmake_test/build\n[ 50%] Building CXX object CMakeFiles/my_executable.dir/main.cc.o\n[100%] Linking CXX executable my_executable\n[100%] Built target my_executable\n```\n\n#### 2.2.2.2.configure_file()\n\n```cmake\n# configure_file(): 用于处理配置文件模板 .in 并生成实际的配置文件 .h\nconfigure_file(<input> <output> [COPYONLY] [ESCAPE_QUOTES] [@ONLY])\n# configure_file() \n# <input> 输入模板文件的路径(xxx.h.in)\n# <output> 输出文件的路径(xxx.h), 默认输出到 cmake --bulid . 时的 . 目录下\n# COPYONLY 仅将文件从源目录复制到目标目录, 而不进行变量替换\n# ESCAPE_QUOTES 转义输出文件中的引号字符(用于处理包含引号的内容)\n# @ONLY 仅替换以 @VAR@ 形式出现的变量, 不替换 ${VAR} 形式的变量, 不过这种场景我暂时没有找到, 待补充...\n```\n\n```shell\n# 使用 configure_file()\n$ ls\nCMakeLists.txt  main.cc  main.h.in\n\n$ cat *\n# CMakeList.txt\ncmake_minimum_required(VERSION 3.10) # 指定最小 CMake 版本\n\nproject(my_simple_project VERSION 1.2.3.4) # 项目的名字\n\nconfigure_file(main.h.in main.h) # 配置文件的处理, 由于生成的头文件默认输出到 cmake --bulid . 时的 . 目录下, 也就是 ${CMAKE_BINARY_DIR} 的值, 因此后面需要把源文件的头文件目录 target_include_directories() 指定一下, 否则找不到头文件\n\nset(CMAKE_CXX_STANDARD 11) # 指定 C++ 标准, 例如 C++11、C++14、C++17 等\nset(CMAKE_CXX_STANDARD_REQUIRED True) # 确保编译器支持指定的 C++ 标准, 如果不支持就会停止配置功能\n\nadd_executable(my_executable main.cc) # 指定要构建的可执行文件和它的源代码文件\n\ntarget_include_directories(my_executable PRIVATE ${CMAKE_BINARY_DIR}) # 将构建目录添加到包含目录列表中, 这样编译时才可以找到对应的头文件. 而这里的 PRIVATE 意味着只有在编译当前目标时, 编译器会查找这些目录中的头文件, 这里 ${CMAKE_BINARY_DIR} 值等价于 /home/root/tests/cmake_test/bulid\n\n// main.cc: 打印头文件中的宏\n#include <iostream>\n#include \"main.h\"\n\nint main() {\n    std::cout << \"Tutorial Version: \"\n              << MAIN_VERSION_MAJOR << \".\"\n              << MAIN_VERSION_MINOR << \".\"\n              << MAIN_VERSION_PATCH << \".\"\n              << MAIN_VERSION_TWEAK << std::endl;\n\n    return 0;\n}\n\n// main.h.in: 模板文件\n#ifndef MAIN_H\n#define MAIN_H\n\n#define MAIN_VERSION_MAJOR @PROJECT_VERSION_MAJOR@\n#define MAIN_VERSION_MINOR @PROJECT_VERSION_MINOR@\n#define MAIN_VERSION_PATCH @PROJECT_VERSION_PATCH@\n#define MAIN_VERSION_TWEAK @PROJECT_VERSION_TWEAK@\n\n#endif // MAIN_H\n\n$ mkdir build && cd build && cmake .. && cmake --build . && ./my_executable  && cd ..\n-- The C compiler identification is GNU 11.4.0\n-- The CXX compiler identification is GNU 11.4.0\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /usr/bin/cc - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- PROJECT_NAME: my_simple_project\n-- PROJECT_VERSION: 1.2.3.4\n-- PROJECT_VERSION_MAJOR: 1\n-- PROJECT_VERSION_MINOR: 2\n-- PROJECT_VERSION_PATCH: 3\n-- PROJECT_VERSION_TWEAK: 4\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/ljp/tests/cmake_test/build\n[ 50%] Building CXX object CMakeFiles/my_executable.dir/main.cc.o\n[100%] Linking CXX executable my_executable\n[100%] Built target my_executable\nTutorial Version: 1.2.3.4\n```\n\n\n\n这里我制作一个模板文件 `.h.in` 做个例子。\n\n>   补充：`${CMAKE_BINARY_DIR}` 是由 `CMake` 在配置阶段自动设置的变量，它的值是构建目录的路径，即您在运行 `CMake` 时指定的目录。\n>\n>   如果你在项目根目录中创建了一个 `build` 子目录，并在其中运行 CMake 配置命令，如：\n>\n>   ```shell\n>   mkdir build && cd build && cmake ..\n>   ```\n>\n>   此时 `${CMAKE_BINARY_DIR}` 将被设置为 `build` 目录的路径，例如 `/path/to/project/build`，在使用一些指令时会自动添加这个路径信息。\n\n>   补充：上述之所以把生成的 `.h` 配置文件放在了 `bulid` 的内部，主要原因是因为可以让所有是 `CMake` 产生的文件都处于 `bulid` 中方便管理。\n\n>   吐槽：不知道为什么，翻译版的官方文档把构建目录 `build` 称为二进制目录，搞得我疑惑了好久...\n\n#### 2.2.2.3.set()\n\n```cmake\n# set(): 创建或设置 CMake 变量\nset(变量名, 设定值)\n# 使用 set() 可以创建或设置 CMake 变量或用户自己设置的自定义变量, 不过用户在创建自定义变量的时候, 命名应该尽量避免使用 CMAKE_ 打头, 例如 CMAKE_BINARY_DIR, 这些变量有些 CMake 已经帮我们在 CMake 一运行的时候就设置好了, 再修改有可能引发奇怪的错误。也有的可以交给用户变量来设置，例如 CMAKE_CXX_STANDARD, CMAKE_CXX_STANDARD_REQUIRED\n```\n\n我们上面也已经用过，这里只是简单补全一下概念。\n\n#### 2.2.2.4.add_library()\n\n\n\n### 2.2.3.高级使用 CMake\n\n如果可以，我们在掌握了以上的所有知识后，应该给与一个实际的项目使用 `CMake` 进行管理，下面我给出一个比较接近实际工程的 `Cpp` 项目目录，并且编写对应的 `CMakeLists.txt` 文件。\n\n```shell\n# Cpp 工程目录\n$ tree\nproject_name/\n├── .git # git 存储仓库\n├── .gitignore # git 忽略文件\n├── 3rdparty/ # 第三方库目录\n│   ├── gtest/ # Goolge 单元测试框架\n│   │   ├── include/\n│   │   └── lib/\n│   ├── 3rdparty_1/\n│   │   ├── include/\n│   │   └── lib/\n│   └── 3rdparty_2/\n│       ├── include/\n│       └── lib/\n├── project_name/ # 项目源代码目录\n│   ├── main.h # 主程序头文件\n│   ├── main.cc # 主程序源文件\n│   ├── module1/ # 项目主模块1\n│   │   ├── dir_1/ # 子模块1\n│   │   ├── dir_2/ # 子模块2\n│   │   ├── module1.cc\n│   │   └── module1.h\n│   └── module2/ # 项目主模块2\n│       ├── module2.cc\n│       └── module2.h\n├── tests/ # 项目测试代码目录\n│   ├── test_main.cc # 主程序单元测试\n│   ├── test_module1.cc # 主模块1单元测试\n│   └── test_module2.cc # 主模块2单元测试\n├── CMakeLists.txt # 使用 CMake 管理项目构建\n├── build/ # 存放 CMake 后的构建系统文件和目标文件\n├── LICENSE # 项目许可证信息\n├── README.md # 项目说明文档\n├── doc/doxygen.html # 项目指导文档\n└── deploy/ # 存放可以对外交付/部署的文件\n    ├── bin/ # 可交付可执行的二进制文件(用户可以直接使用)\n    ├── include/ # 可交付头文件(用户可以调用接口)\n    └── lib/ # 可交付库文件(支持用户调用接口对应的实现)\n```\n\n则我们需要对应的 `CMakeLists.txt` 内容如下举例。\n\n```cmake\n# CMakeList.txt\n# 指定 CMake 最低版本\ncmake_minimum_required(VERSION 3.10)\n\n# 设置项目名称和版本号\nproject(project_name VERSION 1.0 LANGUAGES CXX)\n\n# 强制指定 C++ 标准\nset(CMAKE_CXX_STANDARD 11)\nset(CMAKE_CXX_STANDARD_REQUIRED True)\n\n# 设置变量\nset(SOURCE_DIR \"${CMAKE_SOURCE_DIR}/project_name\")\nset(INCLUDE_DIR \"${CMAKE_SOURCE_DIR}/project_name\")\nset(THIRD_PARTY_DIR \"${CMAKE_SOURCE_DIR}/3rdparty\")\nset(TEST_DIR \"${CMAKE_SOURCE_DIR}/tests\")\n\n# 添加全局项目头文件目录\ninclude_directories(\n    ${INCLUDE_DIR}\n    ${INCLUDE_DIR}/module1\n    ${INCLUDE_DIR}/module2\n    ${THIRD_PARTY_DIR}/3rdparty_1/include\n    ${THIRD_PARTY_DIR}/3rdparty_2/include\n)\n\n# 创建项目可执行文件\nset(SOURCES\n    ${SOURCE_DIR}/main.cc\n    ${SOURCE_DIR}/module1/module1.cc\n    ${SOURCE_DIR}/module2/module2.cc\n)\nadd_executable(${PROJECT_NAME}_executable ${SOURCES})\n\n# 链接第三方库\ntarget_link_libraries(${PROJECT_NAME}_executable\n    ${THIRD_PARTY_DIR}/3rdparty_1/lib/libname1.a\n    ${THIRD_PARTY_DIR}/3rdparty_2/lib/libname2.a\n)\n\n# 打开单元测试\nenable_testing()\n\n# 创建测试可执行文件\nadd_executable(test_module1 ${TEST_DIR}/test_module1.cc)\nadd_executable(test_module2 ${TEST_DIR}/test_module2.cc)\nadd_executable(test_main ${TEST_DIR}/test_main.cc)\n\n# 链接 Google Test 库到测试目标\ntarget_link_libraries(test_module1\n    ${PROJECT_NAME}_executable\n    ${THIRD_PARTY_DIR}/gtest/lib/libgtest.a\n)\n\ntarget_link_libraries(test_module2\n    ${PROJECT_NAME}_executable\n    ${THIRD_PARTY_DIR}/gtest/lib/libgtest.a\n)\n\ntarget_link_libraries(test_main\n    ${PROJECT_NAME}_executable\n    ${THIRD_PARTY_DIR}/gtest/lib/libgtest.a\n)\n\n# 添加测试\nadd_test(NAME TestModule1 COMMAND test_module1)\nadd_test(NAME TestModule2 COMMAND test_module2)\nadd_test(NAME TestMain COMMAND test_main)\n\n# 设置安装规则\ninstall(TARGETS ${PROJECT_NAME}_executable DESTINATION deploy/bin)\ninstall(DIRECTORY ${INCLUDE_DIR}/ DESTINATION deploy/include)\ninstall(DIRECTORY ${THIRD_PARTY_DIR}/3rdparty_1/include/ DESTINATION deploy/include)\ninstall(DIRECTORY ${THIRD_PARTY_DIR}/3rdparty_2/include/ DESTINATION deploy/include)\ninstall(DIRECTORY ${CMAKE_BINARY_DIR}/lib/ DESTINATION deploy/lib)\n```","excerpt":"","includedFiles":[],"tasklistId":0,"title":"1.Make","headers":[{"level":2,"title":"1.1.Make 的概念","slug":"_1-1-make-的概念","link":"#_1-1-make-的概念","children":[]},{"level":2,"title":"1.2.Make 的使用","slug":"_1-2-make-的使用","link":"#_1-2-make-的使用","children":[{"level":3,"title":"1.2.1.编写代码文件","slug":"_1-2-1-编写代码文件","link":"#_1-2-1-编写代码文件","children":[]},{"level":3,"title":"1.2.2.编写构建文件","slug":"_1-2-2-编写构建文件","link":"#_1-2-2-编写构建文件","children":[]},{"level":3,"title":"1.2.3.运行构建工具","slug":"_1-2-3-运行构建工具","link":"#_1-2-3-运行构建工具","children":[]}]},{"level":2,"title":"2.1.Cmake 的概念","slug":"_2-1-cmake-的概念","link":"#_2-1-cmake-的概念","children":[]},{"level":2,"title":"2.2.Cmake 的使用","slug":"_2-2-cmake-的使用","link":"#_2-2-cmake-的使用","children":[{"level":3,"title":"2.2.1.CMake 的基本使用","slug":"_2-2-1-cmake-的基本使用","link":"#_2-2-1-cmake-的基本使用","children":[]},{"level":3,"title":"2.2.2.CMake 的常用指令","slug":"_2-2-2-cmake-的常用指令","link":"#_2-2-2-cmake-的常用指令","children":[]},{"level":3,"title":"2.2.3.高级使用 CMake","slug":"_2-2-3-高级使用-cmake","link":"#_2-2-3-高级使用-cmake","children":[]}]}]}}
