{"content":"<h2 id=\"_1-初始操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-初始操作\"><span>1.初始操作</span></a></h2>\n<p>购买标准的 <code v-pre>Ubuntu22.04</code> 轻量级云服务器，并且规定只使用 <code v-pre>root</code>，这里我们直接在控制台中执行，一般来说一个 <code v-pre>4核8G</code> 的服务器足够一个项目持续运行了，如果没有人访问就可以作为多个项目的测试环境。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查磁盘大小</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">df</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -h</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开机自动启动 ssh 服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> enable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ssh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 手动启动一次 ssh 服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ssh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 永久修改主机名（重启不失效）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> hostnamectl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> set-hostname</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> edtechhub</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 更新软件源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> update</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 更新软件（无弹窗）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> DEBIAN_FRONTEND=noninteractive</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> upgrade</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_2-基础软件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-基础软件\"><span>2.基础软件</span></a></h2>\n<p>首先安装一些基础软件，然后再推荐安装 <a href=\"https://www.x-cmd.com/\" target=\"_blank\" rel=\"noopener noreferrer\">x-cmd</a> 系列工具包（包含各种工具）。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装常用软件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> git</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> wget</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ufw</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 x-cmd 请查阅 https://cn.x-cmd.com/start/#%E4%BD%BF%E7%94%A8-posix-shell-%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">eval</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://get.x-cmd.com</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_3-配置主机\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-配置主机\"><span>3.配置主机</span></a></h2>\n<h3 id=\"_3-1-配置端口\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-1-配置端口\"><span>3.1.配置端口</span></a></h3>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 28804</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 运维服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 443</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 网关服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 40031</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 编码服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8848</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9848</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 配置服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3306</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 5432</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 33060</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存储服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 6379</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 缓存服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8082</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 23333</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 调度服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8080</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9876</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10909</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10911</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10912</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 队列服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 7091</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8091</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 事务服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9200</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 搜索服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 8001:8010/tcp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 8001:8010/udp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 后端服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3001:3010/tcp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3001:3010/udp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 前端服务</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：同时需要同步设置服务器控制台和运维服务的端口。</p>\n</div>\n<h3 id=\"_3-2-配置域名\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-2-配置域名\"><span>3.2.配置域名</span></a></h3>\n<p>购买一个专属的域名（本人的域名是 <code v-pre>edtechhub.com.cn</code>），可以使用这个域名来进行远程登陆和项目部署。</p>\n<h2 id=\"_4-服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-服务部署\"><span>4.服务部署</span></a></h2>\n<h3 id=\"_4-1-基础服务\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-1-基础服务\"><span>4.1.基础服务</span></a></h3>\n<p>先安装 <a href=\"https://1panel.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">1panel</a>，这个安装脚本会安装一个运维面板（端口选择 <code v-pre>28804</code>），同时自动安装 <code v-pre>Docker</code> 且配置加速。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 1panel 请查阅 https://1panel.cn/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bash</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -c</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -sSL</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后通过访问面板来完成我们的所有基础服务的部署操作...</p>\n<h3 id=\"_4-2-业务服务\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-2-业务服务\"><span>4.2.业务服务</span></a></h3>\n","env":{"base":"/","filePath":"/home/ljp/git/work/work-blog-website/work-blog-website-frontend/docs/4.业务服务/1.部署服务/001_2025_12_12_ljp_单机部署服务.md","filePathRelative":"4.业务服务/1.部署服务/001_2025_12_12_ljp_单机部署服务.md","frontmatter":{"createTime":"2025/12/12 13:13:22","permalink":"/4.业务服务/iybhm2ta/","title":"单机部署服务"},"sfcBlocks":{"template":{"type":"template","content":"<template><h2 id=\"_1-初始操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-初始操作\"><span>1.初始操作</span></a></h2>\n<p>购买标准的 <code v-pre>Ubuntu22.04</code> 轻量级云服务器，并且规定只使用 <code v-pre>root</code>，这里我们直接在控制台中执行，一般来说一个 <code v-pre>4核8G</code> 的服务器足够一个项目持续运行了，如果没有人访问就可以作为多个项目的测试环境。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查磁盘大小</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">df</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -h</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开机自动启动 ssh 服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> enable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ssh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 手动启动一次 ssh 服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ssh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 永久修改主机名（重启不失效）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> hostnamectl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> set-hostname</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> edtechhub</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 更新软件源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> update</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 更新软件（无弹窗）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> DEBIAN_FRONTEND=noninteractive</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> upgrade</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_2-基础软件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-基础软件\"><span>2.基础软件</span></a></h2>\n<p>首先安装一些基础软件，然后再推荐安装 <a href=\"https://www.x-cmd.com/\" target=\"_blank\" rel=\"noopener noreferrer\">x-cmd</a> 系列工具包（包含各种工具）。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装常用软件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> git</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> wget</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ufw</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 x-cmd 请查阅 https://cn.x-cmd.com/start/#%E4%BD%BF%E7%94%A8-posix-shell-%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">eval</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://get.x-cmd.com</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_3-配置主机\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-配置主机\"><span>3.配置主机</span></a></h2>\n<h3 id=\"_3-1-配置端口\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-1-配置端口\"><span>3.1.配置端口</span></a></h3>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 28804</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 运维服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 443</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 网关服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 40031</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 编码服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8848</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9848</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 配置服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3306</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 5432</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 33060</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存储服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 6379</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 缓存服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8082</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 23333</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 调度服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8080</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9876</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10909</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10911</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10912</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 队列服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 7091</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8091</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 事务服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9200</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 搜索服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 8001:8010/tcp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 8001:8010/udp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 后端服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3001:3010/tcp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3001:3010/udp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 前端服务</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：同时需要同步设置服务器控制台和运维服务的端口。</p>\n</div>\n<h3 id=\"_3-2-配置域名\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-2-配置域名\"><span>3.2.配置域名</span></a></h3>\n<p>购买一个专属的域名（本人的域名是 <code v-pre>edtechhub.com.cn</code>），可以使用这个域名来进行远程登陆和项目部署。</p>\n<h2 id=\"_4-服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-服务部署\"><span>4.服务部署</span></a></h2>\n<h3 id=\"_4-1-基础服务\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-1-基础服务\"><span>4.1.基础服务</span></a></h3>\n<p>先安装 <a href=\"https://1panel.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">1panel</a>，这个安装脚本会安装一个运维面板（端口选择 <code v-pre>28804</code>），同时自动安装 <code v-pre>Docker</code> 且配置加速。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 1panel 请查阅 https://1panel.cn/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bash</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -c</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -sSL</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后通过访问面板来完成我们的所有基础服务的部署操作...</p>\n<h3 id=\"_4-2-业务服务\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-2-业务服务\"><span>4.2.业务服务</span></a></h3>\n</template>","contentStripped":"<h2 id=\"_1-初始操作\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_1-初始操作\"><span>1.初始操作</span></a></h2>\n<p>购买标准的 <code v-pre>Ubuntu22.04</code> 轻量级云服务器，并且规定只使用 <code v-pre>root</code>，这里我们直接在控制台中执行，一般来说一个 <code v-pre>4核8G</code> 的服务器足够一个项目持续运行了，如果没有人访问就可以作为多个项目的测试环境。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 检查磁盘大小</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">df</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -h</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 开机自动启动 ssh 服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> enable</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ssh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 手动启动一次 ssh 服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ssh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 永久修改主机名（重启不失效）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> hostnamectl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> set-hostname</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> edtechhub</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 更新软件源</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> update</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 更新软件（无弹窗）</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> DEBIAN_FRONTEND=noninteractive</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> upgrade</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -y</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_2-基础软件\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_2-基础软件\"><span>2.基础软件</span></a></h2>\n<p>首先安装一些基础软件，然后再推荐安装 <a href=\"https://www.x-cmd.com/\" target=\"_blank\" rel=\"noopener noreferrer\">x-cmd</a> 系列工具包（包含各种工具）。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装常用软件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> apt</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> git</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> wget</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ufw</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 x-cmd 请查阅 https://cn.x-cmd.com/start/#%E4%BD%BF%E7%94%A8-posix-shell-%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">eval</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://get.x-cmd.com</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"_3-配置主机\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-配置主机\"><span>3.配置主机</span></a></h2>\n<h3 id=\"_3-1-配置端口\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-1-配置端口\"><span>3.1.配置端口</span></a></h3>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 28804</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 运维服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 443</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 网关服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 40031</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 编码服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8848</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9848</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 配置服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 3306</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 5432</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 33060</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 存储服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 6379</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 缓存服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8082</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 23333</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 调度服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8080</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9876</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10909</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10911</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 10912</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 队列服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 7091</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 8091</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 事务服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 9200</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 搜索服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 8001:8010/tcp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 8001:8010/udp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 后端服务</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3001:3010/tcp</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> ufw</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> allow</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 3001:3010/udp</span><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"> # 前端服务</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"hint-container important\">\n<p class=\"hint-container-title\">重要</p>\n<p>补充：同时需要同步设置服务器控制台和运维服务的端口。</p>\n</div>\n<h3 id=\"_3-2-配置域名\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_3-2-配置域名\"><span>3.2.配置域名</span></a></h3>\n<p>购买一个专属的域名（本人的域名是 <code v-pre>edtechhub.com.cn</code>），可以使用这个域名来进行远程登陆和项目部署。</p>\n<h2 id=\"_4-服务部署\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-服务部署\"><span>4.服务部署</span></a></h2>\n<h3 id=\"_4-1-基础服务\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-1-基础服务\"><span>4.1.基础服务</span></a></h3>\n<p>先安装 <a href=\"https://1panel.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">1panel</a>，这个安装脚本会安装一个运维面板（端口选择 <code v-pre>28804</code>），同时自动安装 <code v-pre>Docker</code> 且配置加速。</p>\n<div class=\"language-shell line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"shell\" style=\"--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212\"><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code class=\"language-shell\"><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\"># 安装 1panel 请查阅 https://1panel.cn/</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">bash</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -c</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">$(</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\"> -sSL</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">)</span><span style=\"--shiki-light:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>然后通过访问面板来完成我们的所有基础服务的部署操作...</p>\n<h3 id=\"_4-2-业务服务\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#_4-2-业务服务\"><span>4.2.业务服务</span></a></h3>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n## 1.初始操作\n\n购买标准的 `Ubuntu22.04` 轻量级云服务器，并且规定只使用 `root`，这里我们直接在控制台中执行，一般来说一个 `4核8G` 的服务器足够一个项目持续运行了，如果没有人访问就可以作为多个项目的测试环境。\n\n```shell\n# 检查磁盘大小\ndf -h\n\n# 开机自动启动 ssh 服务\nsudo systemctl enable ssh\n\n# 手动启动一次 ssh 服务\nsudo systemctl start ssh\n\n# 永久修改主机名（重启不失效）\nsudo hostnamectl set-hostname edtechhub\n\n# 更新软件源\nsudo apt update\n\n# 更新软件（无弹窗）\nsudo DEBIAN_FRONTEND=noninteractive apt upgrade -y\n```\n\n## 2.基础软件\n\n首先安装一些基础软件，然后再推荐安装 [x-cmd](https://www.x-cmd.com/) 系列工具包（包含各种工具）。\n\n```shell\n# 安装常用软件\nsudo apt install git curl wget ufw\n\n# 安装 x-cmd 请查阅 https://cn.x-cmd.com/start/#%E4%BD%BF%E7%94%A8-posix-shell-%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC\neval \"$(curl https://get.x-cmd.com)\"\n```\n\n## 3.配置主机\n\n### 3.1.配置端口\n\n```shell\nufw allow 28804 # 运维服务\nufw allow 443 # 网关服务\nufw allow 40031 # 编码服务\nufw allow 8848 && ufw allow 9848 # 配置服务\nufw allow 3306 && ufw allow 5432 && ufw allow 33060 # 存储服务\nufw allow 6379 # 缓存服务\nufw allow 8082 && ufw allow 23333 # 调度服务\nufw allow 8080 && ufw allow 9876 && ufw allow 10909 && ufw allow 10911 && ufw allow 10912 # 队列服务\nufw allow 7091 && ufw allow 8091 # 事务服务\nufw allow 9200 # 搜索服务\nufw allow 8001:8010/tcp && ufw allow 8001:8010/udp # 后端服务\nufw allow 3001:3010/tcp && ufw allow 3001:3010/udp # 前端服务\n```\n\n> [!IMPORTANT]\n>\n> 补充：同时需要同步设置服务器控制台和运维服务的端口。\n\n### 3.2.配置域名\n\n购买一个专属的域名（本人的域名是 `edtechhub.com.cn`），可以使用这个域名来进行远程登陆和项目部署。\n\n## 4.服务部署\n\n### 4.1.基础服务\n\n先安装 [1panel](https://1panel.cn/)，这个安装脚本会安装一个运维面板（端口选择 `28804`），同时自动安装 `Docker` 且配置加速。\n\n```shell\n# 安装 1panel 请查阅 https://1panel.cn/\nbash -c \"$(curl -sSL https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh)\"\n```\n\n然后通过访问面板来完成我们的所有基础服务的部署操作...\n\n### 4.2.业务服务","excerpt":"","includedFiles":[],"tasklistId":0,"title":"","headers":[{"level":2,"title":"1.初始操作","slug":"_1-初始操作","link":"#_1-初始操作","children":[]},{"level":2,"title":"2.基础软件","slug":"_2-基础软件","link":"#_2-基础软件","children":[]},{"level":2,"title":"3.配置主机","slug":"_3-配置主机","link":"#_3-配置主机","children":[{"level":3,"title":"3.1.配置端口","slug":"_3-1-配置端口","link":"#_3-1-配置端口","children":[]},{"level":3,"title":"3.2.配置域名","slug":"_3-2-配置域名","link":"#_3-2-配置域名","children":[]}]},{"level":2,"title":"4.服务部署","slug":"_4-服务部署","link":"#_4-服务部署","children":[{"level":3,"title":"4.1.基础服务","slug":"_4-1-基础服务","link":"#_4-1-基础服务","children":[]},{"level":3,"title":"4.2.业务服务","slug":"_4-2-业务服务","link":"#_4-2-业务服务","children":[]}]}]}}
