---
createTime: 2025/12/12 13:13:22
permalink: /4.业务服务/iybhm2ta/
---
# 单机部署服务

## 1.初始操作

购买标准的 `Ubuntu22.04` 轻量级云服务器，并且规定只使用 `root`，这里我们直接在控制台中执行，一般来说一个 `4核8G` 的服务器足够一个项目持续运行了，如果没有人访问就可以作为多个项目的测试环境。

```shell
# 检查磁盘大小
df -h

# 开机自动启动 ssh 服务
sudo systemctl enable ssh

# 手动启动一次 ssh 服务
sudo systemctl start ssh

# 永久修改主机名（重启不失效）
sudo hostnamectl set-hostname edtechhub

# 更新软件源
sudo apt update

# 更新软件（无弹窗）
sudo DEBIAN_FRONTEND=noninteractive apt upgrade -y
```

## 2.基础软件

首先安装一些基础软件，然后再推荐安装 [x-cmd](https://www.x-cmd.com/) 系列工具包（包含各种工具）。

```shell
# 安装常用软件
sudo apt install git curl wget ufw

# 安装 x-cmd 请查阅 https://cn.x-cmd.com/start/#%E4%BD%BF%E7%94%A8-posix-shell-%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC
eval "$(curl https://get.x-cmd.com)"
```

## 3.配置主机

### 3.1.配置端口

```shell
ufw allow 28804 # 运维服务
ufw allow 443 # 网关服务
ufw allow 40031 # 编码服务
ufw allow 8848 && ufw allow 9848 # 配置服务
ufw allow 3306 && ufw allow 5432 && ufw allow 33060 # 存储服务
ufw allow 6379 # 缓存服务
ufw allow 8082 && ufw allow 23333 # 调度服务
ufw allow 8080 && ufw allow 9876 && ufw allow 10909 && ufw allow 10911 && ufw allow 10912 # 队列服务
ufw allow 7091 && ufw allow 8091 # 事务服务
ufw allow 9200 # 搜索服务
ufw allow 8001:8010/tcp && ufw allow 8001:8010/udp # 后端服务
ufw allow 3001:3010/tcp && ufw allow 3001:3010/udp # 前端服务
```

> [!IMPORTANT]
>
> 补充：同时需要同步设置服务器控制台和运维服务的端口。

### 3.2.配置域名

购买一个专属的域名（本人的域名是 `edtechhub.com.cn`），可以使用这个域名来进行远程登陆和项目部署。

## 4.服务部署

先安装 [1panel](https://1panel.cn/)，这个安装脚本会安装一个运维面板（端口选择 `28804`），同时自动安装 `Docker` 且配置加速。

```shell
# 安装 1panel 请查阅 https://1panel.cn/
bash -c "$(curl -sSL https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh)"
```

## 5.业务管理

我们需要管理多个具备 `Git` 父子仓库。









获取部署安装包 https://nfturbo-file.oss-cn-hangzhou.aliyuncs.com/NFTurbo_DockerCompose_2025_11_10.zip

执行 `sh start-core.sh`

然后复制以下内容，覆盖后端项目中的 base.yml，里面的ip改成你自己的ip	

```yaml
# 这是项目的需要改动的所有配置的地址的汇总，需要改哪个中间件的地址，在本文件中修改即可！
nft:
  turbo:
    nacos:
      server:
        url: ip:8848 # nft.turbo.nacos.server.url - Nacos 的地址+端口号 #首次启动前务必修改成你自己的
    mysql:
      url: jdbc:mysql://ip:3306/nfturbo # nft.turbo.mysql.url - MySQL 的地址+数据库配置 #首次启动前务必修改成你自己的
      username: nfturbo # nft.turbo.mysql.username - MySQL 的用户名 #首次启动前务必修改成你自己的
      password: 'NFTurbo666' # nft.turbo.mysql.password - MySQL 的密码 #首次启动前务必修改成你自己的
    redis:
      url: ip  # nft.turbo.redis.url - Redis 的地址 #首次启动前务必修改成你自己的
      port: 6379  # nft.turbo.redis.port - Redis 的端口号 #首次启动前务必修改成你自己的
      password: 'NFTurbo666' # nft.turbo.redis.password - Redis 的密码 #首次启动前务必修改成你自己的
    elasticsearch:
      enable: false # nft.turbo.elasticsearch.enable #如果你要使用es(没有启动一键mock)，这里需要改成true
      url: 192.168.0.1:9200 # nft.turbo.elasticsearch.url - ElasticSearch 的地址+端口号 ##如果你要使用es(没有启动一键mock)，这里需要改成true
      username: elastic # nft.turbo.elasticsearch.username - ElasticSearch 的用户名 ##如果你要使用es(没有启动一键mock)，这里需要改成true
      password: 123456  # nft.turbo.elasticsearch.password - ElasticSearch 的密码 ##如果你要使用es(没有启动一键mock)，这里需要改成true
    xxl-job:
      url: ip:23333  # nft.turbo.xxl-job.url - XXL-JOB 的地址 # 如果你要用他，这里需要改成你自己的
      appName: xxl-job-executor  # nft.turbo.xxl-job.appName - 需要和你在xxl-job上创建的执行器名字保持一致，这里需要改成你自己的
      accessToken: default_token # nft.turbo.xxl-job.accessToken - 需要和你在xxl-job上创建的token保持一致，这里需要改成你自己的
    sentinel:
      url: 192.168.0.1:8099 # nft.turbo.sentinel.url - Sentinel 的地址+端口号 # 如果用了sentinel 这里需要改成你自己的sentinel的控制台地址
      port: 8098 # nft.turbo.sentinel.port - Sentinel 端口号 # 如果用了sentinel 这里需要改成你自己的sentinel的端口号
      nacos:
        data-id: nfturbo-gateway-sentinel # nft.turbo.sentinel.nacos.data-id - Sentinel配置保存的 nacos 的 data-id # 如果用了sentinel 这里需要改成你自己的 在nacos上定义的data-id
    rocketmq:
      url: ip:9876 # nft.turbo.rocketmq.url - RocketMQ 的地址+端口号 # 如果你要用RocketMQ，这里需要改成你自己的
    dubbo:
      nacos:
        namespace: dubbo_server # nft.turbo.dubbo.nacos.namespace - 自己到nacos上创建一个给dubbo用的namespce，然后和这里保持一致，首次启动前务必修改成你自己的 #首次启动前务必修改成你自己的
        group: dubbo  # nft.turbo.dubbo.nacos.group - 自己到nacos上创建一个给dubbo用的 group，然后和这里保持一致，首次启动前务必修改成你自己的 #首次启动前务必修改成你自己的
    seata:
      nacos:
        data-id: seataServer.properties # nft.turbo.seata.nacos.data-id - Seata 对应的Nacos 保存配置的 data-id #首次启动前务必修改成你自己的
        group: seata # nft.turbo.seata.nacos.group - Seata 对应的Nacos 保存配置的 data-id #首次启动前务必修改成你自己的
        namespace: seata_server # nft.turbo.seata.nacos.namespace - Seata 对应的Nacos 保存配置的 namespace #首次启动前务必修改成你自己的
```

控制台。

|                    |                              |         |            |
| ------------------ | ---------------------------- | ------- | ---------- |
| 服务               | 地址                         | 账号    | 密码       |
| Nacos              | http://ip:8848/nacos         | -       | -          |
| XXL-JOB            | http://ip:8082/xxl-job-admin | admin   | 123456     |
| RocketMQ Dashboard | http://ip:8080               | -       | -          |
| Redis              | http://ip:6379               | -       | NFTurbo666 |
| MySQL              | http://ip:3306               | nfturbo | NFTurbo666 |

服务端代码地址：https://codeup.aliyun.com/66263f57d833774c93cc0418/NFTurbo/NFTurbo_Server （后端代码，必不可少）

客户端代码地址：https://codeup.aliyun.com/66263f57d833774c93cc0418/NFTurbo/NFTurbo_Client （前端代码，必不可少）

